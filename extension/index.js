(()=>{"use strict";var e={761:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AutomationActionController=void 0;const o=n(31),r=n(4365);class i extends o.BaseController{constructor(e,t){super(e),this.listen("startGame",(()=>{t.startAutomationAction(r.GameAutomationAction.START_GAME)})),this.listen("endGame",(()=>{t.startAutomationAction(r.GameAutomationAction.END_GAME)})),this.listen("fastForwardToNextGameAutomationTask",(()=>a(this,void 0,void 0,(function*(){yield t.fastForwardToNextAutomationTask()})))),this.listen("cancelAutomationAction",(()=>{t.cancelAutomationAction()}))}}t.AutomationActionController=i},31:function(e,t){var n=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseController=void 0,t.BaseController=class{constructor(e){this.nodecg=e}listen(e,t){this.nodecg.listenFor(e,((e,a)=>n(this,void 0,void 0,(function*(){try{const n=yield t(e);a.handled||a(null,n)}catch(e){a.handled||a(e)}}))))}}},4:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObsConnectorController=void 0;const o=n(31);class r extends o.BaseController{constructor(e,t){super(e);const n=e.Replicant("obsCredentials"),o=e.Replicant("obsData");this.listen("connectToObs",(e=>a(this,void 0,void 0,(function*(){if(n.value=e,!o.value.enabled)throw new Error("OBS integration is disabled.");t.stopReconnecting(),yield t.connect()})))),this.listen("setObsData",(e=>{var t,n;if(!(null===(t=o.value.scenes)||void 0===t?void 0:t.some((t=>t===e.gameplayScene)))||!(null===(n=o.value.scenes)||void 0===n?void 0:n.some((t=>t===e.intermissionScene))))throw new Error("Could not find one or more of the provided scenes.");o.value=Object.assign(Object.assign({},o.value),{gameplayScene:e.gameplayScene,intermissionScene:e.intermissionScene})})),this.listen("setObsSocketEnabled",(e=>a(this,void 0,void 0,(function*(){if(null==e)throw new Error("Invalid arguments.");o.value.enabled=e,e?yield t.connect():yield t.disconnect()}))))}}t.ObsConnectorController=r},2062:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.normalizePronouns=void 0;const a=n(8157);t.normalizePronouns=function(e){if(null==e||"string"!=typeof e||(0,a.isBlank)(e))return e;if(e=e.toLowerCase(),/(^|\s)any\s/gi.test(e))return"any pronouns";const t=e.replace(/\s*\/\s*/g,"/").match(/\S*\/\S*/g);return null==t?e:t.map((e=>e.replace(/[.,!-]/g,""))).join(", ")}},702:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getPreviousColor=t.getNextColor=t.setActiveColor=void 0;const s=r(n(8604)),l=i(n(9591)),u=n(4719),c=s.get(),d=c.Replicant("activeRound"),m=c.Replicant("runtimeConfig"),f=c.Replicant("swapColorsInternally");function p(e){return Object.assign(Object.assign({},e),{clrA:e.clrB,clrB:e.clrA})}function h(){return u.perGameData[m.value.gameVersion].colors.find((e=>e.meta.name===d.value.activeColor.categoryName))}t.setActiveColor=function(e){const t=(0,l.default)(d.value);t.activeColor={categoryName:e.categoryName,index:e.color.index,title:e.color.title,isCustom:e.color.isCustom,clrNeutral:e.color.clrNeutral},t.teamA.color=e.color.clrA,t.teamB.color=e.color.clrB,d.value=t},t.getNextColor=function(){const e=h(),t=d.value.activeColor.index,n=e.colors.find((n=>n.index===(t+1===e.colors.length?0:t+1)));return Object.assign(Object.assign({},f.value?p(n):n),{categoryName:e.meta.name})},t.getPreviousColor=function(){const e=h(),t=d.value.activeColor.index,n=e.colors.find((n=>n.index===(0===t?e.colors.length-1:t-1)));return Object.assign(Object.assign({},f.value?p(n):n),{categoryName:e.meta.name})}},5851:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setActiveRoundTeams=t.setActiveRoundGames=t.setWinner=void 0;const s=n(9383),l=n(117),u=r(n(8604)),c=i(n(9699)),d=n(5780),m=i(n(9591)),f=u.get(),p=f.Replicant("activeRound"),h=f.Replicant("swapColorsInternally"),v=f.Replicant("matchStore"),g=f.Replicant("tournamentData");t.setWinner=function(e,t){if(e>=p.value.games.length||e<0)throw new Error(`Cannot set winner for game ${e+1} as it does not exist.`);const n=(0,m.default)(p.value),a=(0,m.default)(p.value.games[e]);t===s.GameWinner.NO_WINNER?(a.winner===s.GameWinner.ALPHA?n.teamA.score--:a.winner===s.GameWinner.BRAVO&&n.teamB.score--,n.games[e].winner=s.GameWinner.NO_WINNER,n.games[e].color=void 0):(t===s.GameWinner.ALPHA?(n.teamA.score++,n.games[e].winner=t,a.winner===s.GameWinner.BRAVO&&n.teamB.score--):t===s.GameWinner.BRAVO&&(n.teamB.score++,n.games[e].winner=t,a.winner===s.GameWinner.ALPHA&&n.teamA.score--),a.color||(n.games[e].color=Object.assign(Object.assign({},p.value.activeColor),{clrA:p.value.teamA.color,clrB:p.value.teamB.color,colorsSwapped:h.value})));const o=n.games.length/2;n.match.isCompleted=n.teamA.score>o||n.teamB.score>o,p.value=n,(0,l.commitActiveRoundToMatchStore)()},t.setActiveRoundGames=function(e,t){const n=v.value[t];if((0,c.default)(n))throw new Error(`Could not find match '${t}'.`);e.match={id:t,name:n.meta.name,isCompleted:n.meta.isCompleted,type:n.meta.type},e.games=(0,m.default)(n.games),e.teamA.score=n.teamA.score,e.teamB.score=n.teamB.score},t.setActiveRoundTeams=function(e,t,n){const a=(0,d.getTeam)(t,g.value),o=(0,d.getTeam)(n,g.value);if([a,o].filter(c.default).length>0)throw new Error("Could not find a team.");const r=(0,m.default)(e.teamA),i=(0,m.default)(e.teamB);e.teamA=Object.assign({score:r.score,color:r.color},a),e.teamB=Object.assign({score:i.score,color:i.color},o)}},8209:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.dependentBundles=void 0;const i=n(7147),s=r(n(8604)),l=n(8250),u=s.get(),c=`${process.env.NODECG_ROOT}/bundles`,d=Object.keys(l.GameVersion);t.dependentBundles=(0,i.readdirSync)(c,{withFileTypes:!0}).filter((e=>e.isDirectory()&&e.name!==u.bundleName)).map((e=>{const t=`${c}/${e.name}/package.json`;if((0,i.existsSync)(t)){const a=JSON.parse((0,i.readFileSync)(t,"utf-8")),o=(n=a.compatibleGameVersions,!Array.isArray(n)||n.length<=0?[l.GameVersion.SPLATOON_2]:n.filter((e=>d.includes(e))));if(o.length<=0&&u.log.warn(`Could not parse compatible game versions for bundle '${e.name}'.`),"compatibleDashboardVersion"in a)return{name:e.name,compatibleDashboardVersion:a.compatibleDashboardVersion,compatibleGameVersions:null!=o?o:[]}}var n;return null})).filter(Boolean)},2099:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setActiveRoundToFirstMatch=t.resetMatchStore=void 0;const s=r(n(8604)),l=n(4615),u=i(n(9591)),c=n(9383),d=n(5851),m=n(4719),f=s.get(),p=f.Replicant("matchStore"),h=f.Replicant("roundStore"),v=f.Replicant("tournamentData"),g=f.Replicant("activeRound"),b=f.Replicant("runtimeConfig"),y=f.Replicant("swapColorsInternally");function _(e=!1){const t=Object.keys(p.value)[0],n=p.value[t],a=(0,u.default)(g.value);if((0,d.setActiveRoundGames)(a,t),(0,d.setActiveRoundTeams)(a,n.teamA.id,n.teamB.id),e){const e=m.perGameData[b.value.gameVersion].colors[0],t=e.colors[0];a.teamA.color=y.value?t.clrB:t.clrA,a.teamB.color=y.value?t.clrA:t.clrB,a.activeColor={index:t.index,title:t.title,categoryName:e.meta.name,isCustom:t.isCustom,clrNeutral:t.clrNeutral}}g.value=a}t.resetMatchStore=function(e=!1){const t=Object.keys(h.value)[0],n=h.value[t],a=(0,l.generateId)(),o=(0,u.default)(v.value.teams[0]),r=(0,u.default)(v.value.teams[1]);p.value={[a]:{meta:{name:n.meta.name,isCompleted:!1,type:n.meta.type},teamA:Object.assign(Object.assign({},o),{score:0}),teamB:Object.assign(Object.assign({},r),{score:0}),games:n.games.map((e=>Object.assign(Object.assign({},e),{winner:c.GameWinner.NO_WINNER})))}},_(e)},t.setActiveRoundToFirstMatch=_},3717:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setNextRoundTeams=t.setNextRoundGames=void 0;const s=i(n(9699)),l=n(5780),u=r(n(8604)).get(),c=u.Replicant("nextRound"),d=u.Replicant("tournamentData"),m=u.Replicant("roundStore");t.setNextRoundGames=function(e){const t=m.value[e];if((0,s.default)(t))throw new Error(`Could not find round '${e}'.`);c.value.round={id:e,name:t.meta.name,type:t.meta.type},c.value.games=t.games.map((e=>({stage:e.stage,mode:e.mode})))},t.setNextRoundTeams=function(e,t){const n=(0,l.getTeam)(e,d.value),a=(0,l.getTeam)(t,d.value);if([n,a].filter(s.default).length>0)throw new Error("Could not find a team.");c.value.teamA=n,c.value.teamB=a}},8604:(e,t)=>{let n;Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.set=void 0,t.set=function(e){n=e},t.get=function(){return n}},4647:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.resetRoundStore=void 0;const s=r(n(8604)),l=n(6123),u=n(3717),c=n(4719),d=n(307),m=i(n(3901)),f=n(8275),p=s.get(),h=p.Replicant("roundStore"),v=p.Replicant("runtimeConfig");t.resetRoundStore=function(){const e="11111",t=c.perGameData[v.value.gameVersion],n=Object.keys((0,m.default)(t.stages[f.Locale.EN],["Unknown Stage","Counterpick"])),a=Object.keys((0,m.default)(t.modes[f.Locale.EN],["Unknown Mode"])),o=()=>({stage:(0,d.randomFromArray)(n),mode:(0,d.randomFromArray)(a)});h.value={"00000":{meta:{name:"Default Round 1",type:l.PlayType.BEST_OF},games:[o(),o(),o()]},[e]:{meta:{name:"Default Round 2",type:l.PlayType.BEST_OF},games:[o(),o(),o()]}},(0,u.setNextRoundGames)(e)}},5780:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getTeam=void 0;const o=a(n(739));t.getTeam=function(e,t,n=!0){const a=t.teams.filter((t=>t.id===e))[0];return n?(0,o.default)(a):a}},2096:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(8604)),l=n(6409),u=s.get(),c=u.Replicant("casters"),d=u.Replicant("radiaSettings");function m(e){return e.twitter=`@${e.twitter}`,e.pronouns=e.pronouns.toLowerCase(),e}u.listenFor("getLiveCommentators",((e,t)=>i(void 0,void 0,void 0,(function*(){var e;try{const e=yield(0,l.getLiveCasters)(d.value.guildID);if(e.length<=0)return t(new Error("Got no commentators from API."));const n=e.map(m),a=n.slice(0,3),o=n.slice(3);c.value=a.reduce(((e,t)=>{const n=t.discord_user_id;return delete t.discord_user_id,e[n]=t,e}),{}),t(null,{add:a,extra:o})}catch(n){if(404===(null===(e=null==n?void 0:n.response)||void 0===e?void 0:e.status))return t(null,null);t(n)}}))))},5014:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getBattlefyTournamentInfo=t.getBattlefyTournamentData=t.getBattlefyTournamentUrl=t.getBattlefyMatches=void 0;const r=o(n(2167)),i=n(4134),s=n(4417);function l(e){return`https://battlefy.com/${e.organization.slug}/${e.slug}/${e._id}/info?infoTab=details`}function u(e){return a(this,void 0,void 0,(function*(){const t=`https://api.battlefy.com/tournaments/${e}?extend%5Bcampaign%5D%5Bsponsor%5D=true&extend%5Bstages%5D%5B%24query%5D%5BdeletedAt%5D%5B%24exists%5D=false&extend%5Bstages%5D%5B%24opts%5D%5Bname%5D=1&extend%5Bstages%5D%5B%24opts%5D%5Bbracket%5D=1&extend%5Bstages%5D%5B%24opts%5D%5BstartTime%5D=1&extend%5Bstages%5D%5B%24opts%5D%5BendTime%5D=1&extend%5Bstages%5D%5B%24opts%5D%5Bschedule%5D=1&extend%5Bstages%5D%5B%24opts%5D%5BmatchCheckinDuration%5D=1&extend%5Bstages%5D%5B%24opts%5D%5BhasCheckinTimer%5D=1&extend%5Bstages%5D%5B%24opts%5D%5BhasStarted%5D=1&extend%5Bstages%5D%5B%24opts%5D%5BhasMatchCheckin%5D=1&extend%5Borganization%5D%5Bowner%5D%5B%24opts%5D%5Btimezone%5D=1&extend%5Borganization%5D%5B%24opts%5D%5Bname%5D=1&extend%5Borganization%5D%5B%24opts%5D%5Bslug%5D=1&extend%5Borganization%5D%5B%24opts%5D%5BownerID%5D=1&extend%5Borganization%5D%5B%24opts%5D%5BlogoUrl%5D=1&extend%5Borganization%5D%5B%24opts%5D%5BbannerUrl%5D=1&extend%5Borganization%5D%5B%24opts%5D%5Bfeatures%5D=1&extend%5Borganization%5D%5B%24opts%5D%5Bfollowers%5D=1&extend%5Bgame%5D=true&extend%5Bstreams%5D%5B%24query%5D%5BdeletedAt%5D%5B%24exists%5D=false`;return(yield r.default.get(t)).data[0]}))}t.getBattlefyMatches=function(e,t,n){return a(this,void 0,void 0,(function*(){const a=`https://api.battlefy.com/tournaments/${e}?extend[stages][$query][deletedAt][$exists]=false&extend[stages][matches]=1&extend[stages][$opts][name]=1&extend[stages][$opts][matches][$elemMatch][isMarkedLive]=true&extend[stages.matches.top.team]=1&extend[stages.matches.bottom.team]=1&extend[stages][$opts][bracket]=1&extend[stages.matches.top.team.persistentTeam]=1&extend[stages.matches.bottom.team.persistentTeam]=1&extend[stages.matches.top.team.players]=1&extend[stages.matches.bottom.team.players]=1`,o=yield r.default.get(a),{data:i}=o;if(i.error)throw new Error(`Got error from Battlefy: ${i.error}`);if(!i[0])throw new Error("Couldn't get tournament data from Battlefy.");const l=i[0];return n?(0,s.mapBattlefyStagesToHighlightedMatches)(l.stages):(0,s.mapBattlefyStagesToHighlightedMatches)(l.stages.filter((e=>t.includes(e._id))))}))},t.getBattlefyTournamentUrl=l,t.getBattlefyTournamentData=function(e){return a(this,void 0,void 0,(function*(){const t=yield u(e),n="https://dtmwra1jsgyb0.cloudfront.net/tournaments/"+e+"/teams";return new Promise(((a,o)=>{r.default.get(n).then((n=>{var r;const{data:u}=n;if(!Array.isArray(u))return u.error?o(new Error(u.error)):o(new Error("Received an unknown response from Battlefy."));const c={meta:{id:e,source:i.TournamentDataSource.BATTLEFY,name:t.name,shortName:null!==(r=t.name)&&void 0!==r?r:"Unknown Tournament",url:l(t)},teams:u.filter((e=>{var t;return!!e.players&&(null===(t=e.players)||void 0===t?void 0:t.length)>0})).map((e=>{var t;return{id:e._id,name:e.name,logoUrl:null===(t=e.persistentTeam)||void 0===t?void 0:t.logoUrl,showLogo:!0,players:e.players.map((e=>({name:e.inGameName,username:e.username})))}})),stages:(0,s.mapBattlefyStagesToTournamentData)(t.stages)};a(c)})).catch((e=>{o(e)}))}))}))},t.getBattlefyTournamentInfo=u},6409:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateTournamentData=t.getLiveCasters=t.handleAxiosError=t.createPrediction=t.updatePrediction=t.getPredictions=t.hasPredictionSupport=t.getGuildInfo=void 0;const l=s(n(2167)),u=r(n(8604)),c=s(n(9699)),d=u.get();function m(e){var t;if("response"in e){let n=`Radia API call failed with response ${e.response.status}`;throw(null===(t=e.response.data)||void 0===t?void 0:t.detail)&&("object"==typeof e.response.data.detail?e.response.data.detail.message?n+=`: ${e.response.data.detail.message}`:n+=`: ${JSON.stringify(e.response.data.detail)}`:n+=`: ${e.response.data.detail}`),new Error(n)}throw e}t.getGuildInfo=function(e){return i(this,void 0,void 0,(function*(){try{return(yield l.default.get(`${d.bundleConfig.radia.url}/organisation/guild/${e}`,{headers:{Authorization:d.bundleConfig.radia.authentication}})).data}catch(e){m(e)}}))},t.hasPredictionSupport=function(e){return i(this,void 0,void 0,(function*(){if((0,c.default)(d.bundleConfig.radia.authentication))return!1;try{const t=yield l.default.get(`${d.bundleConfig.radia.url}/predictions/check/${e}`,{headers:{Authorization:d.bundleConfig.radia.authentication}});return 200===t.status?"boolean"==typeof t.data.twitch&&t.data.twitch:(d.log.error(`Guild Check Auth Error: ${t.data.detail}`),!1)}catch(e){return d.log.error(`Guild Check Auth Error: ${e}`),!1}}))},t.getPredictions=function(e){return i(this,void 0,void 0,(function*(){try{return(yield l.default.get(`${d.bundleConfig.radia.url}/predictions/${e}`,{headers:{Authorization:d.bundleConfig.radia.authentication}})).data}catch(e){m(e)}}))},t.updatePrediction=function(e,t){return i(this,void 0,void 0,(function*(){try{return(yield l.default.patch(`${d.bundleConfig.radia.url}/predictions/${e}`,t,{headers:{Authorization:d.bundleConfig.radia.authentication}})).data}catch(e){m(e)}}))},t.createPrediction=function(e,t){return i(this,void 0,void 0,(function*(){try{return(yield l.default.post(`${d.bundleConfig.radia.url}/predictions/${e}`,t,{headers:{Authorization:d.bundleConfig.radia.authentication}})).data}catch(e){m(e)}}))},t.handleAxiosError=m,t.getLiveCasters=function(e){return i(this,void 0,void 0,(function*(){return yield l.default.get(`${d.bundleConfig.radia.url}/live/guild/${e}`,{headers:{Authorization:d.bundleConfig.radia.authentication}}).then((e=>{if(200!==e.status)throw new Error(`Radia API call failed with response ${e.status.toString()}`);return e.data}))}))},t.updateTournamentData=function(e,t,n){return i(this,void 0,void 0,(function*(){const a=yield l.default.post(`${d.bundleConfig.radia.url}/organisation/guild/${e}`,{bracket_link:t,tournament_name:n},{headers:{Authorization:d.bundleConfig.radia.authentication}});if(200!==a.status)throw new Error(`Radia API call failed with response ${a.status.toString()}`);return a.data}))}},6337:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getSmashGGStreamQueue=t.getSmashGGData=t.getSmashGGEvents=void 0;const r=o(n(2167)),i=n(4134),s=o(n(9699)),l=n(5735),u=n(2062);function c(e,t,n,o=!1){return a(this,void 0,void 0,(function*(){const a=yield r.default.post("https://api.smash.gg/gql/alpha",JSON.stringify({query:"query EventEntrants($eventId: ID!, $page: Int!, $perPage: Int!) {\n      event(id: $eventId) {\n        id\n        videogame {\n          displayName\n        }\n        tournament {\n          id\n          name\n          slug\n          streams{\n            id\n            streamName\n          }\n        }\n        name\n        entrants(query: {\n          page: $page\n          perPage: $perPage\n        }) {\n          pageInfo {\n            total\n            totalPages\n          }\n          nodes {\n            id\n            name\n            team {\n              images {\n                type\n                url\n              }\n            }\n            participants {\n              id\n              prefix\n              gamerTag\n              user{\n                genderPronoun\n              }\n            }\n          }\n        }\n      }\n    }",variables:{eventId:t,page:e,perPage:"50"}}),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${n}`}}),{data:i}=a;if(!i.data.event)throw new Error(`Could not find event with id '${t}'`);const l=[];return i.data.event.entrants.nodes.forEach((e=>{var t,n;l.push({id:e.id.toString(10),name:e.name,showLogo:!0,logoUrl:null===(n=null===(t=e.team)||void 0===t?void 0:t.images.find((e=>"profile"===e.type)))||void 0===n?void 0:n.url,players:e.participants.map((e=>{var t;return{name:(0,s.default)(e.prefix)?e.gamerTag:`${e.prefix} ${e.gamerTag}`,pronouns:(0,u.normalizePronouns)(null===(t=e.user)||void 0===t?void 0:t.genderPronoun)}}))})})),o?{pageInfo:l,raw:i}:{pageInfo:l}}))}function d(e){var t,n,a;return{id:e.entrant.id.toString(),name:e.entrant.name,showLogo:!0,seed:e.seed.groupSeedNum,players:e.entrant.participants.map((e=>{var t,n;return{name:(0,s.default)(e.prefix)?e.gamerTag:`${e.prefix} ${e.gamerTag}`,pronouns:null===(n=null===(t=e.user)||void 0===t?void 0:t.genderPronoun)||void 0===n?void 0:n.toLowerCase()}})),logoUrl:null===(a=null===(n=null===(t=e.entrant.team)||void 0===t?void 0:t.images)||void 0===n?void 0:n.find((e=>"profile"===e.type)))||void 0===a?void 0:a.url}}t.getSmashGGEvents=function(e,t){return a(this,void 0,void 0,(function*(){const n=yield r.default.post("https://api.smash.gg/gql/alpha",JSON.stringify({query:"query Events($slug: String!) {\n      tournament(slug: $slug) {\n        id\n        events {\n          id\n          name\n          videogame {\n            displayName\n          }\n        }\n      }\n    }",variables:{slug:e}}),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${t}`}});if(!n.data.data.tournament)throw new Error(`Could not find tournament with slug '${e}'.`);if(!n.data.data.tournament.events)throw new Error(`Tournament '${e}' has no events.`);return n.data.data.tournament.events.map((e=>({id:e.id,name:e.name,game:e.videogame.displayName})))}))},t.getSmashGGData=function(e,t){var n,o;return a(this,void 0,void 0,(function*(){const a=yield c(1,e,t,!0),r=a.raw.data.event.tournament.slug,s={meta:{id:r.substring(r.indexOf("/")+1),source:i.TournamentDataSource.SMASHGG,name:a.raw.data.event.tournament.name,shortName:null!==(n=a.raw.data.event.tournament.name)&&void 0!==n?n:"Unknown Tournament",url:`https://smash.gg/${a.raw.data.event.tournament.slug}/details`,sourceSpecificData:{smashgg:{tournamentId:a.raw.data.event.tournament.id,streams:null!==(o=a.raw.data.event.tournament.streams)&&void 0!==o?o:void 0,eventData:{id:a.raw.data.event.id,name:a.raw.data.event.name,game:a.raw.data.event.videogame.displayName}}}},teams:a.pageInfo};if(a.raw.data.event.entrants.pageInfo.totalPages>1){const n=[];for(let o=2;o<=a.raw.data.event.entrants.pageInfo.totalPages;o++)n.push(c(o,e,t));const o=yield Promise.all(n);for(let e=0;e<o.length;e++)s.teams=s.teams.concat(o[e].pageInfo)}return s}))},t.getSmashGGStreamQueue=function(e,t,n,o,i){var s,u;return a(this,void 0,void 0,(function*(){if((!o||o.length<=0)&&!i)return[];const a=yield r.default.post("https://api.smash.gg/gql/alpha",JSON.stringify({query:"query EventEntrants($slug: String!) {\n        tournament(slug: $slug) {\n            streamQueue {\n                stream{\n                  id\n                }\n                sets {\n                    id\n                    identifier\n                    round\n                    setGamesType\n                    event {\n                        id\n                    }\n                    phaseGroup {\n                        displayIdentifier\n                        phase {\n                            name\n                        }\n                    }\n                    slots {\n                        seed {\n                            groupSeedNum\n                        }\n                        entrant {\n                            id\n                            name\n                            team {\n                                images {\n                                    url\n                                    type\n                                }\n                            }\n                            participants {\n                                prefix\n                                gamerTag\n                                user {\n                                    genderPronoun\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }",variables:{slug:e}}),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${t}`}}),c=[],{data:m}=a;return(null===(u=null===(s=m.data)||void 0===s?void 0:s.tournament)||void 0===u?void 0:u.streamQueue)?(m.data.tournament.streamQueue.forEach((e=>{(i||o.includes(e.stream.id))&&e.sets.forEach((e=>{2!==e.slots.length||e.slots.some((e=>null===e.entrant))||e.event.id!==n||c.push({meta:{id:e.id.toString(),stageName:e.phaseGroup.displayIdentifier,round:e.round,match:0,name:`Set ${e.identifier} - Round ${e.round} - Pool ${e.phaseGroup.displayIdentifier} - ${e.phaseGroup.phase.name}`,playType:l.PlayTypeHelper.fromSmashggSetGamesType(e.setGamesType)},teamA:d(e.slots[0]),teamB:d(e.slots[1])})}))})),c):[]}))}},3842:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=n(5608),u=r(n(8604)),c=s(n(6674)),d=n(4137),m=n(406),f=u.get(),p=f.Replicant("runtimeConfig"),h=f.Router();h.post("/upload-tournament-json",(0,c.default)({limits:{fileSize:52428800}}),((e,t)=>i(void 0,void 0,void 0,(function*(){if(!e.files||!e.files.file||!e.body.jsonType||"application/json"!==e.files.file.mimetype)return t.status(400).send("Invalid attached file or jsonType property provided.");const n=e.files.file,a=JSON.parse(n.data.toString());switch(e.body.jsonType){case"rounds":try{(0,m.updateRounds)((0,l.handleRoundData)(a,p.value.gameVersion))}catch(e){return f.log.error("Failed to update round data:",e),t.status(400).send("Got an error while parsing round data.")}break;case"teams":try{const e=yield(0,d.parseUploadedTeamData)(a,n.name);(0,d.updateTournamentDataReplicants)(e)}catch(e){return f.log.error("Failed to parse team data:",e),t.status(400).send("Got an error while parsing team data.")}break;default:return t.status(400).send("Invalid value provided for jsonType.")}t.sendStatus(200)})))),f.mount("/ipl-overlay-controls",h)},4278:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(8604)),l=n(8394),u=n(4134),c=n(5014),d=n(6337),m=s.get(),f=m.Replicant("highlightedMatches"),p=m.Replicant("tournamentData");function h(e){e.sort(((e,t)=>{const n=`${e.meta.stageName} ${e.meta.name}`,a=`${t.meta.stageName} ${t.meta.name}`;return n<a?-1:n>a?1:0})),e.length>0&&(f.value=e)}m.listenFor("getHighlightedMatches",((e,t)=>i(void 0,void 0,void 0,(function*(){var n,a;switch(p.value.meta.source){case u.TournamentDataSource.BATTLEFY:if(!e.stages&&!e.getAllMatches)return t(new Error("Missing arguments."));(0,c.getBattlefyMatches)(p.value.meta.id,e.stages,e.getAllMatches).then((e=>e.length>0?(h(e),t(null,{status:l.ImportStatus.SUCCESS,data:e})):t(null,{status:l.ImportStatus.NO_DATA,data:e}))).catch((e=>{t(e)}));break;case u.TournamentDataSource.SMASHGG:{const o=null===(a=null===(n=m.bundleConfig)||void 0===n?void 0:n.smashgg)||void 0===a?void 0:a.apiKey;if(!o)return t(new Error("No Smash.gg API key found."));if(!e.streamIDs&&!e.getAllMatches)return t(new Error("Missing arguments."));(0,d.getSmashGGStreamQueue)(p.value.meta.id,o,p.value.meta.sourceSpecificData.smashgg.eventData.id,e.streamIDs,e.getAllMatches).then((e=>e.length>0?(h(e),t(null,{status:l.ImportStatus.SUCCESS,data:e})):t(null,{status:l.ImportStatus.NO_DATA,data:e}))).catch((e=>{t(e)}));break}default:t(new Error(`Invalid source '${p.value.meta.source}' given.`))}}))))},4417:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.mapBattlefyStagesToHighlightedMatches=t.mapBattlefyStagesToTournamentData=void 0;const o=n(2276),r=a(n(9699)),i=n(5735),s=n(4137);function l(e){var t;const n={id:e.team._id,name:e.team.name,logoUrl:null===(t=e.team.persistentTeam)||void 0===t?void 0:t.logoUrl,showLogo:!0,players:[]};for(let t=0;t<e.team.players.length;t++){const a={name:e.team.players[t].inGameName};n.players.push(a)}return n}t.mapBattlefyStagesToTournamentData=function(e){return e.map((e=>({name:e.name,id:e._id,type:o.BracketTypeHelper.fromBattlefy(e.bracket.type,e.bracket.style),playType:i.PlayTypeHelper.fromBattlefySeriesStyle(e.bracket.seriesStyle)})))},t.mapBattlefyStagesToHighlightedMatches=function(e){const t=[],n=e.filter((e=>["swiss","elimination","roundrobin"].includes(e.bracket.type)));for(let e=0;e<n.length;e++){const a=n[e],o=a.matches.filter((e=>!0===e.isMarkedLive));for(let e=0;e<o.length;e++){const n=o[e];if(!n.top.team||!n.bottom.team)continue;const u=l(n.top),c=l(n.bottom);if(!(0,s.teamExists)(u.id)||!(0,s.teamExists)(c.id))continue;let d=`Round ${n.roundNumber} Match `;n.matchType&&["loser","winner"].includes(n.matchType)?"loser"===n.matchType?d+=`L${n.matchNumber}`:"winner"===n.matchType&&(d+=`C${n.matchNumber}`):d+=n.matchNumber;const m={id:n._id,stageName:a.name,round:n.roundNumber,match:n.matchNumber,name:d,playType:i.PlayTypeHelper.fromBattlefySeriesStyle(a.bracket.seriesStyle)};(0,r.default)(n.completedAt)||(m.completionTime=n.completedAt),t.push({meta:m,teamA:u,teamB:c})}}return t}},1068:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PredictionDataMapper=void 0;const a=n(2748);t.PredictionDataMapper=class{static fromApiResponse(e){var t,n,a;return{id:e.id,broadcasterId:e.broadcaster_id,broadcasterName:e.broadcaster_name,broadcasterLogin:e.broadcaster_login,title:e.title,winningOutcome:null!==(t=e.winning_outcome_id)&&void 0!==t?t:void 0,outcomes:this.mapOutcomes(e.outcomes),duration:e.prediction_window,status:e.status,creationTime:e.created_at,endTime:null!==(n=e.ended_at)&&void 0!==n?n:void 0,lockTime:null!==(a=e.locked_at)&&void 0!==a?a:void 0}}static fromBeginEvent(e){return{id:e.id,broadcasterId:e.broadcaster_user_id,broadcasterName:e.broadcaster_user_name,broadcasterLogin:e.broadcaster_user_login,title:e.title,outcomes:e.outcomes.map((e=>({id:e.id,title:e.title,color:e.color.toUpperCase(),users:0,pointsUsed:0,topPredictors:[]}))),duration:this.getIsoTimeDifferenceSeconds(e.started_at,e.locks_at),status:"ACTIVE",creationTime:e.started_at,lockTime:e.locks_at}}static fromProgressEvent(e){return{id:e.id,broadcasterId:e.broadcaster_user_id,broadcasterName:e.broadcaster_user_name,broadcasterLogin:e.broadcaster_user_login,title:e.title,outcomes:this.mapOutcomes(e.outcomes),duration:this.getIsoTimeDifferenceSeconds(e.started_at,e.locks_at),status:"ACTIVE",creationTime:e.started_at,lockTime:e.locks_at}}static fromLockEvent(e){return{id:e.id,broadcasterId:e.broadcaster_user_id,broadcasterName:e.broadcaster_user_name,broadcasterLogin:e.broadcaster_user_login,title:e.title,outcomes:this.mapOutcomes(e.outcomes),duration:this.getIsoTimeDifferenceSeconds(e.started_at,e.locked_at),status:"LOCKED",creationTime:e.started_at,lockTime:e.locked_at}}static applyEndEvent(e,t){var n;return{id:e.id,broadcasterId:e.broadcaster_user_id,broadcasterName:e.broadcaster_user_name,broadcasterLogin:e.broadcaster_user_login,title:e.title,winningOutcome:e.winning_outcome_id,outcomes:this.mapOutcomes(e.outcomes),duration:t.duration,status:e.status.toUpperCase(),creationTime:e.started_at,lockTime:t.lockTime,endTime:null!==(n=e.ended_at)&&void 0!==n?n:void 0}}static mapOutcomes(e){return e.map((e=>({id:e.id,title:e.title,users:e.users,pointsUsed:e.channel_points,topPredictors:null==e.top_predictors?[]:e.top_predictors.map((e=>{var t;return{id:e.user_id,login:e.user_login,username:e.user_name,pointsUsed:e.channel_points_used,pointsWon:null!==(t=e.channel_points_won)&&void 0!==t?t:0}})),color:e.color.toUpperCase()})))}static getIsoTimeDifferenceSeconds(e,t){const n=a.DateTime.fromISO(e),o=a.DateTime.fromISO(t);return Math.round(o.diff(n).as("seconds"))}}},1910:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(2085),l=i(n(739)),u=r(n(8604)),c=i(n(9699)),d=u.get(),m=d.Replicant("lastFmNowPlaying"),f=d.Replicant("manualNowPlaying"),p=d.Replicant("nowPlayingSource"),h=d.Replicant("nowPlaying");!function(){const e=new s.LastFmNode({api_key:d.bundleConfig.lastfm.apiKey,secret:d.bundleConfig.lastfm.secret});let t;d.Replicant("lastFmSettings").on("change",(n=>{(0,c.default)(d.bundleConfig)||(0,c.default)(d.bundleConfig.lastfm)||(0,c.default)(d.bundleConfig.lastfm.apiKey)||(0,c.default)(d.bundleConfig.lastfm.secret)?d.log.warn(`"lastfm" configuration is missing in cfg/${d.bundleName}.json! Getting music information from last.fm automatically will not function.`):(0,c.default)(n.username)||(t&&t.stop(),t=e.stream(n.username),t.on("nowPlaying",(e=>{m.value={artist:e.artist["#text"],song:e.name,album:e.album["#text"],cover:e.image[2]["#text"],artistSong:`${e.artist["#text"]} - ${e.name}`}})),t.on("error",(e=>{6===e.error&&(d.log.info(`Last.fm couldn't find user "${n.username}" - error message: "${e.message}"`),t.stop())})),t.start())}))}(),function(){const e={lastfm:m,manual:f};p.on("change",(t=>{switch(t){case"manual":case"lastfm":h.value=(0,l.default)(e[t].value);break;default:throw new Error("Invalid value for nowPlayingSource.")}}));for(const[t,n]of Object.entries(e))n.on("change",(e=>{p.value===t&&(h.value=(0,l.default)(e))}))}()},4029:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=r(n(8604)),u=n(6409),c=s(n(5352)),d=n(1068),m=n(2748),f=s(n(9699)),p=l.get(),h=p.Replicant("radiaSettings"),v=p.Replicant("predictionStore");let g,b,y,_=0;const O=[1e3,2500,5e3,1e4,25e3],w=4001;function D(e){function t(){clearTimeout(b),b=setTimeout((()=>{p.log.warn("Radia socket has not received a heartbeat message in 20000 milliseconds. Closing connection..."),g.terminate()}),21e3)}clearTimeout(y),(0,f.default)(p.bundleConfig.radia.socketUrl)?p.log.warn('Bundle configuration is missing "radia.socketUrl" property! Predictions may not work as expected.'):(g&&g.close(w),g=new c.default(`${p.bundleConfig.radia.socketUrl}/events/guild/${e}`,{headers:{Authorization:p.bundleConfig.radia.authentication}}),g.on("open",(()=>{p.log.info("Radia websocket is open."),v.value.status.socketOpen=!0,clearTimeout(y),_=0,t()})),g.on("ping",(()=>{t()})),g.on("error",(e=>{const t=[];"code"in e&&t.push(`Code: ${e.code}`),e.message&&t.push(`Message: ${e.message}`),p.log.error(`Received error from Radia websocket. ${t.join(", ")}`)})),g.on("close",(t=>{v.value.status.socketOpen=!1,clearTimeout(b),t!==w&&(_<5?(_++,1===_&&p.log.info("Radia websocket has closed."),y=setTimeout((()=>{p.log.info(`Reconnecting to socket... (Attempt ${_})`),D(e)}),O[_-1])):p.log.warn("Too many reconnection attempts. Radia websocket is closed."))})),g.on("message",(e=>{const t=JSON.parse(e.toString());if(t.subscription&&["channel.prediction.begin","channel.prediction.progress","channel.prediction.lock","channel.prediction.end"].includes(t.subscription.type)){if(t.timestamp){if(m.DateTime.fromISO(v.value.modificationTime)>m.DateTime.fromISO(t.timestamp))return;v.value.modificationTime=t.timestamp}switch(t.subscription.type){case"channel.prediction.begin":v.value.currentPrediction=d.PredictionDataMapper.fromBeginEvent(t.event);break;case"channel.prediction.progress":v.value.currentPrediction=d.PredictionDataMapper.fromProgressEvent(t.event);break;case"channel.prediction.lock":v.value.currentPrediction=d.PredictionDataMapper.fromLockEvent(t.event);break;case"channel.prediction.end":v.value.currentPrediction=d.PredictionDataMapper.applyEndEvent(t.event,v.value.currentPrediction)}}})))}function S(e){return i(this,void 0,void 0,(function*(){if((0,f.default)(e)||(0,f.default)(p.bundleConfig.radia.socketUrl))throw v.value.status.predictionsEnabled=!1,v.value.status.predictionStatusReason="Missing Radia configuration. Check your guild ID and socket URL.",v.value.status.socketOpen=!1,new Error("Radia guild ID is not configured!");const t=yield(0,u.hasPredictionSupport)(e);if(v.value.status.predictionsEnabled=t,!t)throw v.value.status.predictionStatusReason="Predictions are not supported by the configured guild.",g&&g.close(w),new Error("Unable to proceed as some Radia configuration is missing.");_=0,D(e),A((yield(0,u.getPredictions)(e))[0])}))}function A(e){v.value.currentPrediction=d.PredictionDataMapper.fromApiResponse(e)}h.on("change",((e,t)=>i(void 0,void 0,void 0,(function*(){if(e.guildID!==(null==t?void 0:t.guildID))try{yield S(e.guildID)}catch(e){p.log.warn(`Unable to get prediction data: ${null==e?void 0:e.toString()}`)}})))),p.listenFor("reconnectToRadiaSocket",((e,t)=>i(void 0,void 0,void 0,(function*(){try{yield S(h.value.guildID),t(null,null)}catch(e){return p.log.warn(`Unable to reconnect to Radia websocket: ${e.toString()}`),t(e,null)}})))),p.listenFor("getPredictions",((e,t)=>i(void 0,void 0,void 0,(function*(){try{const e=yield(0,u.getPredictions)(h.value.guildID);e.length>0?(A(e[0]),t(null,e[0])):t(null,null)}catch(e){t(e)}})))),p.listenFor("postPrediction",((e,t)=>i(void 0,void 0,void 0,(function*(){try{const n=yield(0,u.createPrediction)(h.value.guildID,e);A(n),t(null,n)}catch(e){t(e)}})))),p.listenFor("patchPrediction",((e,t)=>i(void 0,void 0,void 0,(function*(){try{const n=yield(0,u.updatePrediction)(h.value.guildID,e);A(n),t(null,n)}catch(e){t(e)}}))))},6574:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(8604)),l=n(6409),u=s.get(),c=u.Replicant("radiaSettings");function d(e){return i(this,void 0,void 0,(function*(){try{const t=yield(0,l.getGuildInfo)(e);c.value.enabled=!0,c.value.connectedChannel=t.twitch_channel}catch(e){c.value.enabled=!1,c.value.connectedChannel=null}}))}c.on("change",((e,t)=>{if(e.guildID!==(null==t?void 0:t.guildID))return d(e.guildID)})),u.listenFor("retryRadiaAvailabilityCheck",((e,t)=>i(void 0,void 0,void 0,(function*(){return yield d(c.value.guildID),t(null,null)}))))},5608:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handleRoundData=void 0;const a=n(4615),o=n(6123),r=n(4719),i=n(6517),s=n(8275);function l(e,t){const n=Object.values(r.perGameData[t].stages[s.Locale.EN]),a=n.map(i.toLower);return e=e.toLowerCase(),a.includes(e)?n[a.indexOf(e)]:"Unknown Stage"}function u(e,t){const n=Object.values(r.perGameData[t].modes[s.Locale.EN]),a=n.map(i.toLower);return e=e.toLowerCase(),a.includes(e)?n[a.indexOf(e)]:"Unknown Mode"}t.handleRoundData=function(e,t){const n={};for(let r=0;r<e.length;r++){const i=e[r],s=[],c=null==i.games?i.maps:i.games;if(c){for(let e=0;e<c.length;e++){const n=c[e],a=null==n.stage?n.map:n.stage;s.push({stage:l(a,t),mode:u(n.mode,t)})}n[(0,a.generateId)()]={meta:{name:i.name,isCompleted:!1,type:Object.values(o.PlayType).includes(i.type)?i.type:o.PlayType.BEST_OF},games:s}}}return n}},406:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateRounds=void 0;const l=s(n(2167)),u=r(n(8604)),c=n(5608),d=n(3717),m=u.get(),f=m.Replicant("roundStore"),p=m.Replicant("runtimeConfig");function h(e){f.value=e,(0,d.setNextRoundGames)(Object.keys(e)[0])}m.listenFor("getRounds",((e,t)=>i(void 0,void 0,void 0,(function*(){if(e.url)try{const n=yield function(e){return i(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{l.default.get(e,{responseType:"json"}).then((n=>{const a=(0,c.handleRoundData)(n.data,p.value.gameVersion);t({rounds:a,url:e})})).catch((e=>{n(e)}))}))}))}(e.url);h(n.rounds),t(null,n.url)}catch(e){t(e)}else t(new Error("Missing arguments."))})))),t.updateRounds=h},4137:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateRadiaTournamentData=t.parseUploadedTeamData=t.updateTournamentDataReplicants=t.teamExists=void 0;const l=n(5851),u=n(3717),c=r(n(8604)),d=n(4615),m=n(4134),f=s(n(9699)),p=n(6409),h=n(8157),v=n(5014),g=n(4417),b=n(117),y=c.get(),_=y.Replicant("tournamentData"),O=y.Replicant("highlightedMatches"),w=y.Replicant("radiaSettings"),D=y.Replicant("activeRound"),S=y.Replicant("nextRound");function A(e){return P(e).map((e=>(null==e.id&&(e.id=(0,d.generateId)()),null==e.showLogo&&(e.showLogo=!0),e)))}function P(e){return e.map((e=>{var t;return Object.assign(Object.assign({},e),{name:(0,h.addDots)(e.name,512),players:null===(t=e.players)||void 0===t?void 0:t.map((e=>Object.assign(Object.assign({},e),{name:(0,h.addDots)(e.name,512)})))})}))}function C(e,t){return i(this,void 0,void 0,(function*(){if(w.value.updateOnImport&&!(0,f.default)(w.value.guildID)&&!(0,f.default)(e)&&!(0,f.default)(t))try{yield(0,p.updateTournamentData)(w.value.guildID,e,t)}catch(e){y.log.warn(`Radia tournament data update failed: ${e}`)}}))}t.teamExists=function(e){return _.value.teams.some((t=>t.id===e))},t.updateTournamentDataReplicants=function(e){var t,n,a,o,r;if(e.teams.length<=0)throw new Error("Tournament has no teams.");e.teams.sort(((e,t)=>{const n=e.name.toUpperCase(),a=t.name.toUpperCase();return n<a?-1:n>a?1:0})),e.teams=P(e.teams),_.value=e,O.value=[],(0,b.clearMatchesWithUnknownTeams)(e),C(null===(t=e.meta)||void 0===t?void 0:t.url,null===(n=e.meta)||void 0===n?void 0:n.name);const i=e.teams[0],s=null!==(a=e.teams[1])&&void 0!==a?a:e.teams[0],c=t=>e.teams.some((e=>e.id===t));c(D.value.teamA.id)&&c(D.value.teamB.id)||(0,l.setActiveRoundTeams)(D.value,i.id,s.id),c(S.value.teamA.id)&&c(S.value.teamB.id)||(e.teams.length<5?(0,u.setNextRoundTeams)(null!==(r=null===(o=e.teams[e.teams.length-2])||void 0===o?void 0:o.id)&&void 0!==r?r:i.id,e.teams[e.teams.length-1].id):(0,u.setNextRoundTeams)(e.teams[2].id,e.teams[3].id))},t.parseUploadedTeamData=function(e,t){return i(this,void 0,void 0,(function*(){if(Array.isArray(e)){if((0,f.default)(e))throw new Error("Provided data is missing teams.");return{meta:{id:t,source:m.TournamentDataSource.UPLOAD,shortName:"Unknown Tournament"},teams:A(e)}}if(e instanceof Object){if((0,f.default)(e.teams))throw new Error("Provided data is missing teams.");(0,f.default)(e.meta.id)&&(e.meta.id=t),(0,f.default)(e.meta.source)&&(e.meta.source=m.TournamentDataSource.UPLOAD);const n=Object.assign(Object.assign({},e),{teams:A(e.teams)});if(e.meta.source===m.TournamentDataSource.BATTLEFY&&(null==e.stages||(0,f.default)(e.meta.name)||(0,f.default)(e.meta.url)))try{const t=yield(0,v.getBattlefyTournamentInfo)(e.meta.id);null==e.stages&&(n.stages=(0,g.mapBattlefyStagesToTournamentData)(t.stages)),(0,f.default)(e.meta.name)&&(n.meta.name=t.name),(0,f.default)(e.meta.url)&&(e.meta.url=(0,v.getBattlefyTournamentUrl)(t))}catch(t){y.log.warn(`Could not fetch Battlefy data for tournament ${e.meta.id}`,t)}return(0,h.isBlank)(e.meta.shortName)&&(e.meta.shortName=(0,h.isBlank)(e.meta.name)?"Unknown Tournament":e.meta.name),n}throw new Error("Invalid data provided to parseUploadedTeamData()")}))},t.updateRadiaTournamentData=C},52:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=s(n(2167)),u=r(n(8604)),c=n(4134),d=n(5014),m=n(6337),f=n(4137),p=u.get();function h(e){var t,n;return i(this,void 0,void 0,(function*(){const a=yield(0,m.getSmashGGData)(e,null===(n=null===(t=p.bundleConfig)||void 0===t?void 0:t.smashgg)||void 0===n?void 0:n.apiKey);(0,f.updateTournamentDataReplicants)(a)}))}p.bundleConfig&&void 0!==p.bundleConfig.smashgg||p.log.warn(`"smashgg" is not defined in cfg/${p.bundleName}.json! Importing tournament data from smash.gg will not be possible.`),p.listenFor("getTournamentData",((e,t)=>i(void 0,void 0,void 0,(function*(){var n,a,o,r;if(e.id&&e.method)try{switch(e.method){case c.TournamentDataSource.BATTLEFY:{const n=yield(0,d.getBattlefyTournamentData)(e.id);(0,f.updateTournamentDataReplicants)(n),t(null,{id:n.meta.id});break}case c.TournamentDataSource.SMASHGG:{if(!(null===(a=null===(n=p.bundleConfig)||void 0===n?void 0:n.smashgg)||void 0===a?void 0:a.apiKey)){t(new Error("No smash.gg API key is configured."));break}const i=yield(0,m.getSmashGGEvents)(e.id,null===(r=null===(o=p.bundleConfig)||void 0===o?void 0:o.smashgg)||void 0===r?void 0:r.apiKey);return 1===i.length?(yield h(i[0].id),t(null,{id:e.id})):t(null,{id:e.id,events:i})}case c.TournamentDataSource.UPLOAD:{const n=yield function(e){return i(this,void 0,void 0,(function*(){const t=yield l.default.get(e);if(200===t.status)return(0,f.parseUploadedTeamData)(t.data,e);throw new Error(`Got response code ${t.status} from URL ${e}`)}))}(e.id);(0,f.updateTournamentDataReplicants)(n),t(null,{id:n.meta.id});break}default:return t(new Error("Invalid method given."))}}catch(e){t(e)}else t(new Error("Missing arguments."),null)})))),p.listenFor("getSmashggEvent",((e,t)=>i(void 0,void 0,void 0,(function*(){try{return yield h(e.eventId),t(null,e.eventId)}catch(e){return t(e)}}))))},2662:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(8604)),l=n(4134),u=n(5014),c=n(6337),d=n(4137),m=s.get(),f=m.Replicant("tournamentData");m.listenFor("refreshTournamentData",((e,t)=>i(void 0,void 0,void 0,(function*(){var e,n,a,o;try{const r=f.value.meta.source;switch(r){case l.TournamentDataSource.BATTLEFY:return(0,d.updateTournamentDataReplicants)(yield(0,u.getBattlefyTournamentData)(f.value.meta.id)),t(null);case l.TournamentDataSource.SMASHGG:return(null===(n=null===(e=m.bundleConfig)||void 0===e?void 0:e.smashgg)||void 0===n?void 0:n.apiKey)?((0,d.updateTournamentDataReplicants)(yield(0,c.getSmashGGData)(f.value.meta.sourceSpecificData.smashgg.eventData.id,null===(o=null===(a=m.bundleConfig)||void 0===a?void 0:a.smashgg)||void 0===o?void 0:o.apiKey)),t(null)):t(new Error("No smash.gg API key is configured."));default:return t(new Error(`Cannot refresh data from source '${r}'`))}}catch(e){t(e)}}))))},5480:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const s=r(n(8604)),l=i(n(9699)),u=n(6908),c=n(4);e.exports=e=>{s.set(e),n(1910),n(52),n(2662),n(406),n(3842),n(4278),n(7295),n(1018),n(22),n(3582),n(3261),n(117),n(2584),n(9433),n(4643),n(7348);const{AutomationActionService:t}=n(9811),{AutomationActionController:a}=n(761),{ReplicantFixerService:o}=n(2330),r=new u.ObsConnectorService(e);new c.ObsConnectorController(e,r);const i=new t(e,r);i.resetGameAutomationData(),new a(e,i),new o(e).fix();const d=e.Replicant("radiaSettings"),m=e.Replicant("predictionStore");m.value.status.socketOpen=!1,d.value.enabled=!1;const{initLocaleInfoIfNeeded:f}=n(4204);f(e.Replicant("runtimeConfig").value),(0,l.default)(e.bundleConfig)||(0,l.default)(e.bundleConfig.radia)?(e.log.warn(`"radia" is not defined in cfg/${e.bundleName}.json! The ability to import data via the Radia Production API will not be possible.`),m.value.status.predictionsEnabled=!1,m.value.status.predictionStatusReason="Missing bundle configuration."):(n(6574),n(2096),n(4029))}},7295:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.switchToPreviousColor=t.switchToNextColor=void 0;const s=r(n(8604)),l=n(9383),u=i(n(739)),c=n(117),d=n(5851),m=i(n(5359)),f=n(4615),p=n(8157),h=i(n(9591)),v=n(702),g=s.get(),b=g.Replicant("activeRound"),y=g.Replicant("nextRound");function _(){if(b.value.activeColor.isCustom)return;const e=(0,v.getNextColor)();(0,v.setActiveColor)({color:e,categoryName:e.categoryName})}function O(){if(b.value.activeColor.isCustom)return;const e=(0,v.getPreviousColor)();(0,v.setActiveColor)({color:e,categoryName:e.categoryName})}g.Replicant("swapColorsInternally").on("change",((e,t)=>{if(void 0!==t){const e=b.value.teamA.color;b.value.teamA.color=b.value.teamB.color,b.value.teamB.color=e}})),g.listenFor("removeWinner",((e,t)=>{try{const e=(0,m.default)(b.value.games,(e=>e.winner!==l.GameWinner.NO_WINNER));if(e<0)return;(0,d.setWinner)(e,l.GameWinner.NO_WINNER)}catch(e){t(e)}})),g.listenFor("setWinner",((e,t)=>{const n=b.value.teamA.score+b.value.teamB.score,a=null!=e.roundIndex?e.roundIndex:n;try{(0,d.setWinner)(a,e.winner)}catch(e){t(e)}})),g.listenFor("setActiveRound",((e,t)=>{try{const t=(0,h.default)(b.value);(0,d.setActiveRoundTeams)(t,e.teamAId,e.teamBId),e.matchId&&(0,d.setActiveRoundGames)(t,e.matchId),(0,p.isBlank)(e.matchName)||b.value.match.name===e.matchName||(b.value.match.name=e.matchName,t.match.name=e.matchName),b.value=t}catch(e){return t(e)}(0,c.commitActiveRoundToMatchStore)()})),g.listenFor("resetActiveRound",(()=>{b.value.teamA.score=0,b.value.teamB.score=0,b.value.games=b.value.games.map((e=>Object.assign(Object.assign({},e),{winner:l.GameWinner.NO_WINNER,color:void 0}))),(0,c.commitActiveRoundToMatchStore)()})),g.listenFor("updateActiveGames",(e=>{b.value.games=(0,u.default)(e.games),(0,c.commitActiveRoundToMatchStore)()})),g.listenFor("beginNextMatch",((e,t)=>{if((0,p.isBlank)(null==e?void 0:e.matchName))return t(new Error("Match name must not be blank"));b.value=Object.assign(Object.assign({},b.value),{teamA:Object.assign(Object.assign({color:b.value.teamA.color},(0,u.default)(y.value.teamA)),{score:0}),teamB:Object.assign(Object.assign({color:b.value.teamB.color},(0,u.default)(y.value.teamB)),{score:0}),games:y.value.games.map((e=>Object.assign(Object.assign({},e),{winner:l.GameWinner.NO_WINNER,color:void 0}))),match:{id:(0,f.generateId)(),name:e.matchName,isCompleted:!1,type:y.value.round.type}}),(0,c.commitActiveRoundToMatchStore)(),y.value.showOnStream=!1})),g.listenFor("setActiveColor",(e=>{(0,v.setActiveColor)(e)})),t.switchToNextColor=_,t.switchToPreviousColor=O,g.listenFor("switchToNextColor",(()=>{_()})),g.listenFor("switchToPreviousColor",(()=>{O()})),g.listenFor("getNextAndPreviousColors",((e,t)=>{t(null,{nextColor:(0,v.getNextColor)(),previousColor:(0,v.getPreviousColor)()})})),g.listenFor("swapRoundColor",(e=>{var t;const n=null===(t=b.value.games[e.roundIndex])||void 0===t?void 0:t.color;n&&n.colorsSwapped!==e.colorsSwapped&&(b.value.games[e.roundIndex].color=Object.assign(Object.assign({},n),{clrA:n.clrB,clrB:n.clrA,colorsSwapped:!n.colorsSwapped}))}))},3582:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(8604)),s=n(4615),l=i.get(),u=l.Replicant("casters");l.listenFor("removeCaster",((e,t)=>{if(!u.value[e.id])return t(new Error(`Caster '${e.id}' not found.`));delete u.value[e.id]})),l.listenFor("saveCaster",((e,t)=>{const n=(0,s.generateId)();u.value[n]=e,t(null,n)})),l.listenFor("setCasterOrder",((e,t)=>Array.isArray(e.casterIds)?e.casterIds.every((e=>!!u.value[e]))&&e.casterIds.length===Object.keys(u.value).length?(u.value=e.casterIds.reduce(((e,t)=>(e[t]=u.value[t],e)),{}),void t(null)):t(new Error("Could not re-order casters as caster ID list has unknown or missing IDs")):t(new Error('"casterIds" must be provided as a list of strings.'))))},4204:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.updateLocaleInfo=t.initLocaleInfoIfNeeded=void 0;const i=r(n(8604)),s=n(4719),l=i.get().Replicant("localeInfo");function u(e,t){const n=s.perGameData[t];l.value={stages:n.stages[e],modes:n.modes[e]}}t.initLocaleInfoIfNeeded=function(e){Object.keys(l.value.modes).length<=0&&Object.keys(l.value.stages).length<=0&&u(e.locale,e.gameVersion)},t.updateLocaleInfo=u},3261:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(8604)),s=n(2748),l=i.get(),u=l.Router(),c=l.Replicant("matchStore");u.get("/match-data",((e,t)=>{t.set({"Content-Disposition":`attachment; filename="iploc-match-data_${s.DateTime.now().setZone("utc").toFormat("yyyy-LL-dd'T'T")}.json"`}),t.send(JSON.stringify(Object.values(c.value),null,4))})),l.mount(`/${l.bundleName}`,u)},117:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.commitActiveRoundToMatchStore=t.clearMatchesWithUnknownTeams=void 0;const s=r(n(8604)),l=i(n(739)),u=n(2748),c=i(n(9591)),d=i(n(9699)),m=n(2099),f=s.get(),p=f.Replicant("matchStore"),h=f.Replicant("activeRound");t.clearMatchesWithUnknownTeams=function(e){const t=e.teams.map((e=>e.id)),n=(0,c.default)(p.value);Object.entries(n).forEach((([e,a])=>{(0,d.default)(a.teamA)&&(0,d.default)(a.teamB)||t.includes(a.teamA.id)&&t.includes(a.teamB.id)||delete n[e]})),Object.keys(n).length<=0?(0,m.resetMatchStore)():(p.value=n,n[h.value.match.id]||(0,m.setActiveRoundToFirstMatch)())},t.commitActiveRoundToMatchStore=function(){const e=(0,l.default)(h.value),t=e.match.isCompleted?u.DateTime.utc().toISO():void 0;p.value[e.match.id]={meta:{name:e.match.name,isCompleted:e.match.isCompleted,completionTime:t,type:e.match.type},teamA:e.teamA,teamB:e.teamB,games:e.games.map((e=>({stage:e.stage,mode:e.mode,winner:e.winner,color:e.color})))}}},1018:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(8604)),s=n(3717);i.get().listenFor("setNextRound",((e,t)=>{try{(0,s.setNextRoundTeams)(e.teamAId,e.teamBId),e.roundId&&(0,s.setNextRoundGames)(e.roundId)}catch(e){return t(e)}return t(null)}))},2584:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(8604)),s=n(3717),l=n(4615),u=n(4647),c=i.get(),d=c.Replicant("roundStore"),m=c.Replicant("nextRound");c.listenFor("updateRound",((e,t)=>{if(!e.id)return t(new Error("No round ID given."));if(!d.value[e.id])return t(new Error(`Could not find round '${e.id}'`));const n=d.value[e.id];e.games&&(n.games=e.games),e.roundName&&(n.meta.name=e.roundName),e.type&&(n.meta.type=e.type),m.value.round.id===e.id&&(0,s.setNextRoundGames)(e.id),t(null)})),c.listenFor("insertRound",((e,t)=>{var n;if(e.id&&d.value[e.id])return t(new Error(`Round '${e.id}' already exists.`));const a=null!==(n=e.id)&&void 0!==n?n:(0,l.generateId)();return d.value[a]={games:e.games,meta:{name:e.roundName,isCompleted:!1,type:e.type}},t(null,{id:a,round:{games:e.games,meta:{name:e.roundName,type:e.type}}})})),c.listenFor("removeRound",((e,t)=>{if(Object.keys(d.value).length<=1)return t(new Error("Cannot delete the last round."));if(!d.value[e.roundId])return t(new Error(`Couldn't find round with id '${e.roundId}'.`));delete d.value[e.roundId];try{const t=Object.keys(d.value)[0];m.value.round.id===e.roundId&&(0,s.setNextRoundGames)(t)}catch(e){return t(e)}})),c.listenFor("resetRoundStore",(()=>{(0,u.resetRoundStore)()}))},9433:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(8604)),s=n(4647),l=n(2099),u=n(8209),c=n(4204),d=i.get(),m=d.Replicant("runtimeConfig");d.listenFor("setGameVersion",((e,t)=>{if(m.value.gameVersion===e.version)return t(null);const n=u.dependentBundles.filter((t=>!t.compatibleGameVersions.includes(e.version))).map((e=>e.name));m.value.gameVersion=e.version,(0,s.resetRoundStore)(),(0,l.resetMatchStore)(!0),(0,c.updateLocaleInfo)(m.value.locale,e.version),t(null,{incompatibleBundles:n})})),d.listenFor("setLocale",(e=>{(0,c.updateLocaleInfo)(e,m.value.gameVersion),m.value.locale=e}))},4643:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.setFlavorText=void 0;const i=r(n(8604)).get(),s=i.Replicant("scoreboardData"),l=i.Replicant("activeRound"),u=i.Replicant("tournamentData");function c(e,t){s.value.flavorText=`${e} - ${t}`}l.on("change",((e,t)=>{e.match.name!==(null==t?void 0:t.match.name)&&c(u.value.meta.shortName,e.match.name)})),u.on("change",((e,t)=>{t&&e.meta.shortName!==t.meta.shortName&&c(e.meta.shortName,l.value.match.name)})),t.setFlavorText=c},22:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(5780),s=r(n(8604)).get(),l=s.Replicant("tournamentData"),u=s.Replicant("activeRound"),c=s.Replicant("nextRound");function d(e){const t=(0,i.getTeam)(e.id,l.value);return Object.assign(Object.assign({},e),t)}s.listenFor("toggleTeamImage",((e,t)=>{const n=l.value.teams.filter((t=>t.id===e.teamId))[0];if(null==n)return t(new Error("No team found."));n.showLogo=e.isVisible,u.value.teamA=d(u.value.teamA),u.value.teamB=d(u.value.teamB),c.value.teamA=d(c.value.teamA),c.value.teamB=d(c.value.teamB)}))},9811:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AutomationActionService=void 0;const s=n(8250),l=n(4365),u=n(7295),c=r(n(3837)),d={[s.GameVersion.SPLATOON_2]:{showScoreboard:11500,showCasters:12e3},[s.GameVersion.SPLATOON_3]:{showScoreboard:11500,showCasters:12e3}},m={[s.GameVersion.SPLATOON_2]:{hideScoreboard:3e3,changeScene:7500},[s.GameVersion.SPLATOON_3]:{hideScoreboard:3e3,changeScene:7500}};t.AutomationActionService=class{constructor(e,t){this.nodecg=e,this.obsData=e.Replicant("obsData"),this.scoreboardData=e.Replicant("scoreboardData"),this.runtimeConfig=e.Replicant("runtimeConfig"),this.gameAutomationData=e.Replicant("gameAutomationData"),this.obsConnectorService=t,this.automationTasks=null}getAutomationTasks(e){const t=this.runtimeConfig.value.gameVersion;switch(e){case l.GameAutomationAction.START_GAME:return[{timeout:1e3,name:"changeScene",action:()=>i(this,void 0,void 0,(function*(){(0,u.switchToNextColor)(),yield this.obsConnectorService.setCurrentScene(this.obsData.value.gameplayScene)}))},{timeout:d[t].showScoreboard,name:"showScoreboard",action:()=>{this.scoreboardData.value.isVisible=!0}},{timeout:d[t].showCasters,name:"showCasters",action:()=>{this.nodecg.sendMessage("mainShowCasters")}}];case l.GameAutomationAction.END_GAME:return[{timeout:m[t].hideScoreboard,name:"hideScoreboard",action:()=>{this.scoreboardData.value.isVisible=!1}},{timeout:m[t].changeScene,name:"changeScene",action:()=>i(this,void 0,void 0,(function*(){yield this.obsConnectorService.setCurrentScene(this.obsData.value.intermissionScene)}))}];default:throw new Error(`Unknown GameAutomationTask value '${e}'`)}}startAutomationAction(e){if(this.gameAutomationData.value.actionInProgress!==l.GameAutomationAction.NONE)throw new Error("An action is already in progress.");this.gameAutomationData.value.actionInProgress=e,this.automationTasks=this.getAutomationTasks(e),this.queueNextAutomationTask().catch((e=>{var t;this.nodecg.log.error("Failed to start automation task:",null!==(t=e.message)&&void 0!==t?t:String(e))}))}queueNextAutomationTask(){var e,t;return i(this,void 0,void 0,(function*(){let n=(null!==(t=null===(e=this.gameAutomationData.value.nextTaskForAction)||void 0===e?void 0:e.index)&&void 0!==t?t:-1)+1,a=this.automationTasks[n];for(;0===(null==a?void 0:a.timeout);)yield this.executeAutomationTask(a),n++,a=this.automationTasks[n];a?(this.gameAutomationData.value.nextTaskForAction={index:n,name:a.name,executionTimeMillis:(new Date).getTime()+a.timeout},this.nextAutomationTaskTimeout=setTimeout((()=>i(this,void 0,void 0,(function*(){yield this.completeTimedAutomationTask(a)}))),a.timeout)):this.resetGameAutomationData()}))}completeTimedAutomationTask(e){return i(this,void 0,void 0,(function*(){clearTimeout(this.nextAutomationTaskTimeout),yield this.executeAutomationTask(e),yield this.queueNextAutomationTask()}))}executeAutomationTask(e){return i(this,void 0,void 0,(function*(){try{const t=e.action();c.types.isPromise(t)&&(yield t)}catch(e){this.nodecg.log.error("Encountered an error during automation task",e)}}))}fastForwardToNextAutomationTask(){return i(this,void 0,void 0,(function*(){if(this.gameAutomationData.value.actionInProgress===l.GameAutomationAction.NONE)throw new Error("No action is in progress.");yield this.completeTimedAutomationTask(this.automationTasks[this.gameAutomationData.value.nextTaskForAction.index])}))}cancelAutomationAction(){if(this.gameAutomationData.value.actionInProgress===l.GameAutomationAction.NONE)throw new Error("No action is in progress.");clearTimeout(this.nextAutomationTaskTimeout),this.resetGameAutomationData()}resetGameAutomationData(){this.gameAutomationData.value.actionInProgress=l.GameAutomationAction.NONE,this.gameAutomationData.value.nextTaskForAction=null,this.automationTasks=null}}},6908:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ObsConnectorService=void 0;const r=o(n(3848)),i=n(5279),s=n(8157),l=[4009,4010,4011];t.ObsConnectorService=class{constructor(e){this.nodecg=e,this.obsData=e.Replicant("obsData"),this.obsCredentials=e.Replicant("obsCredentials"),this.socket=new r.default,this.reconnectionCount=0,this.socket.on("ConnectionClosed",(e=>this.handleClosure(e))),this.socket.on("ConnectionOpened",(()=>this.handleOpening())),this.socket.on("SceneListChanged",(e=>this.handleSceneListChange(e))),this.socket.on("CurrentProgramSceneChanged",(e=>this.handleProgramSceneChange(e))),this.obsData.value.enabled&&this.connect().catch((()=>{}))}handleClosure(e){this.obsData.value.status===i.ObsStatus.CONNECTED&&(1e3!==e.code&&this.nodecg.log.error("OBS websocket closed with message:",e.message),this.obsData.value.status=i.ObsStatus.NOT_CONNECTED,this.obsData.value.enabled&&this.startReconnecting(e.code))}handleOpening(){this.nodecg.log.info("OBS websocket is open."),this.obsData.value.status=i.ObsStatus.CONNECTED,this.stopReconnecting()}handleSceneListChange(e){this.updateScenes(e.scenes.map((e=>String(e.sceneName))))}handleProgramSceneChange(e){this.obsData.value.currentScene=e.sceneName}connect(e=!0){var t;return a(this,void 0,void 0,(function*(){yield this.socket.disconnect(),this.obsData.value.status=i.ObsStatus.CONNECTING;try{yield this.socket.connect(this.obsCredentials.value.address,(0,s.isBlank)(this.obsCredentials.value.password)?void 0:this.obsCredentials.value.password)}catch(n){throw this.obsData.value.status=i.ObsStatus.NOT_CONNECTED,e&&this.startReconnecting(n.code),new Error(`Failed to connect to OBS: ${null!==(t=n.message)&&void 0!==t?t:String(n)}`)}yield this.loadSceneList()}))}disconnect(){return a(this,void 0,void 0,(function*(){this.stopReconnecting(),yield this.socket.disconnect()}))}loadSceneList(){return a(this,void 0,void 0,(function*(){const e=yield this.socket.call("GetSceneList");this.obsData.value.currentScene=e.currentProgramSceneName,this.updateScenes(e.scenes.map((e=>String(e.sceneName))))}))}startReconnecting(e){l.includes(e)||(this.stopReconnecting(),this.reconnectionInterval=setInterval((()=>{this.reconnectionCount++,this.nodecg.log.info(`Attempting to reconnect to OBS... (Attempt ${this.reconnectionCount})`),this.connect(!1).catch((()=>{}))}),1e4))}stopReconnecting(){clearInterval(this.reconnectionInterval),this.reconnectionInterval=null,this.reconnectionCount=0}updateScenes(e){if(e.length<=0)return void this.nodecg.log.error("Received scene list with no scenes.");const t={};e.includes(this.obsData.value.gameplayScene)||(t.gameplayScene=e[0]),e.includes(this.obsData.value.intermissionScene)||(t.intermissionScene=e[1===e.length?0:1]),t.scenes=e,this.obsData.value=Object.assign(Object.assign({},this.obsData.value),t),(t.gameplayScene||t.intermissionScene)&&this.nodecg.sendMessage("obsSceneConfigurationChangedAfterUpdate")}setCurrentScene(e){return this.socket.call("SetCurrentProgramScene",{sceneName:e})}}},2330:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ReplicantFixerService=void 0;const a=n(4719);t.ReplicantFixerService=class{constructor(e){this.nodecg=e,this.activeRound=e.Replicant("activeRound"),this.runtimeConfig=e.Replicant("runtimeConfig"),this.swapColorsInternally=e.Replicant("swapColorsInternally")}fix(){const e=a.perGameData[this.runtimeConfig.value.gameVersion].colors;if(null==e.find((e=>e.meta.name===this.activeRound.value.activeColor.categoryName))){this.nodecg.log.info("Resetting active round colors as the currently assigned colors are unknown");const t=e[0].colors[0];this.activeRound.value.activeColor={categoryName:e[0].meta.name,clrNeutral:t.clrNeutral,index:t.index,title:t.title,isCustom:t.isCustom},this.activeRound.value.teamA.color=this.swapColorsInternally.value?t.clrB:t.clrA,this.activeRound.value.teamB.color=this.swapColorsInternally.value?t.clrA:t.clrB}}}},7348:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(4147),l=r(n(8604)),u=i(n(1505)),c=n(8209),d=n(8250),m=l.get(),f=m.Replicant("runtimeConfig");c.dependentBundles.forEach((e=>{u.default.satisfies(s.version,e.compatibleDashboardVersion)||m.log.warn(`Bundle '${e.name}' expects version ${e.compatibleDashboardVersion} of ${m.bundleName}! The installed version is ${s.version}.`);const t=f.value.gameVersion;e.compatibleGameVersions.includes(t)||m.log.warn(`Bundle '${e.name}' is not compatible with ${d.GameVersionHelper.toPrettyString(t)}!`)}))},307:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.cartesian=t.prettyPrintList=t.randomFromArray=void 0;const o=a(n(5526));t.randomFromArray=function(e){return e&&e.length?e[(0,o.default)(0,e.length-1)]:null},t.prettyPrintList=function(e){return e.reduce(((t,n,a)=>(t+=n,a===e.length-2?t+=" and ":a!==e.length-1&&(t+=", "),t)),"")},t.cartesian=function(e,t){return[].concat(...e.map((e=>t.map((t=>[].concat(e,t))))))}},5735:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PlayTypeHelper=void 0;const a=n(6123);t.PlayTypeHelper=class{static toPrettyString(e,t){const n=t?` ${t}`:"";return{[a.PlayType.PLAY_ALL]:`Play all${n}`,[a.PlayType.BEST_OF]:`Best of${n}`}[e]}static fromBattlefySeriesStyle(e){switch(null==e?void 0:e.toLowerCase()){case"gamespermatch":return a.PlayType.PLAY_ALL;case"bestof":return a.PlayType.BEST_OF;default:return}}static fromSmashggSetGamesType(e){switch(e){case 1:return a.PlayType.BEST_OF;case 2:return a.PlayType.PLAY_ALL;default:return}}}},4719:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.perGameData=void 0;const a=n(8250),o=n(3716),r=n(8954);t.perGameData={[a.GameVersion.SPLATOON_2]:o.splatoon2Data,[a.GameVersion.SPLATOON_3]:r.splatoon3Data}},9117:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeGameData=void 0;const o=a(n(9591)),r=n(8275),i={[r.Locale.EN]:{"Unknown Stage":"Unknown Stage",Counterpick:"Counterpick"},[r.Locale.DE]:{"Unknown Stage":"Unbekannte Arena",Counterpick:"Counterpick"}},s={[r.Locale.EN]:{"Unknown Mode":"Unknown Mode"},[r.Locale.DE]:{"Unknown Mode":"Unbekannte Kampfart"}};t.normalizeGameData=function(e){const t=(0,o.default)(e);return t.stages=Object.entries(t.stages).reduce(((e,[t,n])=>(e[t]=Object.assign(Object.assign({},n),i[t]),e)),{}),t.modes=Object.entries(t.modes).reduce(((e,[t,n])=>(e[t]=Object.assign(Object.assign({},n),s[t]),e)),{}),t.colors.push({meta:{name:"Custom Color"},colors:[{index:0,title:"Custom Color",clrA:"#000000",clrB:"#FFFFFF",clrNeutral:"#818181",isCustom:!0}]}),t}},3716:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.splatoon2Data=void 0;const a=n(9117),o=n(8275);t.splatoon2Data=(0,a.normalizeGameData)({stages:{[o.Locale.EN]:{"Ancho-V Games":"Ancho-V Games","Arowana Mall":"Arowana Mall","Blackbelly Skatepark":"Blackbelly Skatepark","Camp Triggerfish":"Camp Triggerfish","Goby Arena":"Goby Arena","Humpback Pump Track":"Humpback Pump Track","Inkblot Art Academy":"Inkblot Art Academy","Kelp Dome":"Kelp Dome",MakoMart:"MakoMart","Manta Maria":"Manta Maria","Moray Towers":"Moray Towers","Musselforge Fitness":"Musselforge Fitness","New Albacore Hotel":"New Albacore Hotel","Piranha Pit":"Piranha Pit","Port Mackerel":"Port Mackerel","Shellendorf Institute":"Shellendorf Institute","Shifty Station":"Shifty Station","Snapper Canal":"Snapper Canal","Starfish Mainstage":"Starfish Mainstage","Sturgeon Shipyard":"Sturgeon Shipyard","The Reef":"The Reef","Wahoo World":"Wahoo World","Walleye Warehouse":"Walleye Warehouse","Skipper Pavilion":"Skipper Pavilion"},[o.Locale.DE]:{"Ancho-V Games":"Anchobit Games HQ","Arowana Mall":"Arowana Center","Blackbelly Skatepark":"Punkasius-Skatepark","Camp Triggerfish":"Camp Schtzenfisch","Goby Arena":"Backfisch-Stadion","Humpback Pump Track":"Buckelwal-Piste","Inkblot Art Academy":"Perlmutt-Akademie","Kelp Dome":"Tmmlerkuppel",MakoMart:"Cetacea-Markt","Manta Maria":"Manta Maria","Moray Towers":"Murnentrme","Musselforge Fitness":"Molluskelbude","New Albacore Hotel":"Hotel Neothun","Piranha Pit":"Steinkhler-Grube","Port Mackerel":"Heilbutt-Hafen","Shellendorf Institute":"Abyssal-Museum","Shifty Station":"Wandelzone","Snapper Canal":"Grtenkanal","Starfish Mainstage":"Seeigel-Rockbhne","Sturgeon Shipyard":"Strwerft","The Reef":"Korallenviertel","Wahoo World":"Flunder-Funpark","Walleye Warehouse":"Kofferfisch-Lager","Skipper Pavilion":"Grundel-Pavillon"}},modes:{[o.Locale.EN]:{"Clam Blitz":"Clam Blitz","Tower Control":"Tower Control",Rainmaker:"Rainmaker","Splat Zones":"Splat Zones","Turf War":"Turf War"},[o.Locale.DE]:{"Clam Blitz":"Muschelchaos","Tower Control":"Turmkommando",Rainmaker:"Operation Goldfisch","Splat Zones":"Herrschaft","Turf War":"Revierkampf"}},colors:[{meta:{name:"Ranked Modes"},colors:[{index:0,title:"Green vs Grape",clrA:"#37FC00",clrB:"#7D28FC",clrNeutral:"#F4067E",isCustom:!1},{index:1,title:"Green vs Magenta",clrA:"#04D976",clrB:"#D600AB",clrNeutral:"#D2E500",isCustom:!1},{index:2,title:"Turquoise vs Orange",clrA:"#10E38F",clrB:"#FB7B08",clrNeutral:"#6912CD",isCustom:!1},{index:3,title:"Mustard vs Purple",clrA:"#FF9E03",clrB:"#B909E0",clrNeutral:"#08C66B",isCustom:!1},{index:4,title:"Dark Blue vs Green",clrA:"#2F27CC",clrB:"#37FC00",clrNeutral:"#EA01B7",isCustom:!1},{index:5,title:"Purple vs Green",clrA:"#B909E0",clrB:"#37FC00",clrNeutral:"#F87604",isCustom:!1},{index:6,title:"Yellow vs Blue",clrA:"#FEF232",clrB:"#2ED2FE",clrNeutral:"#FD5600",isCustom:!1}]},{meta:{name:"Turf War"},colors:[{index:0,title:"Yellow vs Purple",clrA:"#D1E004",clrB:"#960CB2",clrNeutral:"#0EB962",isCustom:!1},{index:1,title:"Pink vs Blue",clrA:"#E61077",clrB:"#361CB8",clrNeutral:"#24C133",isCustom:!1},{index:2,title:"Pink vs Yellow",clrA:"#ED0C6A",clrB:"#D5E802",clrNeutral:"#08C24D",isCustom:!1},{index:3,title:"Purple vs Turquoise",clrA:"#6B10CC",clrB:"#08CC81",clrNeutral:"#EB246D",isCustom:!1},{index:4,title:"Pink vs Light Blue",clrA:"#E30960",clrB:"#02ADCF",clrNeutral:"#DDE713",isCustom:!1},{index:5,title:"Purple vs Orange",clrA:"#5617C2",clrB:"#FF5F03",clrNeutral:"#ACE81E",isCustom:!1},{index:6,title:"Pink vs Green",clrA:"#E60572",clrB:"#1BBF0F",clrNeutral:"#CCE50C",isCustom:!1},{index:7,title:"Yellow vs Blue",clrA:"#F1CE33",clrB:"#4B12BE",clrNeutral:"#E62E96",isCustom:!1}]},{meta:{name:"Color Lock"},colors:[{index:0,title:"Yellow vs Blue (Color Lock)",clrA:"#FEF232",clrB:"#2F27CC",clrNeutral:"#DC1589",isCustom:!1}]}]})},8954:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.splatoon3Data=void 0;const a=n(9117),o=n(8275);t.splatoon3Data=(0,a.normalizeGameData)({stages:{[o.Locale.EN]:{"Museum d'Alfonsino":"Museum d'Alfonsino","Scorch Gorge":"Scorch Gorge","Eeltail Alley":"Eeltail Alley","Hagglefish Market":"Hagglefish Market","Undertow Spillway":"Undertow Spillway","Mincemeat Metalworks":"Mincemeat Metalworks","Hammerhead Bridge":"Hammerhead Bridge","Mahi-Mahi Resort":"Mahi-Mahi Resort","Inkblot Art Academy":"Inkblot Art Academy","Sturgeon Shipyard":"Sturgeon Shipyard",MakoMart:"MakoMart","Wahoo World":"Wahoo World","Brinewater Springs":"Brinewater Springs","Flounder Heights":"Flounder Heights","Um'ami Ruins":"Um'ami Ruins","Manta Maria":"Manta Maria"},[o.Locale.DE]:{"Museum d'Alfonsino":"Pinakoithek","Scorch Gorge":"Sengkluft","Eeltail Alley":"Streifenaal-Strae","Hagglefish Market":"Schnapperchen-Basar","Undertow Spillway":"Schwertmuschel-Reservoir","Mincemeat Metalworks":"Aalstahl-Metallwerk","Hammerhead Bridge":"Makrelenbrcke","Mahi-Mahi Resort":"Mahi-Mahi-Resort","Inkblot Art Academy":"Perlmutt-Akademie","Sturgeon Shipyard":"Strwerft",MakoMart:"Cetacea-Markt","Wahoo World":"Flunder-Funpark","Brinewater Springs":"Kusaya-Quellen","Flounder Heights":"Schollensiedlung","Um'ami Ruins":"Um'ami-Ruinen","Manta Maria":"Manta Maria"}},modes:{[o.Locale.EN]:{"Clam Blitz":"Clam Blitz","Tower Control":"Tower Control",Rainmaker:"Rainmaker","Splat Zones":"Splat Zones","Turf War":"Turf War"},[o.Locale.DE]:{"Clam Blitz":"Muschelchaos","Tower Control":"Turmkommando",Rainmaker:"Operation Goldfisch","Splat Zones":"Herrschaft","Turf War":"Revierkampf"}},colors:[{meta:{name:"Ranked Modes"},colors:[{index:0,title:"Turquoise vs Orange",clrA:"#2ADBC6",clrB:"#FA5A41",clrNeutral:"#4445FF",isCustom:!1},{index:1,title:"Pink vs Green",clrA:"#F753A1",clrB:"#35CC2D",clrNeutral:"#4A36FF",isCustom:!1},{index:2,title:"Gold vs Purple",clrA:"#EBCC31",clrB:"#A032DB",clrNeutral:"#73DE35",isCustom:!1},{index:3,title:"Yellow vs Dark Blue",clrA:"#EDD921",clrB:"#461EE6",clrNeutral:"#4445FF",isCustom:!1},{index:4,title:"Green vs Pink",clrA:"#B3DE45",clrB:"#D43BCA",clrNeutral:"#FFC042",isCustom:!1},{index:5,title:"Orange vs Dark Blue",clrA:"#FC7735",clrB:"#4048DB",clrNeutral:"#F8F755",isCustom:!1},{index:6,title:"Orange vs Purple",clrA:"#F56522",clrB:"#821CD6",clrNeutral:"#CDFF45",isCustom:!1},{index:7,title:"Turquoise vs Pink",clrA:"#2ADBC3",clrB:"#E34984",clrNeutral:"#7577FF",isCustom:!1},{index:8,title:"Yellow vs Purple",clrA:"#EEFC58",clrB:"#7635F0",clrNeutral:"#54FDE8",isCustom:!1},{index:9,title:"Dark Blue vs Orange",clrA:"#2C2CDB",clrB:"#F29C33",clrNeutral:"#FF67EE",isCustom:!1}]}]})},4615:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateId=void 0,t.generateId=function(){return String(Math.random().toString(36).substr(2,9))}},8157:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isBlank=t.addDots=void 0,t.addDots=function(e,t=48){return e&&e.length>t?e.substring(0,t-"...".length)+"...":e},t.isBlank=function(e){return null==e||""===e.trim()}},4365:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.GameAutomationAction=void 0,(n=t.GameAutomationAction||(t.GameAutomationAction={})).END_GAME="END_GAME",n.START_GAME="START_GAME",n.NONE="NONE"},8275:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LocaleHelper=t.Locale=void 0,function(e){e.EN="EN",e.DE="DE"}(n=t.Locale||(t.Locale={})),t.LocaleHelper=class{static toPrettyString(e){return{[n.EN]:"English",[n.DE]:"Deutsch"}[e]}}},5279:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ObsStatusHelper=t.ObsStatus=void 0,function(e){e.CONNECTED="CONNECTED",e.CONNECTING="CONNECTING",e.NOT_CONNECTED="NOT_CONNECTED"}(n=t.ObsStatus||(t.ObsStatus={})),t.ObsStatusHelper=class{static toPrettyString(e){return{[n.CONNECTING]:"Connecting",[n.CONNECTED]:"Connected",[n.NOT_CONNECTED]:"Not connected"}[e]}}},2276:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BracketTypeHelper=t.BracketType=void 0,function(e){e.SWISS="SWISS",e.DOUBLE_ELIMINATION="DOUBLE_ELIMINATION",e.SINGLE_ELIMINATION="SINGLE_ELIMINATION",e.ROUND_ROBIN="ROUND_ROBIN",e.LADDER="LADDER"}(n=t.BracketType||(t.BracketType={})),t.BracketTypeHelper=class{static fromBattlefy(e,t){if("elimination"===e){if(null==t)throw new Error('Got bracket type "elimination" from Battlefy without "style" parameter (single or double?)');return{single:n.SINGLE_ELIMINATION,double:n.DOUBLE_ELIMINATION}[t]}return{ladder:n.LADDER,swiss:n.SWISS,roundrobin:n.ROUND_ROBIN}[e]}}},8250:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.GameVersionHelper=t.GameVersion=void 0,function(e){e.SPLATOON_2="SPLATOON_2",e.SPLATOON_3="SPLATOON_3"}(n=t.GameVersion||(t.GameVersion={})),t.GameVersionHelper=class{static toPrettyString(e){return{[n.SPLATOON_2]:"Splatoon 2",[n.SPLATOON_3]:"Splatoon 3"}[e]}}},9383:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.GameWinner=void 0,(n=t.GameWinner||(t.GameWinner={})).NO_WINNER="none",n.ALPHA="alpha",n.BRAVO="bravo"},8394:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ImportStatus=void 0,(n=t.ImportStatus||(t.ImportStatus={})).SUCCESS="SUCCESS",n.LOADING="LOADING",n.FAILURE="FAILURE",n.NO_DATA="NO_DATA",n.NO_STATUS="NO_STATUS"},6123:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PlayType=void 0,(n=t.PlayType||(t.PlayType={})).PLAY_ALL="PLAY_ALL",n.BEST_OF="BEST_OF"},4134:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TournamentDataSourceHelper=t.TournamentDataSource=void 0,function(e){e.BATTLEFY="BATTLEFY",e.SMASHGG="SMASHGG",e.UPLOAD="UPLOAD",e.UNKNOWN="UNKNOWN"}(n=t.TournamentDataSource||(t.TournamentDataSource={})),t.TournamentDataSourceHelper=class{static toPrettyString(e){return{[n.BATTLEFY]:"Battlefy",[n.SMASHGG]:"Smash.gg",[n.UPLOAD]:"Uploaded file",[n.UNKNOWN]:"Unknown"}[e]}}},2167:e=>{e.exports=require("axios")},739:e=>{e.exports=require("clone")},6674:e=>{e.exports=require("express-fileupload")},2085:e=>{e.exports=require("lastfm")},6517:e=>{e.exports=require("lodash")},9591:e=>{e.exports=require("lodash/cloneDeep")},5359:e=>{e.exports=require("lodash/findLastIndex")},9699:e=>{e.exports=require("lodash/isEmpty")},3901:e=>{e.exports=require("lodash/omit")},5526:e=>{e.exports=require("lodash/random")},2748:e=>{e.exports=require("luxon")},3848:e=>{e.exports=require("obs-websocket-js")},1505:e=>{e.exports=require("semver/preload")},5352:e=>{e.exports=require("ws")},7147:e=>{e.exports=require("fs")},3837:e=>{e.exports=require("util")},4147:e=>{e.exports=JSON.parse('{"name":"ipl-overlay-controls","version":"4.1.0","description":"Dashboard elements for Inkling Performance Labs broadcast graphics.","homepage":"https://github.com/inkfarer/ipl-overlay-controls","author":{"name":"inkfarer","email":"inkfarer@inkfarer.com","url":"https://inkfarer.com"},"files":["dashboard","src/extension"],"keywords":["","nodecg-bundle"],"scripts":{"build":"cross-env NODE_ENV=production webpack","clean":"trash node_modules/.cache && trash dashboard && trash extension","cleanbuild":"npm run clean && npm run build","start":"node ../..","watch":"webpack -w","schema-types":"nodecg schema-types","lint":"eslint --ext .js,.vue,.ts ./src","fix":"eslint ./src --fix","devbuild":"webpack","test":"jest","test:update":"jest -u","test:ci":"jest --json --outputFile=result.json --testLocationInResults"},"nodecg":{"compatibleRange":"^1.7.0","dashboardPanels":[{"name":"music","title":"Music","width":2,"file":"music.html","workspace":"ipl","headerColor":"#262F40"},{"name":"breakscreen","title":"Break Screen","width":2,"file":"breakScreen.html","workspace":"ipl","headerColor":"#262F40"},{"name":"matchmanager","title":"Match Manager","width":4,"file":"matchManager.html","workspace":"ipl","headerColor":"#262F40"},{"name":"casters","title":"Casters","width":2,"file":"casters.html","workspace":"ipl","headerColor":"#262F40"},{"name":"nextMatch","title":"Next Match","width":2,"file":"nextMatch.html","workspace":"ipl","headerColor":"#262F40"},{"name":"predictions","title":"Predictions","width":2,"file":"predictions.html","workspace":"ipl","headerColor":"#262F40"},{"name":"dataIO","title":"Data import/export","width":4,"file":"dataIO.html","workspace":"ipl setup","headerColor":"#262F40"},{"name":"rounds","title":"Rounds","width":2,"file":"rounds.html","workspace":"ipl setup","headerColor":"#262F40"},{"name":"Settings","title":"Settings","width":2,"file":"settings.html","workspace":"ipl setup","headerColor":"#262F40"},{"name":"createPredictionDialog","title":"","width":4,"file":"createPredictionDialog.html","dialog":true},{"name":"resolvePredictionDialog","title":"","width":3,"file":"resolvePredictionDialog.html","dialog":true}]},"repository":"https://github.com/nodecg/nodecg.git","license":"MIT","dependencies":{"@fortawesome/fontawesome-svg-core":"^1.2.35","@fortawesome/free-solid-svg-icons":"^5.15.3","@fortawesome/vue-fontawesome":"^3.0.0-4","@iplsplatoon/vue-components":"2.6.1","@pinia/testing":"^0.0.9","@types/fs-extra":"^9.0.13","axios":"^0.21.1","clone":"^2.1.2","express-fileupload":"^1.2.1","fs-extra":"^10.0.0","lastfm":"git+https://github.com/inkfarer/lastfm-node.git","lodash":"^4.17.21","luxon":"^2.0.1","pinia":"^2.0.11","semver":"^7.3.5","ts-node":"^10.9.1","vue":"^3.2.20","ws":"^7.5.3","obs-websocket-js":"^5.0.1"},"devDependencies":{"@types/clone":"^2.1.0","@types/express-fileupload":"^1.1.6","@types/jest":"^27.0.2","@types/jest-when":"^2.7.3","@types/lodash":"^4.14.171","@types/luxon":"^1.27.1","@types/node":"^15.12.1","@types/semver":"^7.3.7","@types/webpack":"^5.28.0","@types/webpack-livereload-plugin":"^2.3.2","@types/ws":"^7.4.7","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0","@vue/compiler-sfc":"^3.2.20","@vue/test-utils":"^2.0.0-rc.16","@vue/vue3-jest":"^27.0.0-alpha.1","cross-env":"^7.0.3","css-loader":"^5.2.7","eslint":"^7.28.0","eslint-import-resolver-typescript":"^2.4.0","eslint-import-resolver-webpack":"^0.13.1","eslint-plugin-import":"^2.23.4","eslint-plugin-vue":"^7.19.1","fork-ts-checker-webpack-plugin":"^6.3.4","globby":"^11.0.3","html-webpack-plugin":"^5.3.1","jest":"^27.0.6","jest-mock-extended":"^2.0.4","jest-when":"^3.3.1","json-schema-to-typescript":"^10.1.4","sass":"^1.42.1","sass-loader":"^12.1.0","style-loader":"^2.0.0","trash-cli":"^4.0.0","ts-jest":"^27.0.4","ts-loader":"^9.2.6","tsconfig-paths-webpack-plugin":"^3.5.1","typescript":"^4.8.2","vue-eslint-parser":"^7.11.0","vue-loader":"^16.8.1","vuedraggable":"^4.1.0","webpack":"^5.73.0","webpack-cli":"^4.7.0","webpack-livereload-plugin":"^3.0.1","webpack-node-externals":"^3.0.0"},"jest":{"projects":["<rootDir>/src/dashboard/jest.config.ts","<rootDir>/src/extension/jest.config.ts","<rootDir>/src/helpers/jest.config.ts"]}}')}},t={},n=function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,n),r.exports}(5480);module.exports=n})();