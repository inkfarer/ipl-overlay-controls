(()=>{"use strict";var e={37:(e,t)=>{let a;Object.defineProperty(t,"__esModule",{value:!0}),t.set=function(e){a=e},t.get=function(){return a}},212:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeam=function(e,t,a=!0){const n=t.teams.filter((t=>t.id===e))[0];return a?(0,r.default)(n):n};var n,r=(n=a(198))&&n.__esModule?n:{default:n}},83:(e,t,a)=>{var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=o(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(37)),r=a(334);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(o=function(e){return e?a:t})(e)}const i=n.get(),s=i.Replicant("casters"),l=i.Replicant("radiaSettings");function u(e){return e.twitter=`@${e.twitter}`,e.pronouns=e.pronouns.toLowerCase(),e}i.listenFor("getLiveCommentators",(async(e,t)=>{try{const e=await(0,r.getLiveCasters)(l.value.guildID);if(e.length<=0)return t("Got no commentators from API.");const a=e.map(u),n=a.slice(0,3),o=a.slice(3);s.value=n.reduce(((e,t)=>{const a=t.discord_user_id;return delete t.discord_user_id,e[a]=t,e}),{}),t(null,{add:n,extra:o})}catch(e){if(404===e.response.status)return t(null,null);t(e)}}))},704:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBattlefyMatches=async function(e,t,a){const o=`https://api.battlefy.com/tournaments/${e}?extend[stages][$query][deletedAt][$exists]=false&extend[stages][matches]=1&extend[stages][$opts][name]=1&extend[stages][$opts][matches][$elemMatch][isMarkedLive]=true&extend[stages.matches.top.team]=1&extend[stages.matches.bottom.team]=1&extend[stages][$opts][bracket]=1&extend[stages.matches.top.team.persistentTeam]=1&extend[stages.matches.bottom.team.persistentTeam]=1&extend[stages.matches.top.team.players]=1&extend[stages.matches.bottom.team.players]=1`,i=await n.default.get(o),{data:s}=i;if(s.error)throw new Error(`Got error from Battlefy: ${s.error}`);if(!s[0])throw new Error("Couldn't get tournament data from Battlefy.");const u=s[0];return function(e){const t=[],a=e.filter((e=>["swiss","elimination","roundrobin"].includes(e.bracket.type)));for(let e=0;e<a.length;e++){const n=a[e],o=n.matches.filter((e=>!0===e.isMarkedLive));for(let e=0;e<o.length;e++){const a=o[e];if(!a.top.team||!a.bottom.team)continue;const i=l(a.top),s=l(a.bottom);let u=`Round ${a.roundNumber} Match `;a.matchType&&["loser","winner"].includes(a.matchType)?"loser"===a.matchType?u+=`L${a.matchNumber}`:"winner"===a.matchType&&(u+=`C${a.matchNumber}`):u+=a.matchNumber;const c={id:a._id,stageName:n.name,round:a.roundNumber,match:a.matchNumber,name:u};(0,r.default)(a.completedAt)||(c.completionTime=a.completedAt),t.push({meta:c,teamA:i,teamB:s})}}return t}(a?u.stages:u.stages.filter((e=>t.includes(e._id))))},t.getBattlefyTournamentData=async function(e){const t=await async function(e){const t=`https://api.battlefy.com/tournaments/${e}?extend%5Bcampaign%5D%5Bsponsor%5D=true&extend%5Bstages%5D%5B%24query%5D%5BdeletedAt%5D%5B%24exists%5D=false&extend%5Bstages%5D%5B%24opts%5D%5Bname%5D=1&extend%5Bstages%5D%5B%24opts%5D%5Bbracket%5D=1&extend%5Bstages%5D%5B%24opts%5D%5BstartTime%5D=1&extend%5Bstages%5D%5B%24opts%5D%5BendTime%5D=1&extend%5Bstages%5D%5B%24opts%5D%5Bschedule%5D=1&extend%5Bstages%5D%5B%24opts%5D%5BmatchCheckinDuration%5D=1&extend%5Bstages%5D%5B%24opts%5D%5BhasCheckinTimer%5D=1&extend%5Bstages%5D%5B%24opts%5D%5BhasStarted%5D=1&extend%5Bstages%5D%5B%24opts%5D%5BhasMatchCheckin%5D=1&extend%5Borganization%5D%5Bowner%5D%5B%24opts%5D%5Btimezone%5D=1&extend%5Borganization%5D%5B%24opts%5D%5Bname%5D=1&extend%5Borganization%5D%5B%24opts%5D%5Bslug%5D=1&extend%5Borganization%5D%5B%24opts%5D%5BownerID%5D=1&extend%5Borganization%5D%5B%24opts%5D%5BlogoUrl%5D=1&extend%5Borganization%5D%5B%24opts%5D%5BbannerUrl%5D=1&extend%5Borganization%5D%5B%24opts%5D%5Bfeatures%5D=1&extend%5Borganization%5D%5B%24opts%5D%5Bfollowers%5D=1&extend%5Bgame%5D=true&extend%5Bstreams%5D%5B%24query%5D%5BdeletedAt%5D%5B%24exists%5D=false`;return(await n.default.get(t)).data[0]}(e),a="https://dtmwra1jsgyb0.cloudfront.net/tournaments/"+e+"/teams";return new Promise(((r,s)=>{n.default.get(a).then((a=>{const{data:n}=a;if(n.error)return void s(n.error);const l=[];t.stages.forEach((e=>{l.push({name:e.name,id:e._id,type:o.BracketTypeHelper.fromBattlefy(e.bracket.type,e.bracket.style)})}));const u={meta:{id:e,source:i.TournamentDataSource.BATTLEFY,name:t.name,url:`https://battlefy.com/${t.organization.slug}/${t.slug}/${t._id}/info?infoTab=details`},teams:[],stages:l};for(let e=0;e<n.length;e++){const t=n[e],a={id:t._id,name:t.name,logoUrl:t.persistentTeam.logoUrl,showLogo:!0,players:[]};for(let e=0;e<t.players.length;e++){const n=t.players[e],r={name:n.inGameName,username:n.username};a.players.push(r)}u.teams.push(a)}r(u)})).catch((e=>{s(e)}))}))};var n=s(a(376)),r=s(a(718)),o=a(323),i=a(339);function s(e){return e&&e.__esModule?e:{default:e}}function l(e){var t;const a={id:e.team._id,name:e.team.name,logoUrl:null===(t=e.team.persistentTeam)||void 0===t?void 0:t.logoUrl,showLogo:!0,players:[]};for(let t=0;t<e.team.players.length;t++){const n={name:e.team.players[t].inGameName};a.players.push(n)}return a}},334:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hasPredictionSupport=async function(e){if((0,o.default)(u.authentication))return!1;try{const t=await n.default.get(`${u.url}/predictions/check/${e}`,{headers:{Authorization:u.authentication}});return 200===t.status?"boolean"==typeof t.data.twitch&&t.data.twitch:(l.log.error(`Guild Check Auth Error: ${t.data.detail}`),!1)}catch(e){return l.log.error(`Guild Check Auth Error: ${e}`),!1}},t.getPredictions=async function(e){try{return(await n.default.get(`${u.url}/predictions/${e}`,{headers:{Authorization:u.authentication}})).data}catch(e){c(e)}},t.updatePrediction=async function(e,t){try{return(await n.default.patch(`${u.url}/predictions/${e}`,t,{headers:{Authorization:u.authentication}})).data}catch(e){c(e)}},t.createPrediction=async function(e,t){try{return(await n.default.post(`${u.url}/predictions/${e}`,t,{headers:{Authorization:u.authentication}})).data}catch(e){c(e)}},t.handleAxiosError=c,t.getLiveCasters=async function(e){return await n.default.get(`${u.url}/live/guild/${e}`,{headers:{Authorization:u.authentication}}).then((e=>{if(200!==e.status)throw new Error(`Radia API call failed with response ${e.status.toString()}`);return e.data}))},t.updateTournamentData=async function(e,t,a){const r=await n.default.post(`${u.url}/organisation/guild/${e}`,{bracket_link:t,tournament_name:a},{headers:{Authorization:u.authentication}});if(200!==r.status)throw new Error(`Radia API call failed with response ${r.status.toString()}`);return r.data};var n=s(a(376)),r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(37)),o=s(a(718));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}function s(e){return e&&e.__esModule?e:{default:e}}const l=r.get(),u=l.bundleConfig.radia;function c(e){if("response"in e){var t;let a=`Radia API call failed with response ${e.response.status}`;throw null!==(t=e.response.data)&&void 0!==t&&t.detail&&("object"==typeof e.response.data.detail?e.response.data.detail.message?a+=`: ${e.response.data.detail.message}`:a+=`: ${JSON.stringify(e.response.data.detail)}`:a+=`: ${e.response.data.detail}`),new Error(a)}throw e}},221:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSmashGGEvents=async function(e,t){return(await n.default.post("https://api.smash.gg/gql/alpha",JSON.stringify({query:"query Events($slug: String!) {\n      tournament(slug: $slug) {\n        id\n        events {\n          id\n          name\n          videogame {\n            displayName\n          }\n        }\n      }\n    }",variables:{slug:e}}),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${t}`}})).data.data.tournament.events.map((e=>({id:e.id,name:e.name,game:e.videogame.displayName})))},t.getSmashGGData=async function(e,t){const a=await s(1,e,t,!0),n=a.raw.data.event.tournament.slug,o={meta:{id:n.substring(n.indexOf("/")+1),source:r.TournamentDataSource.SMASHGG,name:a.raw.data.event.tournament.name,url:`https://smash.gg/${a.raw.data.event.tournament.slug}/details`,sourceSpecificData:{smashgg:{tournamentId:a.raw.data.event.tournament.id,streams:a.raw.data.event.tournament.streams,eventData:{id:a.raw.data.event.id,name:a.raw.data.event.name,game:a.raw.data.event.videogame.displayName}}}},teams:a.pageInfo};if(a.raw.data.event.entrants.pageInfo.totalPages>1){const n=[];for(let r=2;r<=a.raw.data.event.entrants.pageInfo.totalPages;r++)n.push(s(r,e,t));const r=await Promise.all(n);for(let e=0;e<r.length;e++)o.teams=o.teams.concat(r[e].pageInfo)}return o},t.getSmashGGStreamQueue=async function(e,t,a,r,o){if((!r||r.length<=0)&&!o)return[];const i=await n.default.post("https://api.smash.gg/gql/alpha",JSON.stringify({query:"query EventEntrants($slug: String!) {\n        tournament(slug: $slug) {\n            streamQueue {\n                stream{\n                  id\n                }\n                sets {\n                    id\n                    identifier\n                    round\n                    event {\n                        id\n                    }\n                    phaseGroup {\n                        displayIdentifier\n                        phase {\n                            name\n                        }\n                    }\n                    slots {\n                        seed {\n                            groupSeedNum\n                        }\n                        entrant {\n                            id\n                            name\n                            team {\n                                images {\n                                    url\n                                    type\n                                }\n                            }\n                            participants {\n                                prefix\n                                gamerTag\n                                user {\n                                    genderPronoun\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }",variables:{slug:e}}),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${t}`}}),s=[],{data:u}=i;return u.data.tournament.streamQueue.forEach((e=>{(o||r.includes(e.stream.id))&&e.sets.forEach((e=>{2!==e.slots.length||e.slots.some((e=>null===e.entrant))||e.event.id!==a||s.push({meta:{id:e.id.toString(),stageName:e.phaseGroup.displayIdentifier,round:e.round,match:0,name:`Set ${e.identifier} - Round ${e.round} - Pool ${e.phaseGroup.displayIdentifier} - ${e.phaseGroup.phase.name}`},teamA:l(e.slots[0]),teamB:l(e.slots[1])})}))})),s};var n=i(a(376)),r=a(339),o=i(a(718));function i(e){return e&&e.__esModule?e:{default:e}}async function s(e,t,a,r=!1){const i=await n.default.post("https://api.smash.gg/gql/alpha",JSON.stringify({query:"query EventEntrants($eventId: ID!, $page: Int!, $perPage: Int!) {\n      event(id: $eventId) {\n        id\n        videogame {\n          displayName\n        }\n        tournament {\n          id\n          name\n          slug\n          streams{\n            id\n            streamName\n          }\n        }\n        name\n        entrants(query: {\n          page: $page\n          perPage: $perPage\n        }) {\n          pageInfo {\n            total\n            totalPages\n          }\n          nodes {\n            id\n            name\n            team {\n              images {\n                type\n                url\n              }\n            }\n            participants {\n              id\n              prefix\n              gamerTag\n              user{\n                genderPronoun\n              }\n            }\n          }\n        }\n      }\n    }",variables:{eventId:t,page:e,perPage:"50"}}),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${a}`}}),{data:s}=i,l=[];return s.data.event.entrants.nodes.forEach((e=>{var t,a;l.push({id:e.id.toString(10),name:e.name,showLogo:!0,logoUrl:null===(t=e.team)||void 0===t||null===(a=t.images.find((e=>"profile"===e.type)))||void 0===a?void 0:a.url,players:e.participants.map((e=>{var t,a;return{name:(0,o.default)(e.prefix)?e.gamerTag:`${e.prefix} ${e.gamerTag}`,pronouns:null===(t=e.user)||void 0===t||null===(a=t.genderPronoun)||void 0===a?void 0:a.toLowerCase()}}))})})),r?{pageInfo:l,raw:s}:{pageInfo:l}}function l(e){var t,a,n;return{id:e.entrant.id.toString(),name:e.entrant.name,showLogo:!0,seed:e.seed.groupSeedNum,players:e.entrant.participants.map((e=>{var t,a;return{name:(0,o.default)(e.prefix)?e.gamerTag:`${e.prefix} ${e.gamerTag}`,pronouns:null===(t=e.user)||void 0===t||null===(a=t.genderPronoun)||void 0===a?void 0:a.toLowerCase()}})),logoUrl:null===(t=e.entrant.team)||void 0===t||null===(a=t.images)||void 0===a||null===(n=a.find((e=>"profile"===e.type)))||void 0===n?void 0:n.url}}},425:(e,t,a)=>{var n,r=a(590),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(37)),i=(n=a(118))&&n.__esModule?n:{default:n},s=a(684);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}const u=o.get(),c=u.Router(),d=u.Replicant("roundStore");c.post("/upload-tournament-json",(0,i.default)({limits:{fileSize:52428800}}),((e,t)=>{if(!e.files||!e.files.file||!e.body.jsonType||"application/json"!==e.files.file.mimetype)return t.sendStatus(400);const a=e.files.file,n=JSON.parse(a.data.toString());switch(e.body.jsonType){case"rounds":{const e=(0,r.handleRoundData)(n);d.value={...d.value,...e};break}case"teams":{const e=(0,s.handleRawData)(n,a.name);(0,s.updateTeamDataReplicants)(e);break}default:return t.sendStatus(400)}t.sendStatus(200)})),u.mount("/ipl-overlay-controls",c)},980:(e,t,a)=>{var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(37)),r=a(995),o=a(339),i=a(704),s=a(221);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}const u=n.get(),c=u.Replicant("highlightedMatches"),d=u.Replicant("tournamentData");let p;function m(e){e.sort(((e,t)=>{const a=`${e.meta.stageName} ${e.meta.name}`,n=`${t.meta.stageName} ${t.meta.name}`;return a<n?-1:a>n?1:0})),e.length>0&&(c.value=e)}(u.bundleConfig||void 0!==u.bundleConfig.smashgg)&&(p=u.bundleConfig.smashgg.apiKey),u.listenFor("getHighlightedMatches",(async(e,t)=>{switch(d.value.meta.source){case o.TournamentDataSource.BATTLEFY:if(!e.stages&&!e.getAllMatches)return t(new Error("Missing arguments."));(0,i.getBattlefyMatches)(d.value.meta.id,e.stages,e.getAllMatches).then((e=>e.length>0?(m(e),t(null,{status:r.ImportStatus.SUCCESS,data:e})):t(null,{status:r.ImportStatus.NO_DATA,data:e}))).catch((e=>{t(e)}));break;case o.TournamentDataSource.SMASHGG:if(!p)return t(new Error("No Smash.gg API key found."));if(!e.streamIDs&&!e.getAllMatches)return t(new Error("Missing arguments."));(0,s.getSmashGGStreamQueue)(d.value.meta.id,p,d.value.meta.sourceSpecificData.smashgg.eventData.id,e.streamIDs,e.getAllMatches).then((e=>e.length>0?(m(e),t(null,{status:r.ImportStatus.SUCCESS,data:e})):t(null,{status:r.ImportStatus.NO_DATA,data:e}))).catch((e=>{t(e)}));break;default:t(new Error(`Invalid source '${d.value.meta.source}' given.`))}}))},501:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PredictionDataMapper=void 0;var n=a(223);t.PredictionDataMapper=class{static fromApiResponse(e){return{id:e.id,broadcasterId:e.broadcaster_id,broadcasterName:e.broadcaster_name,broadcasterLogin:e.broadcaster_login,title:e.title,winningOutcome:e.winning_outcome_id??void 0,outcomes:this.mapOutcomes(e.outcomes),duration:e.prediction_window,status:e.status,creationTime:e.created_at,endTime:e.ended_at??void 0,lockTime:e.locked_at??void 0}}static fromBeginEvent(e){return{id:e.id,broadcasterId:e.broadcaster_user_id,broadcasterName:e.broadcaster_user_name,broadcasterLogin:e.broadcaster_user_login,title:e.title,outcomes:e.outcomes.map((e=>({id:e.id,title:e.title,color:e.color.toUpperCase(),users:0,pointsUsed:0,topPredictors:[]}))),duration:this.getIsoTimeDifferenceSeconds(e.started_at,e.locks_at),status:"ACTIVE",creationTime:e.started_at,lockTime:e.locks_at}}static fromProgressEvent(e){return{id:e.id,broadcasterId:e.broadcaster_user_id,broadcasterName:e.broadcaster_user_name,broadcasterLogin:e.broadcaster_user_login,title:e.title,outcomes:this.mapOutcomes(e.outcomes),duration:this.getIsoTimeDifferenceSeconds(e.started_at,e.locks_at),status:"ACTIVE",creationTime:e.started_at,lockTime:e.locks_at}}static fromLockEvent(e){return{id:e.id,broadcasterId:e.broadcaster_user_id,broadcasterName:e.broadcaster_user_name,broadcasterLogin:e.broadcaster_user_login,title:e.title,outcomes:this.mapOutcomes(e.outcomes),duration:this.getIsoTimeDifferenceSeconds(e.started_at,e.locked_at),status:"LOCKED",creationTime:e.started_at,lockTime:e.locked_at}}static applyEndEvent(e,t){return{id:e.id,broadcasterId:e.broadcaster_user_id,broadcasterName:e.broadcaster_user_name,broadcasterLogin:e.broadcaster_user_login,title:e.title,winningOutcome:e.winning_outcome_id,outcomes:this.mapOutcomes(e.outcomes),duration:t.duration,status:e.status.toUpperCase(),creationTime:e.started_at,lockTime:t.lockTime,endTime:e.ended_at??void 0}}static mapOutcomes(e){return e.map((e=>({id:e.id,title:e.title,users:e.users,pointsUsed:e.channel_points,topPredictors:null==e.top_predictors?[]:e.top_predictors.map((e=>({id:e.user_id,login:e.user_login,username:e.user_name,pointsUsed:e.channel_points_used,pointsWon:e.channel_points_won??0}))),color:e.color.toUpperCase()})))}static getIsoTimeDifferenceSeconds(e,t){const a=n.DateTime.fromISO(e),r=n.DateTime.fromISO(t);return Math.round(r.diff(a).as("seconds"))}}},929:(e,t,a)=>{var n=a(172),r=l(a(198)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(37)),i=l(a(718));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(s=function(e){return e?a:t})(e)}function l(e){return e&&e.__esModule?e:{default:e}}const u=o.get(),c=u.Replicant("lastFmNowPlaying"),d=u.Replicant("manualNowPlaying"),p=u.Replicant("nowPlayingSource"),m=u.Replicant("nowPlaying");!function(){const e=new n.LastFmNode({api_key:u.bundleConfig.lastfm.apiKey,secret:u.bundleConfig.lastfm.secret});let t;u.Replicant("lastFmSettings").on("change",(a=>{(0,i.default)(u.bundleConfig)||(0,i.default)(u.bundleConfig.lastfm)||(0,i.default)(u.bundleConfig.lastfm.apiKey)||(0,i.default)(u.bundleConfig.lastfm.secret)?u.log.warn(`"lastfm" configuration is missing in cfg/${u.bundleName}.json! Getting music information from last.fm automatically will not function.`):(0,i.default)(a.username)||(t&&t.stop(),t=e.stream(a.username),t.on("nowPlaying",(e=>{c.value={artist:e.artist["#text"],song:e.name,album:e.album["#text"],cover:e.image[2]["#text"],artistSong:`${e.artist["#text"]} - ${e.name}`}})),t.on("error",(e=>{6===e.error&&(u.log.info(`Last.fm couldn't find user "${a.username}" - error message: "${e.message}"`),t.stop())})),t.start())}))}(),function(){const e={lastfm:c,manual:d};p.on("change",(t=>{switch(t){case"manual":case"lastfm":m.value=(0,r.default)(e[t].value);break;default:throw new Error("Invalid value for nowPlayingSource.")}}));for(const[t,a]of Object.entries(e))a.on("change",(e=>{p.value===t&&(m.value=(0,r.default)(e))}))}()},866:(e,t,a)=>{var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(37)),r=a(334),o=u(a(439)),i=a(501),s=a(223),l=u(a(718));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}const d=n.get(),p=d.bundleConfig.radia,m=d.Replicant("radiaSettings"),f=d.Replicant("predictionStore");let g;function v(e){f.value.currentPrediction=i.PredictionDataMapper.fromApiResponse(e)}m.on("change",(async e=>{if((0,l.default)(e.guildID))return void d.log.warn("Radia guild ID is not configured!");const t=await(0,r.hasPredictionSupport)(e.guildID);if(f.value.enablePrediction=t,t){a=e.guildID,(0,l.default)(p.socketUrl)?d.log.warn('Bundle configuration is missing "radia.socketUrl" property! Predictions may not work as expected.'):(g&&g.readyState!==o.default.CLOSED&&g.close(),g=new o.default(`${p.socketUrl}/events/guild/${a}`,{headers:{Authorization:p.authentication}}),g.on("open",(()=>{f.value.socketOpen=!0})),g.on("error",(e=>{const t=[];"code"in e&&t.push(`Code: ${e.code}`),e.message&&t.push(`Message: ${e.message}`),d.log.error(`Received error from Radia websocket. ${t.join(", ")}`)})),g.on("close",(()=>{f.value.socketOpen=!1})),g.on("message",(e=>{const t=JSON.parse(e.toString());if(t.subscription&&["channel.prediction.begin","channel.prediction.progress","channel.prediction.lock","channel.prediction.end"].includes(t.subscription.type)){if(t.timestamp){if(s.DateTime.fromISO(f.value.modificationTime)>s.DateTime.fromISO(t.timestamp))return;f.value.modificationTime=t.timestamp}switch(t.subscription.type){case"channel.prediction.begin":f.value.currentPrediction=i.PredictionDataMapper.fromBeginEvent(t.event);break;case"channel.prediction.progress":f.value.currentPrediction=i.PredictionDataMapper.fromProgressEvent(t.event);break;case"channel.prediction.lock":f.value.currentPrediction=i.PredictionDataMapper.fromLockEvent(t.event);break;case"channel.prediction.end":f.value.currentPrediction=i.PredictionDataMapper.applyEndEvent(t.event,f.value.currentPrediction)}}})));try{v((await(0,r.getPredictions)(e.guildID))[0])}catch(e){d.log.error(e.toString())}}var a})),d.listenFor("getPredictions",(async(e,t)=>{try{const e=await(0,r.getPredictions)(m.value.guildID);e.length>0?(v(e[0]),t(null,e[0])):t(null,null)}catch(e){t(e)}})),d.listenFor("postPrediction",(async(e,t)=>{try{const a=await(0,r.createPrediction)(m.value.guildID,e);v(a),t(null,a)}catch(e){t(e)}})),d.listenFor("patchPrediction",(async(e,t)=>{try{const a=await(0,r.updatePrediction)(m.value.guildID,e);v(a),t(null,a)}catch(e){t(e)}}))},590:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handleRoundData=function(e){const t={};for(let s=0;s<e.length;s++){const u=e[s],c=[],d=null==u.games?u.maps:u.games;if(d){for(let e=0;e<d.length;e++){const t=d[e],r=null==t.stage?t.map:t.stage;c.push({stage:(a=r,a=a.toLowerCase(),i.includes(a)?o.splatStages[i.indexOf(a)]:"Unknown Stage"),mode:l(t.mode),winner:n.GameWinner.NO_WINNER})}t[(0,r.generateId)()]={meta:{name:u.name,isCompleted:!1},games:c}}}var a;return t};var n=a(553),r=a(367),o=a(279);const i=o.splatStages.map((e=>e.toLowerCase())),s=o.splatModes.map((e=>e.toLowerCase()));function l(e){return e=e.toLowerCase(),s.includes(e)?o.splatModes[s.indexOf(e)]:"Unknown Mode"}},519:(e,t,a)=>{var n,r=(n=a(376))&&n.__esModule?n:{default:n},o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(37)),i=a(590);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(s=function(e){return e?a:t})(e)}const l=o.get(),u=l.Replicant("roundStore");l.listenFor("getRounds",(async(e,t)=>{if(e.url)try{const a=await async function(e){return new Promise(((t,a)=>{r.default.get(e,{responseType:"json"}).then((a=>{const n=(0,i.handleRoundData)(a.data);t({rounds:n,url:e})})).catch((e=>{a(e)}))}))}(e.url);u.value={...u.value,...a.rounds},t(null,a.url)}catch(e){t(e)}else t(new Error("Missing arguments."))}))},684:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamDataReplicants=function(e){if(e.teams.length<=0)throw new Error("Tournament has no teams.");e.teams.sort(((e,t)=>{const a=e.name.toUpperCase(),n=t.name.toUpperCase();return a<n?-1:a>n?1:0})),c.value=e,d.value=[];const t=e.teams[0],a=e.teams[1]||e.teams[0];var o;(0,n.setActiveRoundTeams)(t.id,a.id),e.teams.length<5?(0,r.setNextRoundTeams)((null===(o=e.teams[e.teams.length-2])||void 0===o?void 0:o.id)||t.id,e.teams[e.teams.length-1].id):(0,r.setNextRoundTeams)(e.teams[2].id,e.teams[3].id)},t.handleRawData=function(e,t){for(let t=0;t<e.length;t++){const a=e[t];null==a.id&&(a.id=(0,i.generateId)()),null==a.showLogo&&(a.showLogo=!0)}return{meta:{id:t,source:s.TournamentDataSource.UPLOAD},teams:e}};var n=a(56),r=a(610),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(37)),i=a(367),s=a(339);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}const u=o.get(),c=u.Replicant("tournamentData"),d=u.Replicant("highlightedMatches")},220:(e,t,a)=>{var n=p(a(376)),r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(37)),o=a(339),i=a(704),s=a(221),l=a(684),u=a(334),c=p(a(718));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function p(e){return e&&e.__esModule?e:{default:e}}const m=r.get(),f=m.Replicant("radiaSettings");let g;async function v(e){const t=await(0,s.getSmashGGData)(e,g);(0,l.updateTeamDataReplicants)(t),await h(t.meta.url,t.meta.name)}async function h(e,t){if(f.value.updateOnImport&&!(0,c.default)(f.value.guildID))try{await(0,u.updateTournamentData)(f.value.guildID,e,t)}catch(e){m.log.warn(`Radia tournament data update failed: ${e}`)}}m.bundleConfig&&void 0!==m.bundleConfig.smashgg?g=m.bundleConfig.smashgg.apiKey:m.log.warn(`"smashgg" is not defined in cfg/${m.bundleName}.json! Importing tournament data from smash.gg will not be possible.`),m.listenFor("getTournamentData",(async(e,t)=>{if(e.id&&e.method)try{switch(e.method){case o.TournamentDataSource.BATTLEFY:{const a=await(0,i.getBattlefyTournamentData)(e.id);(0,l.updateTeamDataReplicants)(a),await h(a.meta.url,a.meta.name),t(null,{id:a.meta.id});break}case o.TournamentDataSource.SMASHGG:{if(!g){t(new Error("No smash.gg token provided."));break}const a=await(0,s.getSmashGGEvents)(e.id,g);return 1===a.length?(await v(a[0].id),t(null,{id:e.id})):t(null,{id:e.id,events:a})}case o.TournamentDataSource.UPLOAD:{const a=await async function(e){const t=await n.default.get(e);if(200===t.status)return(0,l.handleRawData)(t.data,e);throw new Error(`Got response code ${t.status} from URL ${e}`)}(e.id);(0,l.updateTeamDataReplicants)(a),t(null,{id:a.meta.id});break}default:return t(new Error("Invalid method given."))}}catch(e){t(e)}else t(new Error("Missing arguments."),null)})),m.listenFor("getSmashggEvent",(async(e,t)=>{await v(e.eventId),t(null,e.eventId)}))},715:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(37)),o=(n=a(718))&&n.__esModule?n:{default:n};function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}t.default=e=>{r.set(e),a(929),a(220),a(519),a(425),a(980),a(12),a(203),a(229),a(413);const t=e.Replicant("radiaSettings"),n=e.Replicant("predictionStore");n.value.socketOpen=!1,(0,o.default)(e.bundleConfig)||(0,o.default)(e.bundleConfig.radia)?(e.log.warn(`"radia" is not defined in cfg/${e.bundleName}.json! The ability to import data via the Radia Production API will not be possible.`),t.value.enabled=!1,n.value.enablePrediction=!1):(t.value.enabled=!0,a(83),a(866))},e.exports=t.default},12:(e,t,a)=>{var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(37)),r=a(553),o=u(a(198)),i=a(648),s=a(56),l=u(a(963));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}const d=n.get(),p=d.Replicant("activeRound"),m=d.Replicant("nextRound");d.Replicant("swapColorsInternally").on("change",((e,t)=>{if(void 0!==t){const e=p.value.teamA.color;p.value.teamA.color=p.value.teamB.color,p.value.teamB.color=e}})),d.listenFor("removeWinner",((e,t)=>{try{const e=(0,l.default)(p.value.games,(e=>e.winner!==r.GameWinner.NO_WINNER));if(e<0)return;(0,s.setWinner)(e,r.GameWinner.NO_WINNER)}catch(e){t(e)}})),d.listenFor("setWinner",((e,t)=>{const a=p.value.teamA.score+p.value.teamB.score,n=null!=e.roundIndex?e.roundIndex:a;try{(0,s.setWinner)(n,e.winner)}catch(e){t(e)}})),d.listenFor("setActiveRound",((e,t)=>{try{(0,s.setActiveRoundTeams)(e.teamAId,e.teamBId),e.roundId&&(0,s.setActiveRoundGames)(e.roundId)}catch(e){return t(e)}(0,i.commitActiveRoundToRoundStore)()})),d.listenFor("resetActiveRound",(()=>{p.value.teamA.score=0,p.value.teamB.score=0,p.value.games=p.value.games.map((e=>({...e,winner:r.GameWinner.NO_WINNER,color:void 0}))),(0,i.commitActiveRoundToRoundStore)()})),d.listenFor("updateActiveGames",(e=>{p.value.games=(0,o.default)(e.games),(0,i.commitActiveRoundToRoundStore)()})),d.listenFor("beginNextMatch",(()=>{p.value={...p.value,teamA:{...p.value.teamA,...(0,o.default)(m.value.teamA),score:0},teamB:{...p.value.teamB,...(0,o.default)(m.value.teamB),score:0},games:m.value.games.map((e=>({...e,winner:r.GameWinner.NO_WINNER,color:void 0}))),round:{...(0,o.default)(m.value.round),isCompleted:!1}},(0,i.commitActiveRoundToRoundStore)(!0),m.value.showOnStream=!1})),d.listenFor("setActiveColor",(e=>{p.value.activeColor={categoryName:e.categoryName,index:e.color.index,title:e.color.title,isCustom:e.color.isCustom},p.value.teamA.color=e.color.clrA,p.value.teamB.color=e.color.clrB}))},56:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setWinner=function(e,t){if(e>=p.value.games.length||e<0)throw new Error(`Cannot set winner for game ${e+1} as it does not exist.`);const a=(0,r.default)(p.value),i=(0,r.default)(p.value.games[e]);t===n.GameWinner.NO_WINNER?(i.winner===n.GameWinner.ALPHA?a.teamA.score--:i.winner===n.GameWinner.BRAVO&&a.teamB.score--,a.games[e].winner=n.GameWinner.NO_WINNER,a.games[e].color=void 0):(t===n.GameWinner.ALPHA?(a.teamA.score++,a.games[e].winner=t,i.winner===n.GameWinner.BRAVO&&a.teamB.score--):t===n.GameWinner.BRAVO&&(a.teamB.score++,a.games[e].winner=t,i.winner===n.GameWinner.ALPHA&&a.teamA.score--),i.color||(a.games[e].color={...p.value.activeColor,clrA:p.value.teamA.color,clrB:p.value.teamB.color,colorsSwapped:m.value}));const s=a.games.length/2;a.round.isCompleted=a.teamA.score>s||a.teamB.score>s,p.value=a,(0,o.commitActiveRoundToRoundStore)()},t.setActiveRoundGames=function(e){const t=f.value[e];if((0,s.default)(t))throw new Error(`Could not find round '${e}'.`);p.value.round={id:e,name:t.meta.name,isCompleted:t.meta.isCompleted},p.value.games=(0,r.default)(t.games),t.teamA&&t.teamB?(p.value.teamA.score=t.teamA.score,p.value.teamB.score=t.teamB.score):(p.value.teamA.score=0,p.value.teamB.score=0)},t.setActiveRoundTeams=function(e,t){const a=(0,l.getTeam)(e,g.value),n=(0,l.getTeam)(t,g.value);if([a,n].filter(s.default).length>0)throw new Error("Could not find a team.");const o=(0,r.default)(p.value.teamA);delete o.logoUrl;const i=(0,r.default)(p.value.teamB);delete i.logoUrl,p.value.teamA={...o,...a},p.value.teamB={...i,...n}};var n=a(553),r=c(a(198)),o=a(648),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(37)),s=c(a(718)),l=a(212);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function c(e){return e&&e.__esModule?e:{default:e}}const d=i.get(),p=d.Replicant("activeRound"),m=d.Replicant("swapColorsInternally"),f=d.Replicant("roundStore"),g=d.Replicant("tournamentData")},203:(e,t,a)=>{var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=o(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(37)),r=a(610);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(o=function(e){return e?a:t})(e)}n.get().listenFor("setNextRound",((e,t)=>{try{(0,r.setNextRoundTeams)(e.teamAId,e.teamBId),e.roundId&&(0,r.setNextRoundGames)(e.roundId)}catch(e){return t(e)}}))},610:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setNextRoundGames=function(e){const t=c.value[e];if((0,r.default)(t))throw new Error(`Could not find round '${e}'.`);l.value.round={id:e,name:t.meta.name},l.value.games=t.games.map((e=>({stage:e.stage,mode:e.mode})))},t.setNextRoundTeams=function(e,t){const a=(0,o.getTeam)(e,u.value),n=(0,o.getTeam)(t,u.value);if([a,n].filter(r.default).length>0)throw new Error("Could not find a team.");l.value.teamA=a,l.value.teamB=n};var n,r=(n=a(718))&&n.__esModule?n:{default:n},o=a(212);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}const s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(37)).get(),l=s.Replicant("nextRound"),u=s.Replicant("tournamentData"),c=s.Replicant("roundStore")},648:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.commitActiveRoundToRoundStore=function(e=!1){const t=(0,o.default)(m.value),a=t.teamA.score+t.teamB.score>0,n=t.round.isCompleted?u.DateTime.utc().toISO():void 0;p.value[t.round.id]={...p.value[t.round.id],meta:{name:t.round.name,isCompleted:t.round.isCompleted,completionTime:n},teamA:a||e?t.teamA:void 0,teamB:a||e?t.teamB:void 0,games:t.games.map((e=>({stage:e.stage,mode:e.mode,winner:e.winner,color:e.color})))}};var n,r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(37)),o=(n=a(198))&&n.__esModule?n:{default:n},i=a(553),s=a(56),l=a(610),u=a(223);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}const d=r.get(),p=d.Replicant("roundStore"),m=d.Replicant("activeRound"),f=d.Replicant("nextRound");d.listenFor("updateRoundStore",(e=>{const t=p.value[e.id],a=(0,o.default)(t),n=(0,o.default)(e.games).map(((e,t)=>{var n;return{...e,winner:(null==a||null===(n=a.games[t])||void 0===n?void 0:n.winner)||i.GameWinner.NO_WINNER}}));t?(t.games=n,t.meta.name=e.roundName):p.value[e.id]={games:n,meta:{name:e.roundName,isCompleted:!1}},m.value.round.id===e.id&&(0,s.setActiveRoundGames)(e.id),f.value.round.id===e.id&&(0,l.setNextRoundGames)(e.id)})),d.listenFor("removeRound",((e,t)=>{if(Object.keys(p.value).length<=1)return t(new Error("Cannot delete the last round."));if(!p.value[e.roundId])return t(new Error(`Couldn't find round with id '${e.roundId}'.`));delete p.value[e.roundId];const a=Object.keys(p.value)[0];m.value.round.id===e.roundId&&(0,s.setActiveRoundGames)(a),f.value.round.id===e.roundId&&(0,l.setNextRoundGames)(a)})),d.listenFor("resetRoundStore",(()=>{const e="00000",t="11111";p.value={[e]:{meta:{name:"Default Round 1",isCompleted:!1},games:[{stage:"MakoMart",mode:"Clam Blitz",winner:i.GameWinner.NO_WINNER},{stage:"Ancho-V Games",mode:"Tower Control",winner:i.GameWinner.NO_WINNER},{stage:"Wahoo World",mode:"Rainmaker",winner:i.GameWinner.NO_WINNER}]},[t]:{meta:{name:"Default Round 2",isCompleted:!1},games:[{stage:"Inkblot Art Academy",mode:"Turf War",winner:i.GameWinner.NO_WINNER},{stage:"Ancho-V Games",mode:"Tower Control",winner:i.GameWinner.NO_WINNER},{stage:"Wahoo World",mode:"Rainmaker",winner:i.GameWinner.NO_WINNER}]}},(0,s.setActiveRoundGames)(e),(0,l.setNextRoundGames)(t)}))},229:(e,t,a)=>{var n=a(212);function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(r=function(e){return e?a:t})(e)}const o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=r(t);if(a&&a.has(e))return a.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}(a(37)).get(),i=o.Replicant("tournamentData"),s=o.Replicant("activeRound"),l=o.Replicant("nextRound");function u(e){const t=(0,n.getTeam)(e.id,i.value);return{...e,...t}}o.listenFor("toggleTeamImage",((e,t)=>{const a=i.value.teams.filter((t=>t.id===e.teamId))[0];if(null==a)return t(new Error("No team found."));a.showLogo=e.isVisible,s.value.teamA=u(s.value.teamA),s.value.teamB=u(s.value.teamB),l.value.teamA=u(l.value.teamA),l.value.teamB=u(l.value.teamB)}))},413:(e,t,a)=>{var n,r=a(306),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(a(37)),i=a(747),s=(n=a(585))&&n.__esModule?n:{default:n};function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}const u=o.get(),c=`${process.env.NODECG_ROOT}/bundles`;(0,i.readdirSync)(c,{withFileTypes:!0}).filter((e=>e.isDirectory()&&e.name!==u.bundleName)).forEach((e=>{const t=`${c}/${e.name}/package.json`;if((0,i.existsSync)(t)){const a=JSON.parse((0,i.readFileSync)(t,"utf-8"));"compatibleDashboardVersion"in a&&!s.default.satisfies(r.version,a.compatibleDashboardVersion)&&u.log.warn(`Bundle ${e.name} expects version ${a.compatibleDashboardVersion} of ${u.bundleName}! The installed version is ${r.version}.`)}}))},367:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateId=function(){return String(Math.random().toString(36).substr(2,9))}},279:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getColorOptionName=function(e,t){return`${(0,r.default)(t)}_${e}`},t.colors=t.splatModes=t.splatStages=void 0;var n,r=(n=a(201))&&n.__esModule?n:{default:n};const o=["Ancho-V Games","Arowana Mall","Blackbelly Skatepark","Camp Triggerfish","Goby Arena","Humpback Pump Track","Inkblot Art Academy","Kelp Dome","MakoMart","Manta Maria","Moray Towers","Musselforge Fitness","New Albacore Hotel","Piranha Pit","Port Mackerel","Shellendorf Institute","Shifty Station","Snapper Canal","Starfish Mainstage","Sturgeon Shipyard","The Reef","Wahoo World","Walleye Warehouse","Skipper Pavilion","Unknown Stage"];t.splatStages=o,o.sort();const i=["Clam Blitz","Tower Control","Rainmaker","Splat Zones","Turf War","Unknown Mode"];t.splatModes=i,i.sort(),t.colors=[{meta:{name:"Ranked Modes"},colors:[{index:0,title:"Green vs Grape",clrA:"#37FC00",clrB:"#7D28FC",isCustom:!1},{index:1,title:"Green vs Magenta",clrA:"#04D976",clrB:"#D600AB",isCustom:!1},{index:2,title:"Turquoise vs Orange",clrA:"#10E38F",clrB:"#FB7B08",isCustom:!1},{index:3,title:"Mustard vs Purple",clrA:"#FF9E03",clrB:"#B909E0",isCustom:!1},{index:4,title:"Dark Blue vs Green",clrA:"#2F27CC",clrB:"#37FC00",isCustom:!1},{index:5,title:"Purple vs Green",clrA:"#B909E0",clrB:"#37FC00",isCustom:!1},{index:6,title:"Yellow vs Blue",clrA:"#FEF232",clrB:"#2ED2FE",isCustom:!1}]},{meta:{name:"Turf War"},colors:[{index:0,title:"Yellow vs Purple",clrA:"#D1E004",clrB:"#960CB2",isCustom:!1},{index:1,title:"Pink vs Blue",clrA:"#E61077",clrB:"#361CB8",isCustom:!1},{index:2,title:"Pink vs Yellow",clrA:"#ED0C6A",clrB:"#D5E802",isCustom:!1},{index:3,title:"Purple vs Turquoise",clrA:"#6B10CC",clrB:"#08CC81",isCustom:!1},{index:4,title:"Pink vs Light Blue",clrA:"#E30960",clrB:"#02ADCF",isCustom:!1},{index:5,title:"Purple vs Orange",clrA:"#5617C2",clrB:"#FF5F03",isCustom:!1},{index:6,title:"Pink vs Green",clrA:"#E60572",clrB:"#1BBF0F",isCustom:!1}]},{meta:{name:"Color Lock"},colors:[{index:0,title:"Yellow vs Blue (Color Lock)",clrA:"#FEF232",clrB:"#2F27CC",isCustom:!1}]},{meta:{name:"Custom Color"},colors:[{index:0,title:"Custom Color",clrA:"#000000",clrB:"#FFFFFF",isCustom:!0}]}]},323:(e,t)=>{let a;Object.defineProperty(t,"__esModule",{value:!0}),t.BracketTypeHelper=t.BracketType=void 0,t.BracketType=a,function(e){e.SWISS="SWISS",e.DOUBLE_ELIMINATION="DOUBLE_ELIMINATION",e.SINGLE_ELIMINATION="SINGLE_ELIMINATION",e.ROUND_ROBIN="ROUND_ROBIN",e.LADDER="LADDER"}(a||(t.BracketType=a={})),t.BracketTypeHelper=class{static fromBattlefy(e,t){if("elimination"===e){if(null==t)throw new Error('Got bracket type "elimination" from Battlefy without "style" parameter (single or double?)');return{single:a.SINGLE_ELIMINATION,double:a.DOUBLE_ELIMINATION}[t]}return{ladder:a.LADDER,swiss:a.SWISS,roundrobin:a.ROUND_ROBIN}[e]}}},553:(e,t)=>{let a;Object.defineProperty(t,"__esModule",{value:!0}),t.GameWinner=void 0,t.GameWinner=a,function(e){e.NO_WINNER="none",e.ALPHA="alpha",e.BRAVO="bravo"}(a||(t.GameWinner=a={}))},995:(e,t)=>{let a;Object.defineProperty(t,"__esModule",{value:!0}),t.ImportStatus=void 0,t.ImportStatus=a,function(e){e.SUCCESS="SUCCESS",e.LOADING="LOADING",e.FAILURE="FAILURE",e.NO_DATA="NO_DATA",e.NO_STATUS="NO_STATUS"}(a||(t.ImportStatus=a={}))},339:(e,t)=>{let a;Object.defineProperty(t,"__esModule",{value:!0}),t.TournamentDataSourceHelper=t.TournamentDataSource=void 0,t.TournamentDataSource=a,function(e){e.BATTLEFY="BATTLEFY",e.SMASHGG="SMASHGG",e.UPLOAD="UPLOAD",e.UNKNOWN="UNKNOWN"}(a||(t.TournamentDataSource=a={})),t.TournamentDataSourceHelper=class{static toPrettyString(e){return{[a.BATTLEFY]:"Battlefy",[a.SMASHGG]:"Smash.gg",[a.UPLOAD]:"Uploaded file",[a.UNKNOWN]:"Unknown"}[e]}}},306:e=>{e.exports=JSON.parse('{"name":"ipl-overlay-controls","version":"3.1.0","description":"Dashboard elements for Inkling Performance Labs broadcast graphics.","homepage":"https://github.com/inkfarer/ipl-overlay-controls","author":{"name":"inkfarer","email":"inkfarer@inkfarer.com","url":"https://inkfarer.com"},"files":["dashboard","src/extension"],"keywords":["","nodecg-bundle"],"scripts":{"build":"cross-env NODE_ENV=production webpack","clean":"trash node_modules/.cache && trash dashboard && trash extension","cleanbuild":"npm run clean && npm run build","start":"node ../..","watch":"webpack -w","schema-types":"nodecg schema-types","lint":"eslint ./src","fix":"eslint ./src --fix","devbuild":"webpack","test":"jest","test:update":"jest -u","test:ci":"jest --json --outputFile=result.json --testLocationInResults"},"nodecg":{"compatibleRange":"^1.7.0","dashboardPanels":[{"name":"scoring","title":"Scoreboard","width":2,"file":"scoreboard.html","workspace":"ipl","headerColor":"#262F40"},{"name":"music","title":"Music","width":2,"file":"music.html","workspace":"ipl","headerColor":"#262F40"},{"name":"breakscreen","title":"Break Screen","width":2,"file":"breakScreen.html","workspace":"ipl","headerColor":"#262F40"},{"name":"activeround","title":"Current Round","width":4,"file":"activeRound.html","workspace":"ipl","headerColor":"#262F40"},{"name":"nextround","title":"Upcoming Round","width":2,"file":"nextRound.html","workspace":"ipl","headerColor":"#262F40"},{"name":"casters","title":"Casters","width":2,"file":"casters.html","workspace":"ipl","headerColor":"#262F40"},{"name":"highlightedMatches","title":"Highlighted Matches","width":2,"file":"highlightedMatches.html","workspace":"ipl","headerColor":"#262F40"},{"name":"predictions","title":"Predictions","width":2,"file":"predictions.html","workspace":"ipl","headerColor":"#262F40"},{"name":"battlefyimport","title":"Import data","width":2,"file":"dataImport.html","workspace":"ipl setup","headerColor":"#262F40"},{"name":"rounds","title":"Rounds","width":6,"file":"rounds.html","workspace":"ipl setup","headerColor":"#262F40"},{"name":"Settings","title":"Settings","width":2,"file":"settings.html","workspace":"ipl setup","headerColor":"#262F40"},{"name":"createPredictionDialog","title":"","width":3,"file":"createPredictionDialog.html","dialog":true},{"name":"resolvePredictionDialog","title":"","width":3,"file":"resolvePredictionDialog.html","dialog":true}]},"repository":"https://github.com/nodecg/nodecg.git","license":"MIT","dependencies":{"@fortawesome/fontawesome-svg-core":"^1.2.35","@fortawesome/free-solid-svg-icons":"^5.15.3","axios":"^0.21.1","babel-plugin-add-module-exports":"^1.0.4","clone":"^2.1.2","express-fileupload":"^1.2.1","lastfm":"git+https://github.com/inkfarer/lastfm-node.git","lodash":"^4.17.21","luxon":"^2.0.1","semver":"^7.3.5","ws":"^7.5.3"},"devDependencies":{"@babel/core":"^7.14.3","@babel/preset-env":"^7.14.4","@babel/preset-typescript":"^7.13.0","@types/clone":"^2.1.0","@types/express-fileupload":"^1.1.6","@types/jest":"^26.0.24","@types/jest-when":"^2.7.3","@types/lodash":"^4.14.171","@types/luxon":"^1.27.1","@types/node":"^15.12.1","@types/semver":"^7.3.7","@types/webpack":"^5.28.0","@types/webpack-livereload-plugin":"^2.3.2","@types/ws":"^7.4.7","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0","babel-loader":"^8.2.2","cross-env":"^7.0.3","css-loader":"^5.2.7","eslint":"^7.28.0","eslint-import-resolver-typescript":"^2.4.0","eslint-import-resolver-webpack":"^0.13.1","eslint-plugin-import":"^2.23.4","globby":"^11.0.3","html-webpack-plugin":"^5.3.1","jest":"^27.0.6","jest-when":"^3.3.1","json-schema-to-typescript":"^10.1.4","style-loader":"^2.0.0","trash-cli":"^4.0.0","ts-jest":"^27.0.4","ts-node":"^10.0.0","tsconfig-paths-webpack-plugin":"^3.5.1","typescript":"^4.3.2","webpack":"^5.42.0","webpack-cli":"^4.7.0","webpack-livereload-plugin":"^3.0.1","webpack-node-externals":"^3.0.0"},"jest":{"projects":["<rootDir>/src/dashboard/jest.config.ts","<rootDir>/src/extension/jest.config.ts","<rootDir>/src/helpers/jest.config.ts"]}}')},376:e=>{e.exports=require("axios")},198:e=>{e.exports=require("clone")},118:e=>{e.exports=require("express-fileupload")},747:e=>{e.exports=require("fs")},172:e=>{e.exports=require("lastfm")},963:e=>{e.exports=require("lodash/findLastIndex")},718:e=>{e.exports=require("lodash/isEmpty")},201:e=>{e.exports=require("lodash/kebabCase")},223:e=>{e.exports=require("luxon")},585:e=>{e.exports=require("semver/preload")},439:e=>{e.exports=require("ws")}},t={},a=function a(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,a),o.exports}(715);module.exports=a})();