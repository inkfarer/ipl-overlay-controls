(()=>{var t,e={5455:(t,e,a)=>{var n=a(6411),l=a(940),o=a(9631),r=a(6152),i=a(7878),s=a(3226),c=a(6001),u=a(7598),d=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(i(t)&&(r(t)||"string"==typeof t||"function"==typeof t.splice||s(t)||u(t)||o(t)))return!t.length;var e=l(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!n(t).length;for(var a in t)if(d.call(t,a))return!1;return!0}},5717:(t,e,a)=>{"use strict";a(223);var n=a(225),l=a(7875),o=a(349);const r=(0,l.Uk)(" No stages present to import from. ");var i,s=a(641),c=a(243),u=a(9850),d=a.n(u);!function(t){t.BATTLEFY="BATTLEFY",t.SMASHGG="SMASHGG",t.UPLOAD="UPLOAD",t.UNKNOWN="UNKNOWN"}(i||(i={}));var h=function(t,e,a,n){return new(a||(a=Promise))((function(l,o){function r(t){try{s(n.next(t))}catch(t){o(t)}}function i(t){try{s(n.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?l(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(r,i)}s((n=n.apply(t,e||[])).next())}))};const m=[nodecg.Replicant("highlightedMatches"),nodecg.Replicant("tournamentData")],p=(0,c.MT)({state:{highlightedMatches:null,tournamentData:null},mutations:{setState(t,{name:e,val:a}){this.state[e]=d()(a)}},actions:{getHighlightedMatches(t,{options:e}){return h(this,void 0,void 0,(function*(){const a=e.some((t=>"all"===t.value));if(a)return nodecg.sendMessage("getHighlightedMatches",{getAllMatches:a});{const a=e.map((t=>t.value));switch(t.state.tournamentData.meta.source){case i.BATTLEFY:return nodecg.sendMessage("getHighlightedMatches",{getAllMatches:!1,stages:a});case i.SMASHGG:return nodecg.sendMessage("getHighlightedMatches",{getAllMatches:!1,streamIDs:a.map((t=>parseInt(t)))});default:throw new Error(`Cannot import data from source '${t.state.tournamentData.meta.source}'`)}}}))},setNextMatch(t,{teamAId:e,teamBId:a}){return h(this,void 0,void 0,(function*(){return nodecg.sendMessage("setNextRound",{teamAId:e,teamBId:a})}))}}}),g=Symbol();function v(){return(0,c.oR)(g)}var f,M=a(8127);!function(t){t.SWISS="SWISS",t.DOUBLE_ELIMINATION="DOUBLE_ELIMINATION",t.SINGLE_ELIMINATION="SINGLE_ELIMINATION",t.ROUND_ROBIN="ROUND_ROBIN",t.LADDER="LADDER"}(f||(f={}));const I=(0,l.aZ)({name:"HighlightedMatchImporter",components:{IplSpace:M.IplSpace,IplButton:M.IplButton,IplMultiSelect:M.IplMultiSelect},setup(){const t=v(),e=(0,s.Fl)((()=>t.state.tournamentData.meta.source)),a=(0,s.iH)([]);return{matchSelectLabel:(0,s.Fl)((()=>{switch(e.value){case i.BATTLEFY:return"Bracket";case i.SMASHGG:return"Stream";default:return""}})),matchSelectOptions:(0,s.Fl)((()=>{switch(e.value){case i.BATTLEFY:return[...t.state.tournamentData.stages.filter((t=>[f.SWISS,f.DOUBLE_ELIMINATION,f.SINGLE_ELIMINATION,f.ROUND_ROBIN].includes(t.type))).map((t=>({value:t.id,name:t.name}))),{name:"All Brackets",value:"all"}];case i.SMASHGG:return[...t.state.tournamentData.meta.sourceSpecificData.smashgg.streams.map((t=>({value:t.id.toString(),name:t.streamName}))),{name:"All Streams",value:"all"}];default:return[]}})),selectedMatchOptions:a,handleImport(){return e=this,n=void 0,o=function*(){return t.dispatch("getHighlightedMatches",{options:a.value})},new((l=void 0)||(l=Promise))((function(t,a){function r(t){try{s(o.next(t))}catch(t){a(t)}}function i(t){try{s(o.throw(t))}catch(t){a(t)}}function s(e){var a;e.done?t(e.value):(a=e.value,a instanceof l?a:new l((function(t){t(a)}))).then(r,i)}s((o=o.apply(e,n||[])).next())}));var e,n,l,o},importDisabled:(0,s.Fl)((()=>{var t;return(null===(t=a.value)||void 0===t?void 0:t.length)<=0}))}}});var S=a(4407);const y=(0,S.Z)(I,[["render",function(t,e,a,n,o,r){const i=(0,l.up)("ipl-multi-select"),s=(0,l.up)("ipl-button"),c=(0,l.up)("ipl-space");return(0,l.wg)(),(0,l.j4)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{modelValue:t.selectedMatchOptions,"onUpdate:modelValue":e[0]||(e[0]=e=>t.selectedMatchOptions=e),label:t.matchSelectLabel,options:t.matchSelectOptions,"data-test":"match-selector"},null,8,["modelValue","label","options"]),(0,l.Wm)(s,{label:"Import",class:"m-t-8",async:"",disabled:t.importDisabled,"data-test":"import-button",onClick:t.handleImport},null,8,["disabled","onClick"])])),_:1})}]]),w=(0,l.Uk)(" No matches loaded. ");const b=(0,l.aZ)({name:"HighlightedMatchViewer",components:{IplMessage:M.IplMessage,IplDataRow:M.IplDataRow,IplSelect:M.IplSelect,IplSpace:M.IplSpace,IplButton:M.IplButton},setup(){const t=v(),e=(0,s.iH)(null),a=(0,s.Fl)((()=>t.state.highlightedMatches.find((t=>t.meta.id===e.value))));return t.watch((t=>t.highlightedMatches),(t=>{var a,n,l;e.value=null!==(l=null===(n=null===(a=t[0])||void 0===a?void 0:a.meta)||void 0===n?void 0:n.id)&&void 0!==l?l:null}),{immediate:!0}),{matchOptions:(0,s.Fl)((()=>{const e=t.state.highlightedMatches.every((e=>e.meta.stageName===t.state.highlightedMatches[0].meta.stageName));return t.state.highlightedMatches.map((t=>({value:t.meta.id,name:e?t.meta.name:`${t.meta.name} | ${t.meta.stageName}`})))})),selectedMatch:e,selectedMatchData:a,disableSetNextMatch:(0,s.Fl)((()=>!a.value)),handleSetNextMatch(){return e=this,n=void 0,o=function*(){yield t.dispatch("setNextMatch",{teamAId:a.value.teamA.id,teamBId:a.value.teamB.id})},new((l=void 0)||(l=Promise))((function(t,a){function r(t){try{s(o.next(t))}catch(t){a(t)}}function i(t){try{s(o.throw(t))}catch(t){a(t)}}function s(e){var a;e.done?t(e.value):(a=e.value,a instanceof l?a:new l((function(t){t(a)}))).then(r,i)}s((o=o.apply(e,n||[])).next())}));var e,n,l,o}}}}),O=(0,S.Z)(b,[["render",function(t,e,a,n,o,r){var i;const s=(0,l.up)("ipl-message"),c=(0,l.up)("ipl-select"),u=(0,l.up)("ipl-data-row"),d=(0,l.up)("ipl-button"),h=(0,l.up)("ipl-space");return(null===(i=t.matchOptions)||void 0===i?void 0:i.length)?((0,l.wg)(),(0,l.j4)(h,{key:1},{default:(0,l.w5)((()=>{var a,n,o,r;return[(0,l.Wm)(c,{modelValue:t.selectedMatch,"onUpdate:modelValue":e[0]||(e[0]=e=>t.selectedMatch=e),label:"Match",options:t.matchOptions,"data-test":"match-selector"},null,8,["modelValue","options"]),(0,l.Wm)(u,{label:"Team A",value:null===(n=null===(a=t.selectedMatchData)||void 0===a?void 0:a.teamA)||void 0===n?void 0:n.name,"data-test":"team-a-name-display"},null,8,["value"]),(0,l.Wm)(u,{label:"Team B",value:null===(r=null===(o=t.selectedMatchData)||void 0===o?void 0:o.teamB)||void 0===r?void 0:r.name,"data-test":"team-b-name-display"},null,8,["value"]),(0,l.Wm)(d,{class:"m-t-8",label:"Set next match",disabled:t.disableSetNextMatch,"data-test":"set-next-match-button",onClick:t.handleSetNextMatch},null,8,["disabled","onClick"])]})),_:1})):((0,l.wg)(),(0,l.j4)(s,{key:0,type:"info"},{default:(0,l.w5)((()=>[w])),_:1}))}]]);var N=a(2121),D=a(5455),A=a.n(D);const T=(0,l.aZ)({name:"HighlightedMatches",components:{IplErrorDisplay:N.Z,HighlightedMatchViewer:O,HighlightedMatchImporter:y,IplMessage:M.IplMessage},setup(){const t=v(),e=(0,s.Fl)((()=>t.state.tournamentData.meta.source));return{canImportData:(0,s.Fl)((()=>[i.BATTLEFY,i.SMASHGG].includes(e.value))),formattedDataSource:(0,s.Fl)((()=>class{static toPrettyString(t){return{[i.BATTLEFY]:"Battlefy",[i.SMASHGG]:"Smash.gg",[i.UPLOAD]:"Uploaded file",[i.UNKNOWN]:"Unknown"}[t]}}.toPrettyString(e.value))),stageDataPresent:(0,s.Fl)((()=>!A()(t.state.tournamentData.stages)))}}}),B=(0,S.Z)(T,[["render",function(t,e,a,n,i,s){const c=(0,l.up)("ipl-error-display"),u=(0,l.up)("ipl-message"),d=(0,l.up)("highlighted-match-importer"),h=(0,l.up)("highlighted-match-viewer");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(c,{class:"m-b-8"}),t.canImportData?t.stageDataPresent?((0,l.wg)(),(0,l.iD)(l.HY,{key:2},[(0,l.Wm)(d),(0,l.Wm)(h,{class:"m-t-8"})],64)):((0,l.wg)(),(0,l.j4)(u,{key:1,type:"info","data-test":"missing-stages-message"},{default:(0,l.w5)((()=>[r])),_:1})):((0,l.wg)(),(0,l.j4)(u,{key:0,type:"warning","data-test":"unsupported-source-warning"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Cannot import data from source '"+(0,o.zw)(t.formattedDataSource)+"'. ",1)])),_:1}))],64)}]]);var L=a(4825),E=a(4928);(0,n.r)(m,p).then((()=>{const t=(0,L.ri)(B);(0,E.EW)(t),t.use(p,g),t.mount("#app")}))}},a={};function n(t){var l=a[t];if(void 0!==l)return l.exports;var o=a[t]={id:t,loaded:!1,exports:{}};return e[t](o,o.exports,n),o.loaded=!0,o.exports}n.m=e,t=[],n.O=(e,a,l,o)=>{if(!a){var r=1/0;for(u=0;u<t.length;u++){for(var[a,l,o]=t[u],i=!0,s=0;s<a.length;s++)(!1&o||r>=o)&&Object.keys(n.O).every((t=>n.O[t](a[s])))?a.splice(s--,1):(i=!1,o<r&&(r=o));if(i){t.splice(u--,1);var c=l();void 0!==c&&(e=c)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[a,l,o]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t={472:0};n.O.j=e=>0===t[e];var e=(e,a)=>{var l,o,[r,i,s]=a,c=0;if(r.some((e=>0!==t[e]))){for(l in i)n.o(i,l)&&(n.m[l]=i[l]);if(s)var u=s(n)}for(e&&e(a);c<r.length;c++)o=r[c],n.o(t,o)&&t[o]&&t[o][0](),t[r[c]]=0;return n.O(u)},a=self.webpackChunk=self.webpackChunk||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})();var l=n.O(void 0,[498],(()=>n(5717)));l=n.O(l)})();