(()=>{"use strict";var e,t={3175:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(2609),i=n.n(o)()((function(e){return e[1]}));i.push([e.id,"body{margin:0 0 14px}",""]);const a=i},8151:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(2609),i=n.n(o)()((function(e){return e[1]}));i.push([e.id,".title-input[data-v-714bd430]{width:65%}.duration-input[data-v-714bd430]{width:35%}",""]);const a=i},8453:(e,t,n)=>{n(223);var o=n(6062),i=n.n(o),a=n(3175);i()(a.Z,{insert:"head",singleton:!1}),a.Z.locals;var r=n(225),l=n(7875);const d=(0,l.Uk)(" The active prediction has not been resolved! "),c={class:"layout horizontal"},u={class:"layout horizontal m-t-4"},s={class:"layout horizontal m-t-8"};var m=n(641),v=n(8127),p=n(243),h=n(9850),f=n.n(h);const g=nodecg.Replicant("nextRound"),w=[g],y=(0,p.MT)({state:{nextRound:null},mutations:{setState(e,{name:t,val:n}){this.state[t]=f()(n)},setShowOnStream(e,t){g.value.showOnStream=t}},actions:{beginNextMatch(e,t){nodecg.sendMessage("beginNextMatch",t)},setNextRound(e,{teamAId:t,teamBId:n,roundId:o}){nodecg.sendMessage("setNextRound",{teamAId:t,teamBId:n,roundId:o})}}}),b=Symbol();var E;!function(e){e.RESOLVED="RESOLVED",e.ACTIVE="ACTIVE",e.CANCELED="CANCELED",e.LOCKED="LOCKED"}(E||(E={}));var C=function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function r(e){try{d(o.next(e))}catch(e){a(e)}}function l(e){try{d(o.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}d((o=o.apply(e,t||[])).next())}))};const P=[nodecg.Replicant("predictionStore")],x=(0,p.MT)({state:{predictionStore:null},mutations:{setState(e,{name:t,val:n}){this.state[t]=f()(n)}},actions:{lockPrediction(e){return C(this,void 0,void 0,(function*(){return I(e.state.predictionStore.currentPrediction,E.LOCKED,[E.ACTIVE])}))},cancelPrediction(e){return C(this,void 0,void 0,(function*(){return I(e.state.predictionStore.currentPrediction,E.CANCELED,[E.ACTIVE,E.LOCKED])}))},resolvePrediction(e,{winningOutcomeIndex:t}){var n;return C(this,void 0,void 0,(function*(){if(t>1||t<0)throw new Error(`Cannot resolve prediction with outcome index ${t}.`);if(!(null===(n=e.state.predictionStore.currentPrediction)||void 0===n?void 0:n.id))throw new Error("No prediction to resolve.");if(e.state.predictionStore.currentPrediction.status!==E.LOCKED)throw new Error("Can only resolve a locked prediction.");return nodecg.sendMessage("patchPrediction",{id:e.state.predictionStore.currentPrediction.id,status:E.RESOLVED,winning_outcome_id:e.state.predictionStore.currentPrediction.outcomes[t].id})}))},createPrediction(e,{title:t,teamAName:n,teamBName:o,duration:i}){var a;return C(this,void 0,void 0,(function*(){if([E.ACTIVE,E.LOCKED].includes(null===(a=e.state.predictionStore.currentPrediction)||void 0===a?void 0:a.status))throw new Error("An unresolved prediction already exists.");return nodecg.sendMessage("postPrediction",{title:t,outcomes:[{title:n},{title:o}],prediction_window:i})}))},reconnect(){return C(this,void 0,void 0,(function*(){return nodecg.sendMessage("reconnectToRadiaSocket")}))}}});function I(e,t,n){return C(this,void 0,void 0,(function*(){if(!e||!n.includes(null==e?void 0:e.status))throw new Error(`Cannot set prediction status at this time. Status must match one of [${n.join(", ")}]`);return nodecg.sendMessage("patchPrediction",{id:e.id,status:t})}))}const S=Symbol();var V=n(6222);function O(e){nodecg.getDialog(e).close()}var D=n(908);const A=(0,l.aZ)({name:"CreatePredictionDialog",components:{IplErrorDisplay:V.Z,IplMessage:v.IplMessage,IplButton:v.IplButton,IplInput:v.IplInput,IplSpace:v.IplSpace,IplDialogTitle:v.IplDialogTitle},setup(){const e=(0,p.oR)(b),t=(0,p.oR)(S),n=(0,m.iH)("Who do you think will win this match?"),o=(0,m.iH)(120),i=(0,m.iH)(""),a=(0,m.iH)(""),r={title:(0,v.validator)(n,!0,(0,v.maxLength)(45)),duration:(0,v.validator)(o,!0,(0,v.minValue)(1),(0,v.maxValue)(1800)),"team-a-name":(0,v.validator)(i,!1,(0,v.maxLength)(25)),"team-b-name":(0,v.validator)(a,!1,(0,v.maxLength)(25))};return(0,v.provideValidators)(r),e.watch((e=>e.nextRound),((e,t)=>{e.teamA.name!==(null==t?void 0:t.teamA.name)&&(i.value=(0,D.f)(e.teamA.name,25)),e.teamB.name!==(null==t?void 0:t.teamB.name)&&(a.value=(0,D.f)(e.teamB.name,25))}),{immediate:!0}),{title:n,duration:o,teamAName:i,teamBName:a,allValid:(0,m.Fl)((()=>(0,v.allValid)(r))),isActivePredictionUnresolved:(0,m.Fl)((()=>{var e;return[E.ACTIVE,E.LOCKED].includes(null===(e=t.state.predictionStore.currentPrediction)||void 0===e?void 0:e.status)})),createPrediction(){return e=this,r=void 0,d=function*(){yield t.dispatch("createPrediction",{title:n.value,duration:o.value,teamAName:i.value,teamBName:a.value}),nodecg.getDialog("createPredictionDialog").close()},new((l=void 0)||(l=Promise))((function(t,n){function o(e){try{a(d.next(e))}catch(e){n(e)}}function i(e){try{a(d.throw(e))}catch(e){n(e)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof l?n:new l((function(e){e(n)}))).then(o,i)}a((d=d.apply(e,r||[])).next())}));var e,r,l,d},resetInputs(){n.value="Who do you think will win this match?",o.value=120,i.value=e.state.nextRound.teamA.name,a.value=e.state.nextRound.teamB.name},closeDialog:O}}});var T=n(8151);i()(T.Z,{insert:"head",singleton:!1}),T.Z.locals;const N=(0,n(4407).Z)(A,[["render",function(e,t,n,o,i,a){const r=(0,l.up)("ipl-dialog-title"),m=(0,l.up)("ipl-error-display"),v=(0,l.up)("ipl-message"),p=(0,l.up)("ipl-input"),h=(0,l.up)("ipl-button"),f=(0,l.up)("ipl-space");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(r,{title:"Create Prediction",onClose:t[0]||(t[0]=t=>e.closeDialog("createPredictionDialog"))}),(0,l.Wm)(m,{class:"m-t-8"}),e.isActivePredictionUnresolved?((0,l.wg)(),(0,l.j4)(v,{key:0,type:"warning",class:"m-t-8"},{default:(0,l.w5)((()=>[d])),_:1})):((0,l.wg)(),(0,l.j4)(f,{key:1,class:"m-t-8"},{default:(0,l.w5)((()=>[(0,l._)("div",c,[(0,l.Wm)(p,{modelValue:e.title,"onUpdate:modelValue":t[1]||(t[1]=t=>e.title=t),label:"Title",name:"title",class:"title-input"},null,8,["modelValue"]),(0,l.Wm)(p,{modelValue:e.duration,"onUpdate:modelValue":t[2]||(t[2]=t=>e.duration=t),label:"Duration",extra:"seconds",name:"duration",type:"number",class:"m-l-6 duration-input"},null,8,["modelValue"])]),(0,l._)("div",u,[(0,l.Wm)(p,{modelValue:e.teamAName,"onUpdate:modelValue":t[3]||(t[3]=t=>e.teamAName=t),name:"team-a-name",class:"max-width",label:"Team A"},null,8,["modelValue"]),(0,l.Wm)(p,{modelValue:e.teamBName,"onUpdate:modelValue":t[4]||(t[4]=t=>e.teamBName=t),name:"team-b-name",class:"max-width m-l-6",label:"Team B"},null,8,["modelValue"])]),(0,l._)("div",s,[(0,l.Wm)(h,{label:"Create",disabled:!e.allValid,color:"green",async:"","data-test":"create-prediction-button",onClick:e.createPrediction},null,8,["disabled","onClick"]),(0,l.Wm)(h,{label:"Reset",color:"red",class:"m-l-8","data-test":"reset-inputs-button",onClick:e.resetInputs},null,8,["onClick"])])])),_:1}))],64)}],["__scopeId","data-v-714bd430"]]);var k,L,R=n(4825),M=n(4928);L=function*(){yield(0,r.r)(P,x),yield(0,r.r)(w,y);const e=(0,R.ri)(N);(0,M.EW)(e),e.use(x,S),e.use(y,b),e.mount("#app")},new((k=void 0)||(k=Promise))((function(e,t){function n(e){try{i(L.next(e))}catch(e){t(e)}}function o(e){try{i(L.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof k?i:new k((function(e){e(i)}))).then(n,o)}i((L=L.apply(void 0,[])).next())}))}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return t[e](a,a.exports,o),a.loaded=!0,a.exports}o.m=t,e=[],o.O=(t,n,i,a)=>{if(!n){var r=1/0;for(u=0;u<e.length;u++){for(var[n,i,a]=e[u],l=!0,d=0;d<n.length;d++)(!1&a||r>=a)&&Object.keys(o.O).every((e=>o.O[e](n[d])))?n.splice(d--,1):(l=!1,a<r&&(r=a));if(l){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,i,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={249:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var i,a,[r,l,d]=n,c=0;if(r.some((t=>0!==e[t]))){for(i in l)o.o(l,i)&&(o.m[i]=l[i]);if(d)var u=d(o)}for(t&&t(n);c<r.length;c++)a=r[c],o.o(e,a)&&e[a]&&e[a][0](),e[r[c]]=0;return o.O(u)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=o.O(void 0,[36],(()=>o(8453)));i=o.O(i)})();