(()=>{var e,t={3175:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2609),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,"body{margin:0 0 14px}",""]);const i=o},9364:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2609),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".title-input[data-v-47e86800]{width:65%}.duration-input[data-v-47e86800]{width:35%}",""]);const i=o},343:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},217:e=>{e.exports=function(e){return e.split("")}},1359:e=>{e.exports=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}},7832:(e,t,n)=>{var r=n(1359),o=n(2195),i=n(6024);e.exports=function(e,t,n){return t==t?i(e,t,n):r(e,o,n)}},2195:e=>{e.exports=function(e){return e!=e}},9872:e=>{e.exports=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}},1054:(e,t,n)=>{var r=n(857),o=n(343),i=n(6152),a=n(4795),u=r?r.prototype:void 0,l=u?u.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(a(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},1704:(e,t,n)=>{var r=n(2153),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},3895:(e,t,n)=>{var r=n(9872);e.exports=function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:r(e,t,n)}},768:(e,t,n)=>{var r=n(7832);e.exports=function(e,t){for(var n=e.length;n--&&r(t,e[n],0)>-1;);return n}},1821:(e,t,n)=>{var r=n(7832);e.exports=function(e,t){for(var n=-1,o=e.length;++n<o&&r(t,e[n],0)>-1;);return n}},3880:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},6024:e=>{e.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},8435:(e,t,n)=>{var r=n(217),o=n(3880),i=n(3344);e.exports=function(e){return o(e)?i(e):r(e)}},2153:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},3344:e=>{var t="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",r="[^\\ud800-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",a="(?:"+t+"|"+n+")?",u="[\\ufe0e\\ufe0f]?",l=u+a+"(?:\\u200d(?:"+[r,o,i].join("|")+")"+u+a+")*",d="(?:"+[r+t+"?",t,o,i,"[\\ud800-\\udfff]"].join("|")+")",c=RegExp(n+"(?="+n+")|"+d+l,"g");e.exports=function(e){return e.match(c)||[]}},5455:(e,t,n)=>{var r=n(6411),o=n(940),i=n(9631),a=n(6152),u=n(7878),l=n(3226),d=n(6001),c=n(7598),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(u(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||c(e)||i(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(d(e))return!r(e).length;for(var n in e)if(s.call(e,n))return!1;return!0}},4795:(e,t,n)=>{var r=n(3366),o=n(5125);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},6188:(e,t,n)=>{var r=n(1054);e.exports=function(e){return null==e?"":r(e)}},5648:(e,t,n)=>{var r=n(1054),o=n(1704),i=n(3895),a=n(768),u=n(1821),l=n(8435),d=n(6188);e.exports=function(e,t,n){if((e=d(e))&&(n||void 0===t))return o(e);if(!e||!(t=r(t)))return e;var c=l(e),s=l(t),f=u(c,s),v=a(c,s)+1;return i(c,f,v).join("")}},9751:(e,t,n)=>{"use strict";n(223);var r=n(6062),o=n.n(r),i=n(3175);o()(i.Z,{insert:"head",singleton:!1}),i.Z.locals;var a=n(225),u=n(7875);const l=(0,u.Uk)(" The active prediction has not been resolved! "),d={class:"layout horizontal"},c={class:"layout horizontal m-t-4"};var s=n(641),f=n(8127),v=n(243),p=n(9850),m=n.n(p);const h=nodecg.Replicant("nextRound"),g=[h],y=(0,v.MT)({state:{nextRound:null},mutations:{setState(e,{name:t,val:n}){this.state[t]=m()(n)},setShowOnStream(e,t){h.value.showOnStream=t}},actions:{beginNextMatch(){nodecg.sendMessage("beginNextMatch")},setNextRound(e,{teamAId:t,teamBId:n,roundId:r}){nodecg.sendMessage("setNextRound",{teamAId:t,teamBId:n,roundId:r})}}}),b=Symbol();var w=n(908);function x(e,t,...n){const r=(0,s.qj)({isValid:null});return(0,u.YP)(e,(e=>{for(let t=0;t<n.length;t++){const o=n[t](e);if(!o.isValid){r.isValid=!1,r.message=o.message;break}r.isValid=!0,r.message=null}}),{immediate:t}),r}function E(e,t,n){const r=(o=t,new Intl.NumberFormat("en-US").format(o));var o;return 1===t?`${r} ${e}`:n?`${r} ${n}`:`${r} ${e}s`}n(5648);var P,S=n(5455),V=n.n(S);function C(e){return t=>({isValid:V()(t)||e>=t.length,message:`Must not be over ${E("character",e)}`})}function O(e){return t=>({isValid:null==t||e>=t,message:`Must not be above ${e}`})}function A(e){return t=>({isValid:null==t||t>=e,message:`Must not be below ${e}`})}!function(e){e.RESOLVED="RESOLVED",e.ACTIVE="ACTIVE",e.CANCELED="CANCELED",e.LOCKED="LOCKED"}(P||(P={}));var I=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function u(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}l((r=r.apply(e,t||[])).next())}))};const D=[nodecg.Replicant("predictionStore")],N=(0,v.MT)({state:{predictionStore:null},mutations:{setState(e,{name:t,val:n}){this.state[t]=m()(n)}},actions:{lockPrediction(e){return I(this,void 0,void 0,(function*(){return j(e.state.predictionStore.currentPrediction,P.LOCKED,[P.ACTIVE])}))},cancelPrediction(e){return I(this,void 0,void 0,(function*(){return j(e.state.predictionStore.currentPrediction,P.CANCELED,[P.ACTIVE,P.LOCKED])}))},resolvePrediction(e,{winningOutcomeIndex:t}){var n;return I(this,void 0,void 0,(function*(){if(t>1||t<0)throw new Error(`Cannot resolve prediction with outcome index ${t}.`);if(!(null===(n=e.state.predictionStore.currentPrediction)||void 0===n?void 0:n.id))throw new Error("No prediction to resolve.");if(e.state.predictionStore.currentPrediction.status!==P.LOCKED)throw new Error("Can only resolve a locked prediction.");return nodecg.sendMessage("patchPrediction",{id:e.state.predictionStore.currentPrediction.id,status:P.RESOLVED,winning_outcome_id:e.state.predictionStore.currentPrediction.outcomes[t].id})}))},createPrediction(e,{title:t,teamAName:n,teamBName:r,duration:o}){var i;return I(this,void 0,void 0,(function*(){if([P.ACTIVE,P.LOCKED].includes(null===(i=e.state.predictionStore.currentPrediction)||void 0===i?void 0:i.status))throw new Error("An unresolved prediction already exists.");return nodecg.sendMessage("postPrediction",{title:t,outcomes:[{title:n},{title:r}],prediction_window:o})}))},reconnect(){return I(this,void 0,void 0,(function*(){return nodecg.sendMessage("reconnectToRadiaSocket")}))}}});function j(e,t,n){return I(this,void 0,void 0,(function*(){if(!e||!n.includes(null==e?void 0:e.status))throw new Error(`Cannot set prediction status at this time. Status must match one of [${n.join(", ")}]`);return nodecg.sendMessage("patchPrediction",{id:e.id,status:t})}))}const M=Symbol();var T=n(2121);function k(e){nodecg.getDialog(e).close()}const B=(0,u.aZ)({name:"CreatePredictionDialog",components:{IplErrorDisplay:T.Z,IplMessage:f.IplMessage,IplButton:f.IplButton,IplInput:f.IplInput,IplSpace:f.IplSpace,IplDialogTitle:f.IplDialogTitle},setup(){const e=(0,v.oR)(b),t=(0,v.oR)(M),n=(0,s.iH)("Who do you think will win this match?"),r=(0,s.iH)(120),o=(0,s.iH)(""),i=(0,s.iH)(""),a={title:x(n,!0,C(45)),duration:x(r,!0,A(1),O(1800)),teamAName:x(o,!1,C(25)),teamBName:x(i,!1,C(25))};return e.watch((e=>e.nextRound),((e,t)=>{e.teamA.name!==(null==t?void 0:t.teamA.name)&&(o.value=(0,w.f)(e.teamA.name,25)),e.teamB.name!==(null==t?void 0:t.teamB.name)&&(i.value=(0,w.f)(e.teamB.name,25))}),{immediate:!0}),{title:n,duration:r,teamAName:o,teamBName:i,validators:a,allValid:(0,s.Fl)((()=>function(e){return Object.values(e).every((e=>e.isValid))}(a))),isActivePredictionUnresolved:(0,s.Fl)((()=>{var e;return[P.ACTIVE,P.LOCKED].includes(null===(e=t.state.predictionStore.currentPrediction)||void 0===e?void 0:e.status)})),createPrediction(){return e=this,a=void 0,l=function*(){yield t.dispatch("createPrediction",{title:n.value,duration:r.value,teamAName:o.value,teamBName:i.value}),nodecg.getDialog("createPredictionDialog").close()},new((u=void 0)||(u=Promise))((function(t,n){function r(e){try{i(l.next(e))}catch(e){n(e)}}function o(e){try{i(l.throw(e))}catch(e){n(e)}}function i(e){var n;e.done?t(e.value):(n=e.value,n instanceof u?n:new u((function(e){e(n)}))).then(r,o)}i((l=l.apply(e,a||[])).next())}));var e,a,u,l},closeDialog:k}}});var R=n(9364);o()(R.Z,{insert:"head",singleton:!1}),R.Z.locals;const L=(0,n(4407).Z)(B,[["render",function(e,t,n,r,o,i){const a=(0,u.up)("ipl-dialog-title"),s=(0,u.up)("ipl-error-display"),f=(0,u.up)("ipl-message"),v=(0,u.up)("ipl-input"),p=(0,u.up)("ipl-button"),m=(0,u.up)("ipl-space");return(0,u.wg)(),(0,u.iD)(u.HY,null,[(0,u.Wm)(a,{title:"Create Prediction",onClose:t[0]||(t[0]=t=>e.closeDialog("createPredictionDialog"))}),(0,u.Wm)(s,{class:"m-t-8"}),e.isActivePredictionUnresolved?((0,u.wg)(),(0,u.j4)(f,{key:0,type:"warning",class:"m-t-8"},{default:(0,u.w5)((()=>[l])),_:1})):((0,u.wg)(),(0,u.j4)(m,{key:1,class:"m-t-8"},{default:(0,u.w5)((()=>[(0,u._)("div",d,[(0,u.Wm)(v,{modelValue:e.title,"onUpdate:modelValue":t[1]||(t[1]=t=>e.title=t),label:"Title",name:"title",class:"title-input",validator:e.validators.title},null,8,["modelValue","validator"]),(0,u.Wm)(v,{modelValue:e.duration,"onUpdate:modelValue":t[2]||(t[2]=t=>e.duration=t),label:"Duration",extra:"seconds",name:"duration",type:"number",class:"m-l-6 duration-input",validator:e.validators.duration},null,8,["modelValue","validator"])]),(0,u._)("div",c,[(0,u.Wm)(v,{modelValue:e.teamAName,"onUpdate:modelValue":t[3]||(t[3]=t=>e.teamAName=t),name:"team-a-name",class:"max-width",label:"Team A",validator:e.validators.teamAName},null,8,["modelValue","validator"]),(0,u.Wm)(v,{modelValue:e.teamBName,"onUpdate:modelValue":t[4]||(t[4]=t=>e.teamBName=t),name:"team-b-name",class:"max-width m-l-6",label:"Team B",validator:e.validators.teamBName},null,8,["modelValue","validator"])]),(0,u.Wm)(p,{label:"Create",class:"m-t-8",disabled:!e.allValid,color:"green",async:"","data-test":"create-prediction-button",onClick:e.createPrediction},null,8,["disabled","onClick"])])),_:1}))],64)}],["__scopeId","data-v-47e86800"]]);var _,$,W=n(4825),Z=n(4928);$=function*(){yield(0,a.r)(D,N),yield(0,a.r)(g,y);const e=(0,W.ri)(L);(0,Z.EW)(e),e.use(N,M),e.use(y,b),e.mount("#app")},new((_=void 0)||(_=Promise))((function(e,t){function n(e){try{o($.next(e))}catch(e){t(e)}}function r(e){try{o($.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof _?o:new _((function(e){e(o)}))).then(n,r)}o(($=$.apply(void 0,[])).next())}))}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e](i,i.exports,r),i.loaded=!0,i.exports}r.m=t,e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(c=0;c<e.length;c++){for(var[n,o,i]=e[c],u=!0,l=0;l<n.length;l++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(u=!1,i<a&&(a=i));if(u){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={249:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,u,l]=n,d=0;if(a.some((t=>0!==e[t]))){for(o in u)r.o(u,o)&&(r.m[o]=u[o]);if(l)var c=l(r)}for(t&&t(n);d<a.length;d++)i=a[d],r.o(e,i)&&e[i]&&e[i][0](),e[a[d]]=0;return r.O(c)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[498],(()=>r(9751)));o=r.O(o)})();