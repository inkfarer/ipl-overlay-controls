(()=>{"use strict";var e,t={3175:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(9601),o=n.n(i),a=n(2609),r=n.n(a)()(o());r.push([e.id,"body{margin:0 0 14px}",""]);const l=r},9462:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(9601),o=n.n(i),a=n(2609),r=n.n(a)()(o());r.push([e.id,".title-input[data-v-521d4d21]{width:65%}.duration-input[data-v-521d4d21]{width:35%}",""]);const l=r},5829:(e,t,n)=>{n(223);var i=n(6062),o=n.n(i),a=n(4036),r=n.n(a),l=n(6793),d=n.n(l),c=n(7892),u=n.n(c),s=n(1173),m=n.n(s),v=n(2464),p=n.n(v),h=n(3175),f={};f.styleTagTransform=p(),f.setAttributes=u(),f.insert=d().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=m(),o()(h.Z,f),h.Z&&h.Z.locals&&h.Z.locals;var g=n(225),w=n(7875);const y={class:"layout horizontal"},b={class:"layout horizontal m-t-4"},E={class:"layout horizontal m-t-8"};var P=n(641),C=n(8127),x=n(5471);const S=nodecg.Replicant("nextRound"),V=[S],A=(0,x.Q_)("nextRound",{state:()=>({nextRound:null}),actions:{setShowOnStream(e){S.value.showOnStream=e},beginNextMatch(e){nodecg.sendMessage("beginNextMatch",e)},setNextRound(e){nodecg.sendMessage("setNextRound",e)}}});var O;!function(e){e.RESOLVED="RESOLVED",e.ACTIVE="ACTIVE",e.CANCELED="CANCELED",e.LOCKED="LOCKED"}(O||(O={}));var D=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{d(i.next(e))}catch(e){a(e)}}function l(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}d((i=i.apply(e,t||[])).next())}))};const I=[nodecg.Replicant("predictionStore")],T=(0,x.Q_)("prediction",{state:()=>({predictionStore:null}),actions:{lockPrediction(){return D(this,void 0,void 0,(function*(){return N(this.predictionStore.currentPrediction,O.LOCKED,[O.ACTIVE])}))},cancelPrediction(){return D(this,void 0,void 0,(function*(){return N(this.predictionStore.currentPrediction,O.CANCELED,[O.ACTIVE,O.LOCKED])}))},resolvePrediction({winningOutcomeIndex:e}){var t;return D(this,void 0,void 0,(function*(){if(e>1||e<0)throw new Error(`Cannot resolve prediction with outcome index ${e}.`);if(!(null===(t=this.predictionStore.currentPrediction)||void 0===t?void 0:t.id))throw new Error("No prediction to resolve.");if(this.predictionStore.currentPrediction.status!==O.LOCKED)throw new Error("Can only resolve a locked prediction.");return nodecg.sendMessage("patchPrediction",{id:this.predictionStore.currentPrediction.id,status:O.RESOLVED,winning_outcome_id:this.predictionStore.currentPrediction.outcomes[e].id})}))},createPrediction({title:e,teamAName:t,teamBName:n,duration:i}){var o;return D(this,void 0,void 0,(function*(){if([O.ACTIVE,O.LOCKED].includes(null===(o=this.predictionStore.currentPrediction)||void 0===o?void 0:o.status))throw new Error("An unresolved prediction already exists.");return nodecg.sendMessage("postPrediction",{title:e,outcomes:[{title:t},{title:n}],prediction_window:i})}))},reconnect(){return D(this,void 0,void 0,(function*(){return nodecg.sendMessage("reconnectToRadiaSocket")}))}}});function N(e,t,n){return D(this,void 0,void 0,(function*(){if(!e||!n.includes(null==e?void 0:e.status))throw new Error(`Cannot set prediction status at this time. Status must match one of [${n.join(", ")}]`);return nodecg.sendMessage("patchPrediction",{id:e.id,status:t})}))}var _=n(8942);function k(e){nodecg.getDialog(e).close()}var L=n(908);const R=(0,w.aZ)({name:"CreatePredictionDialog",components:{IplErrorDisplay:_.Z,IplMessage:C.IplMessage,IplButton:C.IplButton,IplInput:C.IplInput,IplSpace:C.IplSpace,IplDialogTitle:C.IplDialogTitle},setup(){const e=A(),t=T(),n=(0,P.iH)("Who do you think will win this match?"),i=(0,P.iH)(120),o=(0,P.iH)(""),a=(0,P.iH)(""),r={title:(0,C.validator)(n,!0,(0,C.maxLength)(45)),duration:(0,C.validator)(i,!0,(0,C.minValue)(1),(0,C.maxValue)(1800)),"team-a-name":(0,C.validator)(o,!1,(0,C.maxLength)(25)),"team-b-name":(0,C.validator)(a,!1,(0,C.maxLength)(25))};return(0,C.provideValidators)(r),(0,w.YP)((()=>e.nextRound),((e,t)=>{e.teamA.name!==(null==t?void 0:t.teamA.name)&&(o.value=(0,L.f)(e.teamA.name,25)),e.teamB.name!==(null==t?void 0:t.teamB.name)&&(a.value=(0,L.f)(e.teamB.name,25))}),{immediate:!0}),{title:n,duration:i,teamAName:o,teamBName:a,allValid:(0,w.Fl)((()=>(0,C.allValid)(r))),isActivePredictionUnresolved:(0,w.Fl)((()=>{var e;return[O.ACTIVE,O.LOCKED].includes(null===(e=t.predictionStore.currentPrediction)||void 0===e?void 0:e.status)})),createPrediction(){return e=this,r=void 0,d=function*(){yield t.createPrediction({title:n.value,duration:i.value,teamAName:o.value,teamBName:a.value}),nodecg.getDialog("createPredictionDialog").close()},new((l=void 0)||(l=Promise))((function(t,n){function i(e){try{a(d.next(e))}catch(e){n(e)}}function o(e){try{a(d.throw(e))}catch(e){n(e)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof l?n:new l((function(e){e(n)}))).then(i,o)}a((d=d.apply(e,r||[])).next())}));var e,r,l,d},resetInputs(){n.value="Who do you think will win this match?",i.value=120,o.value=e.nextRound.teamA.name,a.value=e.nextRound.teamB.name},closeDialog:k}}});var B=n(9462),M={};M.styleTagTransform=p(),M.setAttributes=u(),M.insert=d().bind(null,"head"),M.domAPI=r(),M.insertStyleElement=m(),o()(B.Z,M),B.Z&&B.Z.locals&&B.Z.locals;const Z=(0,n(4407).Z)(R,[["render",function(e,t,n,i,o,a){const r=(0,w.up)("ipl-dialog-title"),l=(0,w.up)("ipl-error-display"),d=(0,w.up)("ipl-message"),c=(0,w.up)("ipl-input"),u=(0,w.up)("ipl-button"),s=(0,w.up)("ipl-space");return(0,w.wg)(),(0,w.iD)(w.HY,null,[(0,w.Wm)(r,{title:"Create Prediction",onClose:t[0]||(t[0]=t=>e.closeDialog("createPredictionDialog"))}),(0,w.Wm)(l,{class:"m-t-8"}),e.isActivePredictionUnresolved?((0,w.wg)(),(0,w.j4)(d,{key:0,type:"warning",class:"m-t-8"},{default:(0,w.w5)((()=>[(0,w.Uk)(" The active prediction has not been resolved! ")])),_:1})):((0,w.wg)(),(0,w.j4)(s,{key:1,class:"m-t-8"},{default:(0,w.w5)((()=>[(0,w._)("div",y,[(0,w.Wm)(c,{modelValue:e.title,"onUpdate:modelValue":t[1]||(t[1]=t=>e.title=t),label:"Title",name:"title",class:"title-input"},null,8,["modelValue"]),(0,w.Wm)(c,{modelValue:e.duration,"onUpdate:modelValue":t[2]||(t[2]=t=>e.duration=t),label:"Duration",extra:"seconds",name:"duration",type:"number",class:"m-l-6 duration-input"},null,8,["modelValue"])]),(0,w._)("div",b,[(0,w.Wm)(c,{modelValue:e.teamAName,"onUpdate:modelValue":t[3]||(t[3]=t=>e.teamAName=t),name:"team-a-name",class:"max-width",label:"Team A"},null,8,["modelValue"]),(0,w.Wm)(c,{modelValue:e.teamBName,"onUpdate:modelValue":t[4]||(t[4]=t=>e.teamBName=t),name:"team-b-name",class:"max-width m-l-6",label:"Team B"},null,8,["modelValue"])]),(0,w._)("div",E,[(0,w.Wm)(u,{label:"Create",disabled:!e.allValid,color:"green",async:"",onClick:e.createPrediction},null,8,["disabled","onClick"]),(0,w.Wm)(u,{label:"Reset",color:"red",class:"m-l-8",onClick:e.resetInputs},null,8,["onClick"])])])),_:1}))],64)}],["__scopeId","data-v-521d4d21"]]);var j,W,K=n(4825),U=n(4928);W=function*(){const e=(0,K.ri)(Z);e.use((0,x.WB)()),yield(0,g._)(V,A()),yield(0,g._)(I,T()),(0,U.E)(e),e.mount("#app")},new((j=void 0)||(j=Promise))((function(e,t){function n(e){try{o(W.next(e))}catch(e){t(e)}}function i(e){try{o(W.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof j?o:new j((function(e){e(o)}))).then(n,i)}o((W=W.apply(void 0,[])).next())}))}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return t[e](a,a.exports,i),a.loaded=!0,a.exports}i.m=t,e=[],i.O=(t,n,o,a)=>{if(!n){var r=1/0;for(u=0;u<e.length;u++){for(var[n,o,a]=e[u],l=!0,d=0;d<n.length;d++)(!1&a||r>=a)&&Object.keys(i.O).every((e=>i.O[e](n[d])))?n.splice(d--,1):(l=!1,a<r&&(r=a));if(l){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,o,a]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={249:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[r,l,d]=n,c=0;if(r.some((t=>0!==e[t]))){for(o in l)i.o(l,o)&&(i.m[o]=l[o]);if(d)var u=d(i)}for(t&&t(n);c<r.length;c++)a=r[c],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(u)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),i.nc=void 0;var o=i.O(void 0,[13,471],(()=>i(5829)));o=i.O(o)})();