(()=>{"use strict";var e,n={3175:(e,n,t)=>{t.d(n,{Z:()=>s});var o=t(9601),i=t.n(o),r=t(2609),a=t.n(r)()(i());a.push([e.id,"body{margin:0 0 14px}",""]);const s=a},7670:(e,n,t)=>{t.d(n,{Z:()=>s});var o=t(9601),i=t.n(o),r=t(2609),a=t.n(r)()(i());a.push([e.id,".winner-label[data-v-441743d3]{color:#fdd835}",""]);const s=a},4401:(e,n,t)=>{t(223);var o=t(6062),i=t.n(o),r=t(4036),a=t.n(r),s=t(6793),c=t.n(s),l=t(7892),d=t.n(l),u=t(1173),v=t.n(u),p=t(2464),m=t.n(p),g=t(3175),f={};f.styleTagTransform=m(),f.setAttributes=d(),f.insert=c().bind(null,"head"),f.domAPI=a(),f.insertStyleElement=v(),i()(g.Z,f),g.Z&&g.Z.locals&&g.Z.locals;var w,h=t(225),y=t(7875),C=t(349),P=t(8127);!function(e){e.RESOLVED="RESOLVED",e.ACTIVE="ACTIVE",e.CANCELED="CANCELED",e.LOCKED="LOCKED"}(w||(w={}));var A=t(5471),b=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,s)}c((o=o.apply(e,n||[])).next())}))};const E=[nodecg.Replicant("predictionStore")],T=(0,A.Q_)("prediction",{state:()=>({predictionStore:null}),actions:{lockPrediction(){return b(this,void 0,void 0,(function*(){return O(this.predictionStore.currentPrediction,w.LOCKED,[w.ACTIVE])}))},cancelPrediction(){return b(this,void 0,void 0,(function*(){return O(this.predictionStore.currentPrediction,w.CANCELED,[w.ACTIVE,w.LOCKED])}))},resolvePrediction({winningOutcomeIndex:e}){var n;return b(this,void 0,void 0,(function*(){if(e>1||e<0)throw new Error(`Cannot resolve prediction with outcome index ${e}.`);if(!(null===(n=this.predictionStore.currentPrediction)||void 0===n?void 0:n.id))throw new Error("No prediction to resolve.");if(this.predictionStore.currentPrediction.status!==w.LOCKED)throw new Error("Can only resolve a locked prediction.");return nodecg.sendMessage("patchPrediction",{id:this.predictionStore.currentPrediction.id,status:w.RESOLVED,winning_outcome_id:this.predictionStore.currentPrediction.outcomes[e].id})}))},createPrediction({title:e,teamAName:n,teamBName:t,duration:o}){var i;return b(this,void 0,void 0,(function*(){if([w.ACTIVE,w.LOCKED].includes(null===(i=this.predictionStore.currentPrediction)||void 0===i?void 0:i.status))throw new Error("An unresolved prediction already exists.");return nodecg.sendMessage("postPrediction",{title:e,outcomes:[{title:n},{title:t}],prediction_window:o})}))},reconnect(){return b(this,void 0,void 0,(function*(){return nodecg.sendMessage("reconnectToRadiaSocket")}))}}});function O(e,n,t){return b(this,void 0,void 0,(function*(){if(!e||!t.includes(null==e?void 0:e.status))throw new Error(`Cannot set prediction status at this time. Status must match one of [${t.join(", ")}]`);return nodecg.sendMessage("patchPrediction",{id:e.id,status:n})}))}var I;!function(e){e.NO_WINNER="none",e.ALPHA="alpha",e.BRAVO="bravo"}(I||(I={}));const R=nodecg.Replicant("activeRound"),S=nodecg.Replicant("swapColorsInternally"),W=[R,S],k=(0,A.Q_)("activeRound",{state:()=>({activeRound:null,swapColorsInternally:null}),actions:{setWinner({winner:e}){nodecg.sendMessage("setWinner",{winner:e})},removeWinner(){nodecg.sendMessage("removeWinner")},setActiveColor(e){nodecg.sendMessage("setActiveColor",e)},swapColors(){S.value=!S.value},setWinnerForIndex({index:e,winner:n}){nodecg.sendMessage("setWinner",{winner:n,roundIndex:e})},resetActiveRound(){nodecg.sendMessage("resetActiveRound")},setActiveRound(e){nodecg.sendMessage("setActiveRound",e)},swapRoundColor(e){nodecg.sendMessage("swapRoundColor",e)},updateActiveGames(e){nodecg.sendMessage("updateActiveGames",{games:e})},switchToNextColor(){nodecg.sendMessage("switchToNextColor")},switchToPreviousColor(){nodecg.sendMessage("switchToPreviousColor")},getNextAndPreviousColors(){return e=this,n=void 0,o=function*(){return nodecg.sendMessage("getNextAndPreviousColors")},new((t=void 0)||(t=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,s)}c((o=o.apply(e,n||[])).next())}));var e,n,t,o}}});var D=t(8942);function _(e){nodecg.getDialog(e).close()}const x=(0,y.aZ)({name:"ResolvePredictionDialog",components:{IplErrorDisplay:D.Z,IplDialogTitle:P.IplDialogTitle,IplMessage:P.IplMessage,IplButton:P.IplButton,IplLabel:P.IplLabel,IplSpace:P.IplSpace},setup(){const e=T(),n=k(),t=(0,y.Fl)((()=>{var n;return null===(n=e.predictionStore.currentPrediction)||void 0===n?void 0:n.outcomes})),o=(0,y.Fl)((()=>{const e=n.activeRound;return e.teamA.score===e.teamB.score?null:e.teamA.score>e.teamB.score?e.teamA.name:e.teamB.name})),i=(0,y.Fl)((()=>{var e;if(t.value)for(let n=0;n<2;n++)if(t.value[n].title.toUpperCase()===(null===(e=o.value)||void 0===e?void 0:e.toUpperCase())){if(0===n)return I.ALPHA;if(1===n)return I.BRAVO}return I.NO_WINNER}));return{matchIsCompleted:(0,y.Fl)((()=>n.activeRound.match.isCompleted)),outcomes:t,status:(0,y.Fl)((()=>{var n;return null===(n=e.predictionStore.currentPrediction)||void 0===n?void 0:n.status})),PredictionStatus:w,winningTeamName:o,winningTeam:i,GameWinner:I,resolvePrediction(n){return t=this,o=void 0,r=function*(){yield e.resolvePrediction({winningOutcomeIndex:n}),nodecg.getDialog("resolvePredictionDialog").close()},new((i=void 0)||(i=Promise))((function(e,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function s(e){try{c(r.throw(e))}catch(e){n(e)}}function c(n){var t;n.done?e(n.value):(t=n.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}c((r=r.apply(t,o||[])).next())}));var t,o,i,r},closeDialog:_}}});var N=t(7670),L={};L.styleTagTransform=m(),L.setAttributes=d(),L.insert=c().bind(null,"head"),L.domAPI=a(),L.insertStyleElement=v(),i()(N.Z,L),N.Z&&N.Z.locals&&N.Z.locals;const M=(0,t(4407).Z)(x,[["render",function(e,n,t,o,i,r){const a=(0,y.up)("ipl-dialog-title"),s=(0,y.up)("ipl-error-display"),c=(0,y.up)("ipl-message"),l=(0,y.up)("ipl-label"),d=(0,y.up)("ipl-button"),u=(0,y.up)("ipl-space");return(0,y.wg)(),(0,y.iD)(y.HY,null,[(0,y.Wm)(a,{title:"Resolve Prediction",onClose:n[0]||(n[0]=n=>e.closeDialog("resolvePredictionDialog"))}),(0,y.Wm)(s,{class:"m-t-8"}),e.outcomes?e.status!==e.PredictionStatus.LOCKED?((0,y.wg)(),(0,y.j4)(c,{key:1,type:"info",class:"m-t-8"},{default:(0,y.w5)((()=>[(0,y.Uk)(" This prediction cannot be resolved right now. ")])),_:1})):((0,y.wg)(),(0,y.iD)(y.HY,{key:2},[e.matchIsCompleted?(0,y.kq)("",!0):((0,y.wg)(),(0,y.j4)(c,{key:0,class:"m-t-8",type:"warning"},{default:(0,y.w5)((()=>[(0,y.Uk)(" The current round has not been completed! ")])),_:1})),e.winningTeam===e.GameWinner.NO_WINNER?((0,y.wg)(),(0,y.j4)(c,{key:1,type:"info",class:"m-t-8"},{default:(0,y.w5)((()=>[(0,y.Uk)(" Unable to determine the current round's winner. "),e.winningTeamName?((0,y.wg)(),(0,y.iD)(y.HY,{key:0},[(0,y.Uk)("The leading team is "+(0,C.zw)(e.winningTeamName)+".",1)],64)):(0,y.kq)("",!0)])),_:1})):(0,y.kq)("",!0),(0,y.Wm)(u,{class:"m-t-8"},{default:(0,y.w5)((()=>[(0,y.Wm)(l,{class:(0,C.C_)({"winner-label":e.winningTeam===e.GameWinner.ALPHA})},{default:(0,y.w5)((()=>[(0,y.Uk)((0,C.zw)(e.winningTeam===e.GameWinner.ALPHA?"Winner - ":"")+" Team A ",1)])),_:1},8,["class"]),(0,y.Wm)(d,{async:"","progress-message":"Resolving...",label:e.outcomes[0].title,color:e.winningTeam===e.GameWinner.ALPHA?"yellow":"blue",onClick:n[1]||(n[1]=n=>e.resolvePrediction(0))},null,8,["label","color"]),(0,y.Wm)(l,{class:(0,C.C_)({"winner-label":e.winningTeam===e.GameWinner.BRAVO})},{default:(0,y.w5)((()=>[(0,y.Uk)((0,C.zw)(e.winningTeam===e.GameWinner.BRAVO?"Winner - ":"")+" Team B ",1)])),_:1},8,["class"]),(0,y.Wm)(d,{async:"","progress-message":"Resolving...",label:e.outcomes[1].title,color:e.winningTeam===e.GameWinner.BRAVO?"yellow":"blue",onClick:n[2]||(n[2]=n=>e.resolvePrediction(1))},null,8,["label","color"])])),_:1})],64)):((0,y.wg)(),(0,y.j4)(c,{key:0,type:"warning",class:"m-t-8"},{default:(0,y.w5)((()=>[(0,y.Uk)(" No prediction data loaded. ")])),_:1}))],64)}],["__scopeId","data-v-441743d3"]]);var j,B,V=t(4825),Z=t(4928);B=function*(){const e=(0,V.ri)(M);e.use((0,A.WB)()),yield(0,h._)(W,k()),yield(0,h._)(E,T()),(0,Z.E)(e),e.mount("#app")},new((j=void 0)||(j=Promise))((function(e,n){function t(e){try{i(B.next(e))}catch(e){n(e)}}function o(e){try{i(B.throw(e))}catch(e){n(e)}}function i(n){var i;n.done?e(n.value):(i=n.value,i instanceof j?i:new j((function(e){e(i)}))).then(t,o)}i((B=B.apply(void 0,[])).next())}))}},t={};function o(e){var i=t[e];if(void 0!==i)return i.exports;var r=t[e]={id:e,loaded:!1,exports:{}};return n[e](r,r.exports,o),r.loaded=!0,r.exports}o.m=n,e=[],o.O=(n,t,i,r)=>{if(!t){var a=1/0;for(d=0;d<e.length;d++){for(var[t,i,r]=e[d],s=!0,c=0;c<t.length;c++)(!1&r||a>=r)&&Object.keys(o.O).every((e=>o.O[e](t[c])))?t.splice(c--,1):(s=!1,r<a&&(a=r));if(s){e.splice(d--,1);var l=i();void 0!==l&&(n=l)}}return n}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[t,i,r]},o.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return o.d(n,{a:n}),n},o.d=(e,n)=>{for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={93:0};o.O.j=n=>0===e[n];var n=(n,t)=>{var i,r,[a,s,c]=t,l=0;if(a.some((n=>0!==e[n]))){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(c)var d=c(o)}for(n&&n(t);l<a.length;l++)r=a[l],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(d)},t=self.webpackChunk=self.webpackChunk||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})(),o.nc=void 0;var i=o.O(void 0,[13,471],(()=>o(4401)));i=o.O(i)})();