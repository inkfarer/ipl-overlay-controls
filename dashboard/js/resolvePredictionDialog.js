(()=>{"use strict";var e,n={3175:(e,n,t)=>{t.d(n,{Z:()=>r});var o=t(2609),i=t.n(o)()((function(e){return e[1]}));i.push([e.id,"body{margin:0 0 14px}",""]);const r=i},9031:(e,n,t)=>{t.d(n,{Z:()=>r});var o=t(2609),i=t.n(o)()((function(e){return e[1]}));i.push([e.id,".winner-label[data-v-441743d3]{color:#fdd835}",""]);const r=i},8025:(e,n,t)=>{t(223);var o=t(6062),i=t.n(o),r=t(3175);i()(r.Z,{insert:"head",singleton:!1}),r.Z.locals;var a=t(225),s=t(7875),c=t(349);const l=(0,s.Uk)(" No prediction data loaded. "),d=(0,s.Uk)(" This prediction cannot be resolved right now. "),u=(0,s.Uk)(" The current round has not been completed! "),v=(0,s.Uk)(" Unable to determine the current round's winner. ");var p,g=t(641),m=t(8127);!function(e){e.RESOLVED="RESOLVED",e.ACTIVE="ACTIVE",e.CANCELED="CANCELED",e.LOCKED="LOCKED"}(p||(p={}));var f=t(882),w=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,s)}c((o=o.apply(e,n||[])).next())}))};const h=[nodecg.Replicant("predictionStore")],y=(0,f.Q_)("prediction",{state:()=>({predictionStore:null}),actions:{lockPrediction(){return w(this,void 0,void 0,(function*(){return C(this.predictionStore.currentPrediction,p.LOCKED,[p.ACTIVE])}))},cancelPrediction(){return w(this,void 0,void 0,(function*(){return C(this.predictionStore.currentPrediction,p.CANCELED,[p.ACTIVE,p.LOCKED])}))},resolvePrediction({winningOutcomeIndex:e}){var n;return w(this,void 0,void 0,(function*(){if(e>1||e<0)throw new Error(`Cannot resolve prediction with outcome index ${e}.`);if(!(null===(n=this.predictionStore.currentPrediction)||void 0===n?void 0:n.id))throw new Error("No prediction to resolve.");if(this.predictionStore.currentPrediction.status!==p.LOCKED)throw new Error("Can only resolve a locked prediction.");return nodecg.sendMessage("patchPrediction",{id:this.predictionStore.currentPrediction.id,status:p.RESOLVED,winning_outcome_id:this.predictionStore.currentPrediction.outcomes[e].id})}))},createPrediction({title:e,teamAName:n,teamBName:t,duration:o}){var i;return w(this,void 0,void 0,(function*(){if([p.ACTIVE,p.LOCKED].includes(null===(i=this.predictionStore.currentPrediction)||void 0===i?void 0:i.status))throw new Error("An unresolved prediction already exists.");return nodecg.sendMessage("postPrediction",{title:e,outcomes:[{title:n},{title:t}],prediction_window:o})}))},reconnect(){return w(this,void 0,void 0,(function*(){return nodecg.sendMessage("reconnectToRadiaSocket")}))}}});function C(e,n,t){return w(this,void 0,void 0,(function*(){if(!e||!t.includes(null==e?void 0:e.status))throw new Error(`Cannot set prediction status at this time. Status must match one of [${t.join(", ")}]`);return nodecg.sendMessage("patchPrediction",{id:e.id,status:n})}))}var P;!function(e){e.NO_WINNER="none",e.ALPHA="alpha",e.BRAVO="bravo"}(P||(P={}));const A=nodecg.Replicant("activeRound"),b=nodecg.Replicant("swapColorsInternally"),E=[A,b],O=(0,f.Q_)("activeRound",{state:()=>({activeRound:null,swapColorsInternally:null}),actions:{setWinner({winner:e}){nodecg.sendMessage("setWinner",{winner:e})},removeWinner(){nodecg.sendMessage("removeWinner")},setActiveColor(e){nodecg.sendMessage("setActiveColor",e)},swapColors(){b.value=!b.value},setWinnerForIndex({index:e,winner:n}){nodecg.sendMessage("setWinner",{winner:n,roundIndex:e})},resetActiveRound(){nodecg.sendMessage("resetActiveRound")},setActiveRound(e){nodecg.sendMessage("setActiveRound",e)},swapRoundColor(e){nodecg.sendMessage("swapRoundColor",e)},updateActiveGames(e){nodecg.sendMessage("updateActiveGames",{games:e})},switchToNextColor(){nodecg.sendMessage("switchToNextColor")},switchToPreviousColor(){nodecg.sendMessage("switchToPreviousColor")},getNextAndPreviousColors(){return e=this,n=void 0,o=function*(){return nodecg.sendMessage("getNextAndPreviousColors")},new((t=void 0)||(t=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,s)}c((o=o.apply(e,n||[])).next())}));var e,n,t,o}}});var T=t(6349);function R(e){nodecg.getDialog(e).close()}const I=(0,s.aZ)({name:"ResolvePredictionDialog",components:{IplErrorDisplay:T.Z,IplDialogTitle:m.IplDialogTitle,IplMessage:m.IplMessage,IplButton:m.IplButton,IplLabel:m.IplLabel,IplSpace:m.IplSpace},setup(){const e=y(),n=O(),t=(0,g.Fl)((()=>{var n;return null===(n=e.predictionStore.currentPrediction)||void 0===n?void 0:n.outcomes})),o=(0,g.Fl)((()=>{const e=n.activeRound;return e.teamA.score===e.teamB.score?null:e.teamA.score>e.teamB.score?e.teamA.name:e.teamB.name})),i=(0,g.Fl)((()=>{var e;if(t.value)for(let n=0;n<2;n++)if(t.value[n].title.toUpperCase()===(null===(e=o.value)||void 0===e?void 0:e.toUpperCase())){if(0===n)return P.ALPHA;if(1===n)return P.BRAVO}return P.NO_WINNER}));return{matchIsCompleted:(0,g.Fl)((()=>n.activeRound.match.isCompleted)),outcomes:t,status:(0,g.Fl)((()=>{var n;return null===(n=e.predictionStore.currentPrediction)||void 0===n?void 0:n.status})),PredictionStatus:p,winningTeamName:o,winningTeam:i,GameWinner:P,resolvePrediction(n){return t=this,o=void 0,r=function*(){yield e.resolvePrediction({winningOutcomeIndex:n}),nodecg.getDialog("resolvePredictionDialog").close()},new((i=void 0)||(i=Promise))((function(e,n){function a(e){try{c(r.next(e))}catch(e){n(e)}}function s(e){try{c(r.throw(e))}catch(e){n(e)}}function c(n){var t;n.done?e(n.value):(t=n.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}c((r=r.apply(t,o||[])).next())}));var t,o,i,r},closeDialog:R}}});var W=t(9031);i()(W.Z,{insert:"head",singleton:!1}),W.Z.locals;const k=(0,t(4407).Z)(I,[["render",function(e,n,t,o,i,r){const a=(0,s.up)("ipl-dialog-title"),p=(0,s.up)("ipl-error-display"),g=(0,s.up)("ipl-message"),m=(0,s.up)("ipl-label"),f=(0,s.up)("ipl-button"),w=(0,s.up)("ipl-space");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(a,{title:"Resolve Prediction",onClose:n[0]||(n[0]=n=>e.closeDialog("resolvePredictionDialog"))}),(0,s.Wm)(p,{class:"m-t-8"}),e.outcomes?e.status!==e.PredictionStatus.LOCKED?((0,s.wg)(),(0,s.j4)(g,{key:1,type:"info",class:"m-t-8"},{default:(0,s.w5)((()=>[d])),_:1})):((0,s.wg)(),(0,s.iD)(s.HY,{key:2},[e.matchIsCompleted?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(g,{key:0,class:"m-t-8",type:"warning"},{default:(0,s.w5)((()=>[u])),_:1})),e.winningTeam===e.GameWinner.NO_WINNER?((0,s.wg)(),(0,s.j4)(g,{key:1,type:"info",class:"m-t-8"},{default:(0,s.w5)((()=>[v,e.winningTeamName?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Uk)("The leading team is "+(0,c.zw)(e.winningTeamName)+".",1)],64)):(0,s.kq)("",!0)])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(w,{class:"m-t-8"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{class:(0,c.C_)({"winner-label":e.winningTeam===e.GameWinner.ALPHA})},{default:(0,s.w5)((()=>[(0,s.Uk)((0,c.zw)(e.winningTeam===e.GameWinner.ALPHA?"Winner - ":"")+" Team A ",1)])),_:1},8,["class"]),(0,s.Wm)(f,{async:"","progress-message":"Resolving...",label:e.outcomes[0].title,color:e.winningTeam===e.GameWinner.ALPHA?"yellow":"blue","data-test":"resolve-outcome-1-button",onClick:n[1]||(n[1]=n=>e.resolvePrediction(0))},null,8,["label","color"]),(0,s.Wm)(m,{class:(0,c.C_)({"winner-label":e.winningTeam===e.GameWinner.BRAVO})},{default:(0,s.w5)((()=>[(0,s.Uk)((0,c.zw)(e.winningTeam===e.GameWinner.BRAVO?"Winner - ":"")+" Team B ",1)])),_:1},8,["class"]),(0,s.Wm)(f,{async:"","progress-message":"Resolving...",label:e.outcomes[1].title,color:e.winningTeam===e.GameWinner.BRAVO?"yellow":"blue","data-test":"resolve-outcome-2-button",onClick:n[2]||(n[2]=n=>e.resolvePrediction(1))},null,8,["label","color"])])),_:1})],64)):((0,s.wg)(),(0,s.j4)(g,{key:0,type:"warning",class:"m-t-8"},{default:(0,s.w5)((()=>[l])),_:1}))],64)}],["__scopeId","data-v-441743d3"]]);var D,S,_=t(4825),x=t(4928);S=function*(){const e=(0,_.ri)(k);e.use((0,f.WB)()),yield(0,a._)(E,O()),yield(0,a._)(h,y()),(0,x.E)(e),e.mount("#app")},new((D=void 0)||(D=Promise))((function(e,n){function t(e){try{i(S.next(e))}catch(e){n(e)}}function o(e){try{i(S.throw(e))}catch(e){n(e)}}function i(n){var i;n.done?e(n.value):(i=n.value,i instanceof D?i:new D((function(e){e(i)}))).then(t,o)}i((S=S.apply(void 0,[])).next())}))}},t={};function o(e){var i=t[e];if(void 0!==i)return i.exports;var r=t[e]={id:e,loaded:!1,exports:{}};return n[e](r,r.exports,o),r.loaded=!0,r.exports}o.m=n,e=[],o.O=(n,t,i,r)=>{if(!t){var a=1/0;for(d=0;d<e.length;d++){for(var[t,i,r]=e[d],s=!0,c=0;c<t.length;c++)(!1&r||a>=r)&&Object.keys(o.O).every((e=>o.O[e](t[c])))?t.splice(c--,1):(s=!1,r<a&&(a=r));if(s){e.splice(d--,1);var l=i();void 0!==l&&(n=l)}}return n}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[t,i,r]},o.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return o.d(n,{a:n}),n},o.d=(e,n)=>{for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={93:0};o.O.j=n=>0===e[n];var n=(n,t)=>{var i,r,[a,s,c]=t,l=0;if(a.some((n=>0!==e[n]))){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(c)var d=c(o)}for(n&&n(t);l<a.length;l++)r=a[l],o.o(e,r)&&e[r]&&e[r][0](),e[a[l]]=0;return o.O(d)},t=self.webpackChunk=self.webpackChunk||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var i=o.O(void 0,[385,882],(()=>o(8025)));i=o.O(i)})();